(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&a(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var dm={exports:{}},Zl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N_;function dA(){if(N_)return Zl;N_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:h,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var D_;function mA(){return D_||(D_=1,dm.exports=dA()),dm.exports}var I=mA(),mm={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function pA(){if(O_)return Fe;O_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function S(M){return M===null||typeof M!="object"?null:(M=T&&M[T]||M["@@iterator"],typeof M=="function"?M:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,J={};function Q(M,ee,me){this.props=M,this.context=ee,this.refs=J,this.updater=me||N}Q.prototype.isReactComponent={},Q.prototype.setState=function(M,ee){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,ee,"setState")},Q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=Q.prototype;function oe(M,ee,me){this.props=M,this.context=ee,this.refs=J,this.updater=me||N}var ue=oe.prototype=new ne;ue.constructor=oe,B(ue,Q.prototype),ue.isPureReactComponent=!0;var Re=Array.isArray,le={H:null,A:null,T:null,S:null,V:null},V=Object.prototype.hasOwnProperty;function x(M,ee,me,fe,Ee,He){return me=He.ref,{$$typeof:r,type:M,key:ee,ref:me!==void 0?me:null,props:He}}function w(M,ee){return x(M.type,ee,void 0,void 0,void 0,M.props)}function R(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function O(M){var ee={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(me){return ee[me]})}var k=/\/+/g;function U(M,ee){return typeof M=="object"&&M!==null&&M.key!=null?O(""+M.key):ee.toString(36)}function C(){}function Ve(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(C,C):(M.status="pending",M.then(function(ee){M.status==="pending"&&(M.status="fulfilled",M.value=ee)},function(ee){M.status==="pending"&&(M.status="rejected",M.reason=ee)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function Ye(M,ee,me,fe,Ee){var He=typeof M;(He==="undefined"||He==="boolean")&&(M=null);var Ne=!1;if(M===null)Ne=!0;else switch(He){case"bigint":case"string":case"number":Ne=!0;break;case"object":switch(M.$$typeof){case r:case e:Ne=!0;break;case v:return Ne=M._init,Ye(Ne(M._payload),ee,me,fe,Ee)}}if(Ne)return Ee=Ee(M),Ne=fe===""?"."+U(M,0):fe,Re(Ee)?(me="",Ne!=null&&(me=Ne.replace(k,"$&/")+"/"),Ye(Ee,ee,me,"",function(Gn){return Gn})):Ee!=null&&(R(Ee)&&(Ee=w(Ee,me+(Ee.key==null||M&&M.key===Ee.key?"":(""+Ee.key).replace(k,"$&/")+"/")+Ne)),ee.push(Ee)),1;Ne=0;var $t=fe===""?".":fe+":";if(Re(M))for(var ot=0;ot<M.length;ot++)fe=M[ot],He=$t+U(fe,ot),Ne+=Ye(fe,ee,me,He,Ee);else if(ot=S(M),typeof ot=="function")for(M=ot.call(M),ot=0;!(fe=M.next()).done;)fe=fe.value,He=$t+U(fe,ot++),Ne+=Ye(fe,ee,me,He,Ee);else if(He==="object"){if(typeof M.then=="function")return Ye(Ve(M),ee,me,fe,Ee);throw ee=String(M),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.")}return Ne}function Y(M,ee,me){if(M==null)return M;var fe=[],Ee=0;return Ye(M,fe,"","",function(He){return ee.call(me,He,Ee++)}),fe}function he(M){if(M._status===-1){var ee=M._result;ee=ee(),ee.then(function(me){(M._status===0||M._status===-1)&&(M._status=1,M._result=me)},function(me){(M._status===0||M._status===-1)&&(M._status=2,M._result=me)}),M._status===-1&&(M._status=0,M._result=ee)}if(M._status===1)return M._result.default;throw M._result}var ge=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ee=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(ee))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)};function Ue(){}return Fe.Children={map:Y,forEach:function(M,ee,me){Y(M,function(){ee.apply(this,arguments)},me)},count:function(M){var ee=0;return Y(M,function(){ee++}),ee},toArray:function(M){return Y(M,function(ee){return ee})||[]},only:function(M){if(!R(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Fe.Component=Q,Fe.Fragment=n,Fe.Profiler=o,Fe.PureComponent=oe,Fe.StrictMode=a,Fe.Suspense=p,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=le,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(M){return le.H.useMemoCache(M)}},Fe.cache=function(M){return function(){return M.apply(null,arguments)}},Fe.cloneElement=function(M,ee,me){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var fe=B({},M.props),Ee=M.key,He=void 0;if(ee!=null)for(Ne in ee.ref!==void 0&&(He=void 0),ee.key!==void 0&&(Ee=""+ee.key),ee)!V.call(ee,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&ee.ref===void 0||(fe[Ne]=ee[Ne]);var Ne=arguments.length-2;if(Ne===1)fe.children=me;else if(1<Ne){for(var $t=Array(Ne),ot=0;ot<Ne;ot++)$t[ot]=arguments[ot+2];fe.children=$t}return x(M.type,Ee,void 0,void 0,He,fe)},Fe.createContext=function(M){return M={$$typeof:h,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:u,_context:M},M},Fe.createElement=function(M,ee,me){var fe,Ee={},He=null;if(ee!=null)for(fe in ee.key!==void 0&&(He=""+ee.key),ee)V.call(ee,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Ee[fe]=ee[fe]);var Ne=arguments.length-2;if(Ne===1)Ee.children=me;else if(1<Ne){for(var $t=Array(Ne),ot=0;ot<Ne;ot++)$t[ot]=arguments[ot+2];Ee.children=$t}if(M&&M.defaultProps)for(fe in Ne=M.defaultProps,Ne)Ee[fe]===void 0&&(Ee[fe]=Ne[fe]);return x(M,He,void 0,void 0,null,Ee)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(M){return{$$typeof:m,render:M}},Fe.isValidElement=R,Fe.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:he}},Fe.memo=function(M,ee){return{$$typeof:g,type:M,compare:ee===void 0?null:ee}},Fe.startTransition=function(M){var ee=le.T,me={};le.T=me;try{var fe=M(),Ee=le.S;Ee!==null&&Ee(me,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(Ue,ge)}catch(He){ge(He)}finally{le.T=ee}},Fe.unstable_useCacheRefresh=function(){return le.H.useCacheRefresh()},Fe.use=function(M){return le.H.use(M)},Fe.useActionState=function(M,ee,me){return le.H.useActionState(M,ee,me)},Fe.useCallback=function(M,ee){return le.H.useCallback(M,ee)},Fe.useContext=function(M){return le.H.useContext(M)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(M,ee){return le.H.useDeferredValue(M,ee)},Fe.useEffect=function(M,ee,me){var fe=le.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return fe.useEffect(M,ee)},Fe.useId=function(){return le.H.useId()},Fe.useImperativeHandle=function(M,ee,me){return le.H.useImperativeHandle(M,ee,me)},Fe.useInsertionEffect=function(M,ee){return le.H.useInsertionEffect(M,ee)},Fe.useLayoutEffect=function(M,ee){return le.H.useLayoutEffect(M,ee)},Fe.useMemo=function(M,ee){return le.H.useMemo(M,ee)},Fe.useOptimistic=function(M,ee){return le.H.useOptimistic(M,ee)},Fe.useReducer=function(M,ee,me){return le.H.useReducer(M,ee,me)},Fe.useRef=function(M){return le.H.useRef(M)},Fe.useState=function(M){return le.H.useState(M)},Fe.useSyncExternalStore=function(M,ee,me){return le.H.useSyncExternalStore(M,ee,me)},Fe.useTransition=function(){return le.H.useTransition()},Fe.version="19.1.1",Fe}var M_;function pp(){return M_||(M_=1,mm.exports=pA()),mm.exports}var H=pp(),pm={exports:{}},eu={},gm={exports:{}},ym={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var P_;function gA(){return P_||(P_=1,(function(r){function e(Y,he){var ge=Y.length;Y.push(he);e:for(;0<ge;){var Ue=ge-1>>>1,M=Y[Ue];if(0<o(M,he))Y[Ue]=he,Y[ge]=M,ge=Ue;else break e}}function n(Y){return Y.length===0?null:Y[0]}function a(Y){if(Y.length===0)return null;var he=Y[0],ge=Y.pop();if(ge!==he){Y[0]=ge;e:for(var Ue=0,M=Y.length,ee=M>>>1;Ue<ee;){var me=2*(Ue+1)-1,fe=Y[me],Ee=me+1,He=Y[Ee];if(0>o(fe,ge))Ee<M&&0>o(He,fe)?(Y[Ue]=He,Y[Ee]=ge,Ue=Ee):(Y[Ue]=fe,Y[me]=ge,Ue=me);else if(Ee<M&&0>o(He,ge))Y[Ue]=He,Y[Ee]=ge,Ue=Ee;else break e}}return he}function o(Y,he){var ge=Y.sortIndex-he.sortIndex;return ge!==0?ge:Y.id-he.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();r.unstable_now=function(){return h.now()-m}}var p=[],g=[],v=1,T=null,S=3,N=!1,B=!1,J=!1,Q=!1,ne=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;function Re(Y){for(var he=n(g);he!==null;){if(he.callback===null)a(g);else if(he.startTime<=Y)a(g),he.sortIndex=he.expirationTime,e(p,he);else break;he=n(g)}}function le(Y){if(J=!1,Re(Y),!B)if(n(p)!==null)B=!0,V||(V=!0,U());else{var he=n(g);he!==null&&Ye(le,he.startTime-Y)}}var V=!1,x=-1,w=5,R=-1;function O(){return Q?!0:!(r.unstable_now()-R<w)}function k(){if(Q=!1,V){var Y=r.unstable_now();R=Y;var he=!0;try{e:{B=!1,J&&(J=!1,oe(x),x=-1),N=!0;var ge=S;try{t:{for(Re(Y),T=n(p);T!==null&&!(T.expirationTime>Y&&O());){var Ue=T.callback;if(typeof Ue=="function"){T.callback=null,S=T.priorityLevel;var M=Ue(T.expirationTime<=Y);if(Y=r.unstable_now(),typeof M=="function"){T.callback=M,Re(Y),he=!0;break t}T===n(p)&&a(p),Re(Y)}else a(p);T=n(p)}if(T!==null)he=!0;else{var ee=n(g);ee!==null&&Ye(le,ee.startTime-Y),he=!1}}break e}finally{T=null,S=ge,N=!1}he=void 0}}finally{he?U():V=!1}}}var U;if(typeof ue=="function")U=function(){ue(k)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ve=C.port2;C.port1.onmessage=k,U=function(){Ve.postMessage(null)}}else U=function(){ne(k,0)};function Ye(Y,he){x=ne(function(){Y(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Y){Y.callback=null},r.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<Y?Math.floor(1e3/Y):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(Y){switch(S){case 1:case 2:case 3:var he=3;break;default:he=S}var ge=S;S=he;try{return Y()}finally{S=ge}},r.unstable_requestPaint=function(){Q=!0},r.unstable_runWithPriority=function(Y,he){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ge=S;S=Y;try{return he()}finally{S=ge}},r.unstable_scheduleCallback=function(Y,he,ge){var Ue=r.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?Ue+ge:Ue):ge=Ue,Y){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=ge+M,Y={id:v++,callback:he,priorityLevel:Y,startTime:ge,expirationTime:M,sortIndex:-1},ge>Ue?(Y.sortIndex=ge,e(g,Y),n(p)===null&&Y===n(g)&&(J?(oe(x),x=-1):J=!0,Ye(le,ge-Ue))):(Y.sortIndex=M,e(p,Y),B||N||(B=!0,V||(V=!0,U()))),Y},r.unstable_shouldYield=O,r.unstable_wrapCallback=function(Y){var he=S;return function(){var ge=S;S=he;try{return Y.apply(this,arguments)}finally{S=ge}}}})(ym)),ym}var k_;function yA(){return k_||(k_=1,gm.exports=gA()),gm.exports}var vm={exports:{}},bn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V_;function vA(){if(V_)return bn;V_=1;var r=pp();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)g+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(p,g,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:p,containerInfo:g,implementation:v}}var h=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return bn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,bn.createPortal=function(p,g){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(p,g,null,v)},bn.flushSync=function(p){var g=h.T,v=a.p;try{if(h.T=null,a.p=2,p)return p()}finally{h.T=g,a.p=v,a.d.f()}},bn.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,a.d.C(p,g))},bn.prefetchDNS=function(p){typeof p=="string"&&a.d.D(p)},bn.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin),S=typeof g.integrity=="string"?g.integrity:void 0,N=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;v==="style"?a.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:N}):v==="script"&&a.d.X(p,{crossOrigin:T,integrity:S,fetchPriority:N,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},bn.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var v=m(g.as,g.crossOrigin);a.d.M(p,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&a.d.M(p)},bn.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var v=g.as,T=m(v,g.crossOrigin);a.d.L(p,v,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},bn.preloadModule=function(p,g){if(typeof p=="string")if(g){var v=m(g.as,g.crossOrigin);a.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else a.d.m(p)},bn.requestFormReset=function(p){a.d.r(p)},bn.unstable_batchedUpdates=function(p,g){return p(g)},bn.useFormState=function(p,g,v){return h.H.useFormState(p,g,v)},bn.useFormStatus=function(){return h.H.useHostTransitionStatus()},bn.version="19.1.1",bn}var L_;function zE(){if(L_)return vm.exports;L_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vm.exports=vA(),vm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function _A(){if(U_)return eu;U_=1;var r=yA(),e=pp(),n=zE();function a(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,s=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(s=i.return),t=i.return;while(t)}return i.tag===3?s:null}function h(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(a(188))}function p(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(a(188));return i!==t?null:t}for(var s=t,l=i;;){var f=s.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){s=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===s)return m(f),t;if(d===l)return m(f),i;d=d.sibling}throw Error(a(188))}if(s.return!==l.return)s=f,l=d;else{for(var E=!1,b=f.child;b;){if(b===s){E=!0,s=f,l=d;break}if(b===l){E=!0,l=f,s=d;break}b=b.sibling}if(!E){for(b=d.child;b;){if(b===s){E=!0,s=d,l=f;break}if(b===l){E=!0,l=d,s=f;break}b=b.sibling}if(!E)throw Error(a(189))}}if(s.alternate!==l)throw Error(a(190))}if(s.tag!==3)throw Error(a(188));return s.stateNode.current===s?t:i}function g(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=g(t),i!==null)return i;t=t.sibling}return null}var v=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),ue=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),le=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),k=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=k&&t[k]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Ve(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case Q:return"Profiler";case J:return"StrictMode";case le:return"Suspense";case V:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case ue:return(t.displayName||"Context")+".Provider";case oe:return(t._context.displayName||"Context")+".Consumer";case Re:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x:return i=t.displayName||null,i!==null?i:Ve(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return Ve(t(i))}catch{}}return null}var Ye=Array.isArray,Y=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ge={pending:!1,data:null,method:null,action:null},Ue=[],M=-1;function ee(t){return{current:t}}function me(t){0>M||(t.current=Ue[M],Ue[M]=null,M--)}function fe(t,i){M++,Ue[M]=t.current,t.current=i}var Ee=ee(null),He=ee(null),Ne=ee(null),$t=ee(null);function ot(t,i){switch(fe(Ne,i),fe(He,t),fe(Ee,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?i_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=i_(i),t=a_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(Ee),fe(Ee,t)}function Gn(){me(Ee),me(He),me(Ne)}function Ot(t){t.memoizedState!==null&&fe($t,t);var i=Ee.current,s=a_(i,t.type);i!==s&&(fe(He,t),fe(Ee,s))}function Kn(t){He.current===t&&(me(Ee),me(He)),$t.current===t&&(me($t),$l._currentValue=ge)}var li=Object.prototype.hasOwnProperty,ui=r.unstable_scheduleCallback,Mn=r.unstable_cancelCallback,Jo=r.unstable_shouldYield,za=r.unstable_requestPaint,ln=r.unstable_now,Vs=r.unstable_getCurrentPriorityLevel,kt=r.unstable_ImmediatePriority,Bt=r.unstable_UserBlockingPriority,Tr=r.unstable_NormalPriority,br=r.unstable_LowPriority,wr=r.unstable_IdlePriority,Ls=r.log,Sr=r.unstable_setDisableYieldValue,Zt=null,_t=null;function xn(t){if(typeof Ls=="function"&&Sr(t),_t&&typeof _t.setStrictMode=="function")try{_t.setStrictMode(Zt,t)}catch{}}var un=Math.clz32?Math.clz32:Pn,Ba=Math.log,Us=Math.LN2;function Pn(t){return t>>>=0,t===0?32:31-(Ba(t)/Us|0)|0}var Yn=256,Ar=4194304;function kn(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Vn(t,i,s){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,E=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?f=kn(l):(E&=b,E!==0?f=kn(E):s||(s=b&~t,s!==0&&(f=kn(s))))):(b=l&~d,b!==0?f=kn(b):E!==0?f=kn(E):s||(s=l&~t,s!==0&&(f=kn(s)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,s=i&-i,d>=s||d===32&&(s&4194048)!==0)?i:f}function Rr(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function xr(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ji(){var t=Yn;return Yn<<=1,(Yn&4194048)===0&&(Yn=256),t}function ar(){var t=Ar;return Ar<<=1,(Ar&62914560)===0&&(Ar=4194304),t}function zi(t){for(var i=[],s=0;31>s;s++)i.push(t);return i}function xt(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function js(t,i,s,l,f,d){var E=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var b=t.entanglements,D=t.expirationTimes,G=t.hiddenUpdates;for(s=E&~s;0<s;){var Z=31-un(s),ie=1<<Z;b[Z]=0,D[Z]=-1;var $=G[Z];if($!==null)for(G[Z]=null,Z=0;Z<$.length;Z++){var X=$[Z];X!==null&&(X.lane&=-536870913)}s&=~ie}l!==0&&Ir(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(E&~i))}function Ir(t,i,s){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-un(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|s&4194090}function $n(t,i){var s=t.entangledLanes|=i;for(t=t.entanglements;s;){var l=31-un(s),f=1<<l;f&i|t[l]&i&&(t[l]|=i),s&=~f}}function Hr(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ha(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Cr(){var t=he.p;return t!==0?t:(t=window.event,t===void 0?32:S_(t.type))}function P(t,i){var s=he.p;try{return he.p=t,i()}finally{he.p=s}}var z=Math.random().toString(36).slice(2),K="__reactFiber$"+z,se="__reactProps$"+z,ce="__reactContainer$"+z,Te="__reactEvents$"+z,we="__reactListeners$"+z,Se="__reactHandles$"+z,_e="__reactResources$"+z,xe="__reactMarker$"+z;function Ae(t){delete t[K],delete t[se],delete t[Te],delete t[we],delete t[Se]}function ve(t){var i=t[K];if(i)return i;for(var s=t.parentNode;s;){if(i=s[ce]||s[K]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(t=u_(t);t!==null;){if(s=t[K])return s;t=u_(t)}return i}t=s,s=t.parentNode}return null}function je(t){if(t=t[K]||t[ce]){var i=t.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return t}return null}function rt(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(a(33))}function yt(t){var i=t[_e];return i||(i=t[_e]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function $e(t){t[xe]=!0}var ft=new Set,it={};function en(t,i){yn(t,i),yn(t+"Capture",i)}function yn(t,i){for(it[t]=i,t=0;t<i.length;t++)ft.add(i[t])}var vn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Vt={},qr={};function ci(t){return li.call(qr,t)?!0:li.call(Vt,t)?!1:vn.test(t)?qr[t]=!0:(Vt[t]=!0,!1)}function In(t,i,s){if(ci(i))if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+s)}}function sr(t,i,s){if(s===null)t.removeAttribute(i);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+s)}}function cn(t,i,s,l){if(l===null)t.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(i,s,""+l)}}var qe,Ct;function _n(t){if(qe===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);qe=i&&i[1]||"",Ct=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qe+t+Ct}var Ln=!1;function Et(t,i){if(!t||Ln)return"";Ln=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(X){var $=X}Reflect.construct(t,[],ie)}else{try{ie.call()}catch(X){$=X}t.call(ie.prototype)}}else{try{throw Error()}catch(X){$=X}(ie=t())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(X){if(X&&$&&typeof X.stack=="string")return[X.stack,$.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),E=d[0],b=d[1];if(E&&b){var D=E.split(`
`),G=b.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<G.length&&!G[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===G.length)for(l=D.length-1,f=G.length-1;1<=l&&0<=f&&D[l]!==G[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==G[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==G[f]){var Z=`
`+D[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=f);break}}}finally{Ln=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?_n(s):""}function Bi(t){switch(t.tag){case 26:case 27:case 5:return _n(t.type);case 16:return _n("Lazy");case 13:return _n("Suspense");case 19:return _n("SuspenseList");case 0:case 15:return Et(t.type,!1);case 11:return Et(t.type.render,!1);case 1:return Et(t.type,!0);case 31:return _n("Activity");default:return""}}function Un(t){try{var i="";do i+=Bi(t),t=t.return;while(t);return i}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}function St(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Hi(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function qa(t){var i=Hi(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),l=""+t[i];if(!t.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,d=s.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return f.call(this)},set:function(E){l=""+E,d.call(this,E)}}),Object.defineProperty(t,i,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(E){l=""+E},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function qi(t){t._valueTracker||(t._valueTracker=qa(t))}function dt(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var s=i.getValue(),l="";return t&&(l=Hi(t)?t.checked?"true":"false":t.value),t=l,t!==s?(i.setValue(t),!0):!1}function hi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Fa=/[\n"\\]/g;function tn(t){return t.replace(Fa,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Zo(t,i,s,l,f,d,E,b){t.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?t.type=E:t.removeAttribute("type"),i!=null?E==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+St(i)):t.value!==""+St(i)&&(t.value=""+St(i)):E!=="submit"&&E!=="reset"||t.removeAttribute("value"),i!=null?tl(t,E,St(i)):s!=null?tl(t,E,St(s)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+St(b):t.removeAttribute("name")}function el(t,i,s,l,f,d,E,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||i!=null))return;s=s!=null?""+St(s):"",i=i!=null?""+St(i):s,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(t.name=E)}function tl(t,i,s){i==="number"&&hi(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Fi(t,i,s,l){if(t=t.options,i){i={};for(var f=0;f<s.length;f++)i["$"+s[f]]=!0;for(s=0;s<t.length;s++)f=i.hasOwnProperty("$"+t[s].value),t[s].selected!==f&&(t[s].selected=f),f&&l&&(t[s].defaultSelected=!0)}else{for(s=""+St(s),i=null,f=0;f<t.length;f++){if(t[f].value===s){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}i!==null||t[f].disabled||(i=t[f])}i!==null&&(i.selected=!0)}}function Ku(t,i,s){if(i!=null&&(i=""+St(i),i!==t.value&&(t.value=i),s==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=s!=null?""+St(s):""}function Yu(t,i,s,l){if(i==null){if(l!=null){if(s!=null)throw Error(a(92));if(Ye(l)){if(1<l.length)throw Error(a(93));l=l[0]}s=l}s==null&&(s=""),i=s}s=St(i),t.defaultValue=s,l=t.textContent,l===s&&l!==""&&l!==null&&(t.value=l)}function or(t,i){if(i){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=i;return}}t.textContent=i}var fi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function nl(t,i,s){var l=i.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,s):typeof s!="number"||s===0||fi.has(i)?i==="float"?t.cssFloat=s:t[i]=(""+s).trim():t[i]=s+"px"}function rl(t,i,s){if(i!=null&&typeof i!="object")throw Error(a(62));if(t=t.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&s[f]!==l&&nl(t,f,l)}else for(var d in i)i.hasOwnProperty(d)&&nl(t,d,i[d])}function zs(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nr(t){return Qu.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var il=null;function al(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gi=null,Cn=null;function Xu(t){var i=je(t);if(i&&(t=i.stateNode)){var s=t[se]||null;e:switch(t=i.stateNode,i.type){case"input":if(Zo(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),i=s.name,s.type==="radio"&&i!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+tn(""+i)+'"][type="radio"]'),i=0;i<s.length;i++){var l=s[i];if(l!==t&&l.form===t.form){var f=l[se]||null;if(!f)throw Error(a(90));Zo(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<s.length;i++)l=s[i],l.form===t.form&&dt(l)}break e;case"textarea":Ku(t,s.value,s.defaultValue);break e;case"select":i=s.value,i!=null&&Fi(t,!!s.multiple,i,!1)}}}var Ga=!1;function Ka(t,i,s){if(Ga)return t(i,s);Ga=!0;try{var l=t(i);return l}finally{if(Ga=!1,(Gi!==null||Cn!==null)&&(jc(),Gi&&(i=Gi,t=Cn,Cn=Gi=null,Xu(i),t)))for(i=0;i<t.length;i++)Xu(t[i])}}function Ki(t,i){var s=t.stateNode;if(s===null)return null;var l=s[se]||null;if(l===null)return null;s=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(a(231,i,typeof s));return s}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),di=!1;if(Nn)try{var Yi={};Object.defineProperty(Yi,"passive",{get:function(){di=!0}}),window.addEventListener("test",Yi,Yi),window.removeEventListener("test",Yi,Yi)}catch{di=!1}var lr=null,Tt=null,Bs=null;function Wu(){if(Bs)return Bs;var t,i=Tt,s=i.length,l,f="value"in lr?lr.value:lr.textContent,d=f.length;for(t=0;t<s&&i[t]===f[t];t++);var E=s-t;for(l=1;l<=E&&i[s-l]===f[d-l];l++);return Bs=f.slice(t,1<l?1-l:void 0)}function Ya(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function sl(){return!1}function Qt(t){function i(s,l,f,d,E){this._reactName=s,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=E,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(s=t[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?$a:sl,this.isPropagationStopped=sl,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),i}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qa=Qt(En),Xa=v({},En,{view:0,detail:0}),Wa=Qt(Xa),Hs,Ja,Fr,Za=v({},Xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gs,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fr&&(Fr&&t.type==="mousemove"?(Hs=t.screenX-Fr.screenX,Ja=t.screenY-Fr.screenY):Ja=Hs=0,Fr=t),Hs)},movementY:function(t){return"movementY"in t?t.movementY:Ja}}),es=Qt(Za),bf=v({},Za,{dataTransfer:0}),Ju=Qt(bf),ts=v({},Xa,{relatedTarget:0}),qs=Qt(ts),Zu=v({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),ol=Qt(Zu),ll=v({},En,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ec=Qt(ll),Fs=v({},En,{data:0}),ul=Qt(Fs),tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mi={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=nc[t])?!!i[t]:!1}function Gs(){return rc}var ic=v({},Xa,{key:function(t){if(t.key){var i=tc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ya(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?mi[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gs,charCode:function(t){return t.type==="keypress"?Ya(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ya(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ks=Qt(ic),Dn=v({},Za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cl=Qt(Dn),ac=v({},Xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gs}),$i=Qt(ac),c=v({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Qt(c),_=v({},Za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Qt(_),F=v({},En,{newState:0,oldState:0}),W=Qt(F),de=[9,13,27,32],ze=Nn&&"CompositionEvent"in window,At=null;Nn&&"documentMode"in document&&(At=document.documentMode);var ut=Nn&&"TextEvent"in window&&!At,Lt=Nn&&(!ze||At&&8<At&&11>=At),Qn=" ",Gr=!1;function Dr(t,i){switch(t){case"keyup":return de.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Or(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mr=!1;function hl(t,i){switch(t){case"compositionend":return Or(i);case"keypress":return i.which!==32?null:(Gr=!0,Qn);case"textInput":return t=i.data,t===Qn&&Gr?null:t;default:return null}}function zw(t,i){if(Mr)return t==="compositionend"||!ze&&Dr(t,i)?(t=Wu(),Bs=Tt=lr=null,Mr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Lt&&i.locale!=="ko"?null:i.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!Bw[t.type]:i==="textarea"}function _g(t,i,s,l){Gi?Cn?Cn.push(l):Cn=[l]:Gi=l,i=Gc(i,"onChange"),0<i.length&&(s=new Qa("onChange","change",null,s,l),t.push({event:s,listeners:i}))}var fl=null,dl=null;function Hw(t){Zv(t,0)}function sc(t){var i=rt(t);if(dt(i))return t}function Eg(t,i){if(t==="change")return i}var Tg=!1;if(Nn){var wf;if(Nn){var Sf="oninput"in document;if(!Sf){var bg=document.createElement("div");bg.setAttribute("oninput","return;"),Sf=typeof bg.oninput=="function"}wf=Sf}else wf=!1;Tg=wf&&(!document.documentMode||9<document.documentMode)}function wg(){fl&&(fl.detachEvent("onpropertychange",Sg),dl=fl=null)}function Sg(t){if(t.propertyName==="value"&&sc(dl)){var i=[];_g(i,dl,t,al(t)),Ka(Hw,i)}}function qw(t,i,s){t==="focusin"?(wg(),fl=i,dl=s,fl.attachEvent("onpropertychange",Sg)):t==="focusout"&&wg()}function Fw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(dl)}function Gw(t,i){if(t==="click")return sc(i)}function Kw(t,i){if(t==="input"||t==="change")return sc(i)}function Yw(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Xn=typeof Object.is=="function"?Object.is:Yw;function ml(t,i){if(Xn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var s=Object.keys(t),l=Object.keys(i);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var f=s[l];if(!li.call(i,f)||!Xn(t[f],i[f]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rg(t,i){var s=Ag(t);t=0;for(var l;s;){if(s.nodeType===3){if(l=t+s.textContent.length,t<=i&&l>=i)return{node:s,offset:i-t};t=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Ag(s)}}function xg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ig(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=hi(t.document);i instanceof t.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)t=i.contentWindow;else break;i=hi(t.document)}return i}function Af(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var $w=Nn&&"documentMode"in document&&11>=document.documentMode,Ys=null,Rf=null,pl=null,xf=!1;function Cg(t,i,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;xf||Ys==null||Ys!==hi(l)||(l=Ys,"selectionStart"in l&&Af(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),pl&&ml(pl,l)||(pl=l,l=Gc(Rf,"onSelect"),0<l.length&&(i=new Qa("onSelect","select",null,i,s),t.push({event:i,listeners:l}),i.target=Ys)))}function ns(t,i){var s={};return s[t.toLowerCase()]=i.toLowerCase(),s["Webkit"+t]="webkit"+i,s["Moz"+t]="moz"+i,s}var $s={animationend:ns("Animation","AnimationEnd"),animationiteration:ns("Animation","AnimationIteration"),animationstart:ns("Animation","AnimationStart"),transitionrun:ns("Transition","TransitionRun"),transitionstart:ns("Transition","TransitionStart"),transitioncancel:ns("Transition","TransitionCancel"),transitionend:ns("Transition","TransitionEnd")},If={},Ng={};Nn&&(Ng=document.createElement("div").style,"AnimationEvent"in window||(delete $s.animationend.animation,delete $s.animationiteration.animation,delete $s.animationstart.animation),"TransitionEvent"in window||delete $s.transitionend.transition);function rs(t){if(If[t])return If[t];if(!$s[t])return t;var i=$s[t],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ng)return If[t]=i[s];return t}var Dg=rs("animationend"),Og=rs("animationiteration"),Mg=rs("animationstart"),Qw=rs("transitionrun"),Xw=rs("transitionstart"),Ww=rs("transitioncancel"),Pg=rs("transitionend"),kg=new Map,Cf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cf.push("scrollEnd");function Pr(t,i){kg.set(t,i),en(i,[t])}var Vg=new WeakMap;function ur(t,i){if(typeof t=="object"&&t!==null){var s=Vg.get(t);return s!==void 0?s:(i={value:t,source:i,stack:Un(i)},Vg.set(t,i),i)}return{value:t,source:i,stack:Un(i)}}var cr=[],Qs=0,Nf=0;function oc(){for(var t=Qs,i=Nf=Qs=0;i<t;){var s=cr[i];cr[i++]=null;var l=cr[i];cr[i++]=null;var f=cr[i];cr[i++]=null;var d=cr[i];if(cr[i++]=null,l!==null&&f!==null){var E=l.pending;E===null?f.next=f:(f.next=E.next,E.next=f),l.pending=f}d!==0&&Lg(s,f,d)}}function lc(t,i,s,l){cr[Qs++]=t,cr[Qs++]=i,cr[Qs++]=s,cr[Qs++]=l,Nf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Df(t,i,s,l){return lc(t,i,s,l),uc(t)}function Xs(t,i){return lc(t,null,null,i),uc(t)}function Lg(t,i,s){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s);for(var f=!1,d=t.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&i!==null&&(f=31-un(s),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[i]:l.push(i),i.lane=s|536870912),d):null}function uc(t){if(50<zl)throw zl=0,Ld=null,Error(a(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ws={};function Jw(t,i,s,l){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(t,i,s,l){return new Jw(t,i,s,l)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pi(t,i){var s=t.alternate;return s===null?(s=Wn(t.tag,i,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=i,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,i=t.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Ug(t,i){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,i=s.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function cc(t,i,s,l,f,d){var E=0;if(l=t,typeof t=="function")Of(t)&&(E=1);else if(typeof t=="string")E=eA(t,s,Ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Wn(31,s,i,f),t.elementType=R,t.lanes=d,t;case B:return is(s.children,f,d,i);case J:E=8,f|=24;break;case Q:return t=Wn(12,s,i,f|2),t.elementType=Q,t.lanes=d,t;case le:return t=Wn(13,s,i,f),t.elementType=le,t.lanes=d,t;case V:return t=Wn(19,s,i,f),t.elementType=V,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:case ue:E=10;break e;case oe:E=9;break e;case Re:E=11;break e;case x:E=14;break e;case w:E=16,l=null;break e}E=29,s=Error(a(130,t===null?"null":typeof t,"")),l=null}return i=Wn(E,s,i,f),i.elementType=t,i.type=l,i.lanes=d,i}function is(t,i,s,l){return t=Wn(7,t,l,i),t.lanes=s,t}function Mf(t,i,s){return t=Wn(6,t,null,i),t.lanes=s,t}function Pf(t,i,s){return i=Wn(4,t.children!==null?t.children:[],t.key,i),i.lanes=s,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Js=[],Zs=0,hc=null,fc=0,hr=[],fr=0,as=null,gi=1,yi="";function ss(t,i){Js[Zs++]=fc,Js[Zs++]=hc,hc=t,fc=i}function jg(t,i,s){hr[fr++]=gi,hr[fr++]=yi,hr[fr++]=as,as=t;var l=gi;t=yi;var f=32-un(l)-1;l&=~(1<<f),s+=1;var d=32-un(i)+f;if(30<d){var E=f-f%5;d=(l&(1<<E)-1).toString(32),l>>=E,f-=E,gi=1<<32-un(i)+f|s<<f|l,yi=d+t}else gi=1<<d|s<<f|l,yi=t}function kf(t){t.return!==null&&(ss(t,1),jg(t,1,0))}function Vf(t){for(;t===hc;)hc=Js[--Zs],Js[Zs]=null,fc=Js[--Zs],Js[Zs]=null;for(;t===as;)as=hr[--fr],hr[fr]=null,yi=hr[--fr],hr[fr]=null,gi=hr[--fr],hr[fr]=null}var On=null,Mt=null,st=!1,os=null,Kr=!1,Lf=Error(a(519));function ls(t){var i=Error(a(418,""));throw vl(ur(i,t)),Lf}function zg(t){var i=t.stateNode,s=t.type,l=t.memoizedProps;switch(i[K]=t,i[se]=l,s){case"dialog":Xe("cancel",i),Xe("close",i);break;case"iframe":case"object":case"embed":Xe("load",i);break;case"video":case"audio":for(s=0;s<Hl.length;s++)Xe(Hl[s],i);break;case"source":Xe("error",i);break;case"img":case"image":case"link":Xe("error",i),Xe("load",i);break;case"details":Xe("toggle",i);break;case"input":Xe("invalid",i),el(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),qi(i);break;case"select":Xe("invalid",i);break;case"textarea":Xe("invalid",i),Yu(i,l.value,l.defaultValue,l.children),qi(i)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||i.textContent===""+s||l.suppressHydrationWarning===!0||r_(i.textContent,s)?(l.popover!=null&&(Xe("beforetoggle",i),Xe("toggle",i)),l.onScroll!=null&&Xe("scroll",i),l.onScrollEnd!=null&&Xe("scrollend",i),l.onClick!=null&&(i.onclick=Kc),i=!0):i=!1,i||ls(t)}function Bg(t){for(On=t.return;On;)switch(On.tag){case 5:case 13:Kr=!1;return;case 27:case 3:Kr=!0;return;default:On=On.return}}function gl(t){if(t!==On)return!1;if(!st)return Bg(t),st=!0,!1;var i=t.tag,s;if((s=i!==3&&i!==27)&&((s=i===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||Zd(t.type,t.memoizedProps)),s=!s),s&&Mt&&ls(t),Bg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8)if(s=t.data,s==="/$"){if(i===0){Mt=Vr(t.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++;t=t.nextSibling}Mt=null}}else i===27?(i=Mt,ca(t.type)?(t=rm,rm=null,Mt=t):Mt=i):Mt=On?Vr(t.stateNode.nextSibling):null;return!0}function yl(){Mt=On=null,st=!1}function Hg(){var t=os;return t!==null&&(Bn===null?Bn=t:Bn.push.apply(Bn,t),os=null),t}function vl(t){os===null?os=[t]:os.push(t)}var Uf=ee(null),us=null,vi=null;function Qi(t,i,s){fe(Uf,i._currentValue),i._currentValue=s}function _i(t){t._currentValue=Uf.current,me(Uf)}function jf(t,i,s){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===s)break;t=t.return}}function zf(t,i,s,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var E=f.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=f;for(var D=0;D<i.length;D++)if(b.context===i[D]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),jf(d.return,s,t),l||(E=null);break e}d=b.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(a(341));E.lanes|=s,d=E.alternate,d!==null&&(d.lanes|=s),jf(E,s,t),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===t){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function _l(t,i,s,l){t=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(a(387));if(E=E.memoizedProps,E!==null){var b=f.type;Xn(f.pendingProps.value,E.value)||(t!==null?t.push(b):t=[b])}}else if(f===$t.current){if(E=f.alternate,E===null)throw Error(a(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push($l):t=[$l])}f=f.return}t!==null&&zf(i,t,s,l),i.flags|=262144}function dc(t){for(t=t.firstContext;t!==null;){if(!Xn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function cs(t){us=t,vi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Tn(t){return qg(us,t)}function mc(t,i){return us===null&&cs(t),qg(t,i)}function qg(t,i){var s=i._currentValue;if(i={context:i,memoizedValue:s,next:null},vi===null){if(t===null)throw Error(a(308));vi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else vi=vi.next=i;return s}var Zw=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(s,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(s){return s()})}},eS=r.unstable_scheduleCallback,tS=r.unstable_NormalPriority,Xt={$$typeof:ue,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new Zw,data:new Map,refCount:0}}function El(t){t.refCount--,t.refCount===0&&eS(tS,function(){t.controller.abort()})}var Tl=null,Hf=0,eo=0,to=null;function nS(t,i){if(Tl===null){var s=Tl=[];Hf=0,eo=Fd(),to={status:"pending",value:void 0,then:function(l){s.push(l)}}}return Hf++,i.then(Fg,Fg),i}function Fg(){if(--Hf===0&&Tl!==null){to!==null&&(to.status="fulfilled");var t=Tl;Tl=null,eo=0,to=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function rS(t,i){var s=[],l={status:"pending",value:null,reason:null,then:function(f){s.push(f)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<s.length;f++)(0,s[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<s.length;f++)(0,s[f])(void 0)}),l}var Gg=Y.S;Y.S=function(t,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&nS(t,i),Gg!==null&&Gg(t,i)};var hs=ee(null);function qf(){var t=hs.current;return t!==null?t:bt.pooledCache}function pc(t,i){i===null?fe(hs,hs.current):fe(hs,i.pool)}function Kg(){var t=qf();return t===null?null:{parent:Xt._currentValue,pool:t}}var bl=Error(a(460)),Yg=Error(a(474)),gc=Error(a(542)),Ff={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function yc(){}function Qg(t,i,s){switch(s=t[s],s===void 0?t.push(i):s!==i&&(i.then(yc,yc),i=s),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Wg(t),t;default:if(typeof i.status=="string")i.then(yc,yc);else{if(t=bt,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Wg(t),t}throw wl=i,bl}}var wl=null;function Xg(){if(wl===null)throw Error(a(459));var t=wl;return wl=null,t}function Wg(t){if(t===bl||t===gc)throw Error(a(483))}var Xi=!1;function Gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Wi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ji(t,i,s){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(ct&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=uc(t),Lg(t,null,s),i}return lc(t,l,i,s),uc(t)}function Sl(t,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,$n(t,s)}}function Yf(t,i){var s=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var f=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var E={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?f=d=E:d=d.next=E,s=s.next}while(s!==null);d===null?f=d=i:d=d.next=i}else f=d=i;s={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=i:t.next=i,s.lastBaseUpdate=i}var $f=!1;function Al(){if($f){var t=to;if(t!==null)throw t}}function Rl(t,i,s,l){$f=!1;var f=t.updateQueue;Xi=!1;var d=f.firstBaseUpdate,E=f.lastBaseUpdate,b=f.shared.pending;if(b!==null){f.shared.pending=null;var D=b,G=D.next;D.next=null,E===null?d=G:E.next=G,E=D;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,b=Z.lastBaseUpdate,b!==E&&(b===null?Z.firstBaseUpdate=G:b.next=G,Z.lastBaseUpdate=D))}if(d!==null){var ie=f.baseState;E=0,Z=G=D=null,b=d;do{var $=b.lane&-536870913,X=$!==b.lane;if(X?(tt&$)===$:(l&$)===$){$!==0&&$===eo&&($f=!0),Z!==null&&(Z=Z.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ke=t,De=b;$=i;var gt=s;switch(De.tag){case 1:if(ke=De.payload,typeof ke=="function"){ie=ke.call(gt,ie,$);break e}ie=ke;break e;case 3:ke.flags=ke.flags&-65537|128;case 0:if(ke=De.payload,$=typeof ke=="function"?ke.call(gt,ie,$):ke,$==null)break e;ie=v({},ie,$);break e;case 2:Xi=!0}}$=b.callback,$!==null&&(t.flags|=64,X&&(t.flags|=8192),X=f.callbacks,X===null?f.callbacks=[$]:X.push($))}else X={lane:$,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Z===null?(G=Z=X,D=ie):Z=Z.next=X,E|=$;if(b=b.next,b===null){if(b=f.shared.pending,b===null)break;X=b,b=X.next,X.next=null,f.lastBaseUpdate=X,f.shared.pending=null}}while(!0);Z===null&&(D=ie),f.baseState=D,f.firstBaseUpdate=G,f.lastBaseUpdate=Z,d===null&&(f.shared.lanes=0),sa|=E,t.lanes=E,t.memoizedState=ie}}function Jg(t,i){if(typeof t!="function")throw Error(a(191,t));t.call(i)}function Zg(t,i){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)Jg(s[t],i)}var no=ee(null),vc=ee(0);function ey(t,i){t=Ri,fe(vc,t),fe(no,i),Ri=t|i.baseLanes}function Qf(){fe(vc,Ri),fe(no,no.current)}function Xf(){Ri=vc.current,me(no),me(vc)}var Zi=0,Ge=null,mt=null,Ht=null,_c=!1,ro=!1,fs=!1,Ec=0,xl=0,io=null,iS=0;function Ut(){throw Error(a(321))}function Wf(t,i){if(i===null)return!1;for(var s=0;s<i.length&&s<t.length;s++)if(!Xn(t[s],i[s]))return!1;return!0}function Jf(t,i,s,l,f,d){return Zi=d,Ge=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Y.H=t===null||t.memoizedState===null?Ly:Uy,fs=!1,d=s(l,f),fs=!1,ro&&(d=ny(i,s,l,f)),ty(t),d}function ty(t){Y.H=Rc;var i=mt!==null&&mt.next!==null;if(Zi=0,Ht=mt=Ge=null,_c=!1,xl=0,io=null,i)throw Error(a(300));t===null||nn||(t=t.dependencies,t!==null&&dc(t)&&(nn=!0))}function ny(t,i,s,l){Ge=t;var f=0;do{if(ro&&(io=null),xl=0,ro=!1,25<=f)throw Error(a(301));if(f+=1,Ht=mt=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}Y.H=hS,d=i(s,l)}while(ro);return d}function aS(){var t=Y.H,i=t.useState()[0];return i=typeof i.then=="function"?Il(i):i,t=t.useState()[0],(mt!==null?mt.memoizedState:null)!==t&&(Ge.flags|=1024),i}function Zf(){var t=Ec!==0;return Ec=0,t}function ed(t,i,s){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~s}function td(t){if(_c){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_c=!1}Zi=0,Ht=mt=Ge=null,ro=!1,xl=Ec=0,io=null}function jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?Ge.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function qt(){if(mt===null){var t=Ge.alternate;t=t!==null?t.memoizedState:null}else t=mt.next;var i=Ht===null?Ge.memoizedState:Ht.next;if(i!==null)Ht=i,mt=t;else{if(t===null)throw Ge.alternate===null?Error(a(467)):Error(a(310));mt=t,t={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},Ht===null?Ge.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function nd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Il(t){var i=xl;return xl+=1,io===null&&(io=[]),t=Qg(io,t,i),i=Ge,(Ht===null?i.memoizedState:Ht.next)===null&&(i=i.alternate,Y.H=i===null||i.memoizedState===null?Ly:Uy),t}function Tc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Il(t);if(t.$$typeof===ue)return Tn(t)}throw Error(a(438,String(t)))}function rd(t){var i=null,s=Ge.updateQueue;if(s!==null&&(i=s.memoCache),i==null){var l=Ge.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),s===null&&(s=nd(),Ge.updateQueue=s),s.memoCache=i,s=i.data[i.index],s===void 0)for(s=i.data[i.index]=Array(t),l=0;l<t;l++)s[l]=O;return i.index++,s}function Ei(t,i){return typeof i=="function"?i(t):i}function bc(t){var i=qt();return id(i,mt,t)}function id(t,i,s){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=s;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var E=f.next;f.next=d.next,d.next=E}i.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{i=f.next;var b=E=null,D=null,G=i,Z=!1;do{var ie=G.lane&-536870913;if(ie!==G.lane?(tt&ie)===ie:(Zi&ie)===ie){var $=G.revertLane;if($===0)D!==null&&(D=D.next={lane:0,revertLane:0,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ie===eo&&(Z=!0);else if((Zi&$)===$){G=G.next,$===eo&&(Z=!0);continue}else ie={lane:0,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(b=D=ie,E=d):D=D.next=ie,Ge.lanes|=$,sa|=$;ie=G.action,fs&&s(d,ie),d=G.hasEagerState?G.eagerState:s(d,ie)}else $={lane:ie,revertLane:G.revertLane,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},D===null?(b=D=$,E=d):D=D.next=$,Ge.lanes|=ie,sa|=ie;G=G.next}while(G!==null&&G!==i);if(D===null?E=d:D.next=b,!Xn(d,t.memoizedState)&&(nn=!0,Z&&(s=to,s!==null)))throw s;t.memoizedState=d,t.baseState=E,t.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function ad(t){var i=qt(),s=i.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=t;var l=s.dispatch,f=s.pending,d=i.memoizedState;if(f!==null){s.pending=null;var E=f=f.next;do d=t(d,E.action),E=E.next;while(E!==f);Xn(d,i.memoizedState)||(nn=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),s.lastRenderedState=d}return[d,l]}function ry(t,i,s){var l=Ge,f=qt(),d=st;if(d){if(s===void 0)throw Error(a(407));s=s()}else s=i();var E=!Xn((mt||f).memoizedState,s);E&&(f.memoizedState=s,nn=!0),f=f.queue;var b=sy.bind(null,l,f,t);if(Cl(2048,8,b,[t]),f.getSnapshot!==i||E||Ht!==null&&Ht.memoizedState.tag&1){if(l.flags|=2048,ao(9,wc(),ay.bind(null,l,f,s,i),null),bt===null)throw Error(a(349));d||(Zi&124)!==0||iy(l,i,s)}return s}function iy(t,i,s){t.flags|=16384,t={getSnapshot:i,value:s},i=Ge.updateQueue,i===null?(i=nd(),Ge.updateQueue=i,i.stores=[t]):(s=i.stores,s===null?i.stores=[t]:s.push(t))}function ay(t,i,s,l){i.value=s,i.getSnapshot=l,oy(i)&&ly(t)}function sy(t,i,s){return s(function(){oy(i)&&ly(t)})}function oy(t){var i=t.getSnapshot;t=t.value;try{var s=i();return!Xn(t,s)}catch{return!0}}function ly(t){var i=Xs(t,2);i!==null&&nr(i,t,2)}function sd(t){var i=jn();if(typeof t=="function"){var s=t;if(t=s(),fs){xn(!0);try{s()}finally{xn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:t},i}function uy(t,i,s,l){return t.baseState=s,id(t,mt,typeof l=="function"?l:Ei)}function sS(t,i,s,l,f){if(Ac(t))throw Error(a(485));if(t=i.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){d.listeners.push(E)}};Y.T!==null?s(!0):d.isTransition=!1,l(d),s=i.pending,s===null?(d.next=i.pending=d,cy(i,d)):(d.next=s.next,i.pending=s.next=d)}}function cy(t,i){var s=i.action,l=i.payload,f=t.state;if(i.isTransition){var d=Y.T,E={};Y.T=E;try{var b=s(f,l),D=Y.S;D!==null&&D(E,b),hy(t,i,b)}catch(G){od(t,i,G)}finally{Y.T=d}}else try{d=s(f,l),hy(t,i,d)}catch(G){od(t,i,G)}}function hy(t,i,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){fy(t,i,l)},function(l){return od(t,i,l)}):fy(t,i,s)}function fy(t,i,s){i.status="fulfilled",i.value=s,dy(i),t.state=s,i=t.pending,i!==null&&(s=i.next,s===i?t.pending=null:(s=s.next,i.next=s,cy(t,s)))}function od(t,i,s){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=s,dy(i),i=i.next;while(i!==l)}t.action=null}function dy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function my(t,i){return i}function py(t,i){if(st){var s=bt.formState;if(s!==null){e:{var l=Ge;if(st){if(Mt){t:{for(var f=Mt,d=Kr;f.nodeType!==8;){if(!d){f=null;break t}if(f=Vr(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){Mt=Vr(f.nextSibling),l=f.data==="F!";break e}}ls(l)}l=!1}l&&(i=s[0])}}return s=jn(),s.memoizedState=s.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:my,lastRenderedState:i},s.queue=l,s=Py.bind(null,Ge,l),l.dispatch=s,l=sd(!1),d=fd.bind(null,Ge,!1,l.queue),l=jn(),f={state:i,dispatch:null,action:t,pending:null},l.queue=f,s=sS.bind(null,Ge,f,d,s),f.dispatch=s,l.memoizedState=t,[i,s,!1]}function gy(t){var i=qt();return yy(i,mt,t)}function yy(t,i,s){if(i=id(t,i,my)[0],t=bc(Ei)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Il(i)}catch(E){throw E===bl?gc:E}else l=i;i=qt();var f=i.queue,d=f.dispatch;return s!==i.memoizedState&&(Ge.flags|=2048,ao(9,wc(),oS.bind(null,f,s),null)),[l,d,t]}function oS(t,i){t.action=i}function vy(t){var i=qt(),s=mt;if(s!==null)return yy(i,s,t);qt(),i=i.memoizedState,s=qt();var l=s.queue.dispatch;return s.memoizedState=t,[i,l,!1]}function ao(t,i,s,l){return t={tag:t,create:s,deps:l,inst:i,next:null},i=Ge.updateQueue,i===null&&(i=nd(),Ge.updateQueue=i),s=i.lastEffect,s===null?i.lastEffect=t.next=t:(l=s.next,s.next=t,t.next=l,i.lastEffect=t),t}function wc(){return{destroy:void 0,resource:void 0}}function _y(){return qt().memoizedState}function Sc(t,i,s,l){var f=jn();l=l===void 0?null:l,Ge.flags|=t,f.memoizedState=ao(1|i,wc(),s,l)}function Cl(t,i,s,l){var f=qt();l=l===void 0?null:l;var d=f.memoizedState.inst;mt!==null&&l!==null&&Wf(l,mt.memoizedState.deps)?f.memoizedState=ao(i,d,s,l):(Ge.flags|=t,f.memoizedState=ao(1|i,d,s,l))}function Ey(t,i){Sc(8390656,8,t,i)}function Ty(t,i){Cl(2048,8,t,i)}function by(t,i){return Cl(4,2,t,i)}function wy(t,i){return Cl(4,4,t,i)}function Sy(t,i){if(typeof i=="function"){t=t();var s=i(t);return function(){typeof s=="function"?s():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ay(t,i,s){s=s!=null?s.concat([t]):null,Cl(4,4,Sy.bind(null,i,t),s)}function ld(){}function Ry(t,i){var s=qt();i=i===void 0?null:i;var l=s.memoizedState;return i!==null&&Wf(i,l[1])?l[0]:(s.memoizedState=[t,i],t)}function xy(t,i){var s=qt();i=i===void 0?null:i;var l=s.memoizedState;if(i!==null&&Wf(i,l[1]))return l[0];if(l=t(),fs){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l}function ud(t,i,s){return s===void 0||(Zi&1073741824)!==0?t.memoizedState=i:(t.memoizedState=s,t=Nv(),Ge.lanes|=t,sa|=t,s)}function Iy(t,i,s,l){return Xn(s,i)?s:no.current!==null?(t=ud(t,s,l),Xn(t,i)||(nn=!0),t):(Zi&42)===0?(nn=!0,t.memoizedState=s):(t=Nv(),Ge.lanes|=t,sa|=t,i)}function Cy(t,i,s,l,f){var d=he.p;he.p=d!==0&&8>d?d:8;var E=Y.T,b={};Y.T=b,fd(t,!1,i,s);try{var D=f(),G=Y.S;if(G!==null&&G(b,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var Z=rS(D,l);Nl(t,i,Z,tr(t))}else Nl(t,i,l,tr(t))}catch(ie){Nl(t,i,{then:function(){},status:"rejected",reason:ie},tr())}finally{he.p=d,Y.T=E}}function lS(){}function cd(t,i,s,l){if(t.tag!==5)throw Error(a(476));var f=Ny(t).queue;Cy(t,f,i,ge,s===null?lS:function(){return Dy(t),s(l)})}function Ny(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ge,baseState:ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:ge},next:null};var s={};return i.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:s},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Dy(t){var i=Ny(t).next.queue;Nl(t,i,{},tr())}function hd(){return Tn($l)}function Oy(){return qt().memoizedState}function My(){return qt().memoizedState}function uS(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var s=tr();t=Wi(s);var l=Ji(i,t,s);l!==null&&(nr(l,i,s),Sl(l,i,s)),i={cache:Bf()},t.payload=i;return}i=i.return}}function cS(t,i,s){var l=tr();s={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null},Ac(t)?ky(i,s):(s=Df(t,i,s,l),s!==null&&(nr(s,t,l),Vy(s,i,l)))}function Py(t,i,s){var l=tr();Nl(t,i,s,l)}function Nl(t,i,s,l){var f={lane:l,revertLane:0,action:s,hasEagerState:!1,eagerState:null,next:null};if(Ac(t))ky(i,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var E=i.lastRenderedState,b=d(E,s);if(f.hasEagerState=!0,f.eagerState=b,Xn(b,E))return lc(t,i,f,0),bt===null&&oc(),!1}catch{}finally{}if(s=Df(t,i,f,l),s!==null)return nr(s,t,l),Vy(s,i,l),!0}return!1}function fd(t,i,s,l){if(l={lane:2,revertLane:Fd(),action:l,hasEagerState:!1,eagerState:null,next:null},Ac(t)){if(i)throw Error(a(479))}else i=Df(t,s,l,2),i!==null&&nr(i,t,2)}function Ac(t){var i=t.alternate;return t===Ge||i!==null&&i===Ge}function ky(t,i){ro=_c=!0;var s=t.pending;s===null?i.next=i:(i.next=s.next,s.next=i),t.pending=i}function Vy(t,i,s){if((s&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,s|=l,i.lanes=s,$n(t,s)}}var Rc={readContext:Tn,use:Tc,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},Ly={readContext:Tn,use:Tc,useCallback:function(t,i){return jn().memoizedState=[t,i===void 0?null:i],t},useContext:Tn,useEffect:Ey,useImperativeHandle:function(t,i,s){s=s!=null?s.concat([t]):null,Sc(4194308,4,Sy.bind(null,i,t),s)},useLayoutEffect:function(t,i){return Sc(4194308,4,t,i)},useInsertionEffect:function(t,i){Sc(4,2,t,i)},useMemo:function(t,i){var s=jn();i=i===void 0?null:i;var l=t();if(fs){xn(!0);try{t()}finally{xn(!1)}}return s.memoizedState=[l,i],l},useReducer:function(t,i,s){var l=jn();if(s!==void 0){var f=s(i);if(fs){xn(!0);try{s(i)}finally{xn(!1)}}}else f=i;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=cS.bind(null,Ge,t),[l.memoizedState,t]},useRef:function(t){var i=jn();return t={current:t},i.memoizedState=t},useState:function(t){t=sd(t);var i=t.queue,s=Py.bind(null,Ge,i);return i.dispatch=s,[t.memoizedState,s]},useDebugValue:ld,useDeferredValue:function(t,i){var s=jn();return ud(s,t,i)},useTransition:function(){var t=sd(!1);return t=Cy.bind(null,Ge,t.queue,!0,!1),jn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,s){var l=Ge,f=jn();if(st){if(s===void 0)throw Error(a(407));s=s()}else{if(s=i(),bt===null)throw Error(a(349));(tt&124)!==0||iy(l,i,s)}f.memoizedState=s;var d={value:s,getSnapshot:i};return f.queue=d,Ey(sy.bind(null,l,d,t),[t]),l.flags|=2048,ao(9,wc(),ay.bind(null,l,d,s,i),null),s},useId:function(){var t=jn(),i=bt.identifierPrefix;if(st){var s=yi,l=gi;s=(l&~(1<<32-un(l)-1)).toString(32)+s,i=""+i+"R"+s,s=Ec++,0<s&&(i+="H"+s.toString(32)),i+=""}else s=iS++,i=""+i+"r"+s.toString(32)+"";return t.memoizedState=i},useHostTransitionStatus:hd,useFormState:py,useActionState:py,useOptimistic:function(t){var i=jn();i.memoizedState=i.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=s,i=fd.bind(null,Ge,!0,s),s.dispatch=i,[t,i]},useMemoCache:rd,useCacheRefresh:function(){return jn().memoizedState=uS.bind(null,Ge)}},Uy={readContext:Tn,use:Tc,useCallback:Ry,useContext:Tn,useEffect:Ty,useImperativeHandle:Ay,useInsertionEffect:by,useLayoutEffect:wy,useMemo:xy,useReducer:bc,useRef:_y,useState:function(){return bc(Ei)},useDebugValue:ld,useDeferredValue:function(t,i){var s=qt();return Iy(s,mt.memoizedState,t,i)},useTransition:function(){var t=bc(Ei)[0],i=qt().memoizedState;return[typeof t=="boolean"?t:Il(t),i]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:hd,useFormState:gy,useActionState:gy,useOptimistic:function(t,i){var s=qt();return uy(s,mt,t,i)},useMemoCache:rd,useCacheRefresh:My},hS={readContext:Tn,use:Tc,useCallback:Ry,useContext:Tn,useEffect:Ty,useImperativeHandle:Ay,useInsertionEffect:by,useLayoutEffect:wy,useMemo:xy,useReducer:ad,useRef:_y,useState:function(){return ad(Ei)},useDebugValue:ld,useDeferredValue:function(t,i){var s=qt();return mt===null?ud(s,t,i):Iy(s,mt.memoizedState,t,i)},useTransition:function(){var t=ad(Ei)[0],i=qt().memoizedState;return[typeof t=="boolean"?t:Il(t),i]},useSyncExternalStore:ry,useId:Oy,useHostTransitionStatus:hd,useFormState:vy,useActionState:vy,useOptimistic:function(t,i){var s=qt();return mt!==null?uy(s,mt,t,i):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:rd,useCacheRefresh:My},so=null,Dl=0;function xc(t){var i=Dl;return Dl+=1,so===null&&(so=[]),Qg(so,t,i)}function Ol(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function Ic(t,i){throw i.$$typeof===T?Error(a(525)):(t=Object.prototype.toString.call(i),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function jy(t){var i=t._init;return i(t._payload)}function zy(t){function i(j,L){if(t){var q=j.deletions;q===null?(j.deletions=[L],j.flags|=16):q.push(L)}}function s(j,L){if(!t)return null;for(;L!==null;)i(j,L),L=L.sibling;return null}function l(j){for(var L=new Map;j!==null;)j.key!==null?L.set(j.key,j):L.set(j.index,j),j=j.sibling;return L}function f(j,L){return j=pi(j,L),j.index=0,j.sibling=null,j}function d(j,L,q){return j.index=q,t?(q=j.alternate,q!==null?(q=q.index,q<L?(j.flags|=67108866,L):q):(j.flags|=67108866,L)):(j.flags|=1048576,L)}function E(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function b(j,L,q,te){return L===null||L.tag!==6?(L=Mf(q,j.mode,te),L.return=j,L):(L=f(L,q),L.return=j,L)}function D(j,L,q,te){var be=q.type;return be===B?Z(j,L,q.props.children,te,q.key):L!==null&&(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===w&&jy(be)===L.type)?(L=f(L,q.props),Ol(L,q),L.return=j,L):(L=cc(q.type,q.key,q.props,null,j.mode,te),Ol(L,q),L.return=j,L)}function G(j,L,q,te){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Pf(q,j.mode,te),L.return=j,L):(L=f(L,q.children||[]),L.return=j,L)}function Z(j,L,q,te,be){return L===null||L.tag!==7?(L=is(q,j.mode,te,be),L.return=j,L):(L=f(L,q),L.return=j,L)}function ie(j,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Mf(""+L,j.mode,q),L.return=j,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case S:return q=cc(L.type,L.key,L.props,null,j.mode,q),Ol(q,L),q.return=j,q;case N:return L=Pf(L,j.mode,q),L.return=j,L;case w:var te=L._init;return L=te(L._payload),ie(j,L,q)}if(Ye(L)||U(L))return L=is(L,j.mode,q,null),L.return=j,L;if(typeof L.then=="function")return ie(j,xc(L),q);if(L.$$typeof===ue)return ie(j,mc(j,L),q);Ic(j,L)}return null}function $(j,L,q,te){var be=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return be!==null?null:b(j,L,""+q,te);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S:return q.key===be?D(j,L,q,te):null;case N:return q.key===be?G(j,L,q,te):null;case w:return be=q._init,q=be(q._payload),$(j,L,q,te)}if(Ye(q)||U(q))return be!==null?null:Z(j,L,q,te,null);if(typeof q.then=="function")return $(j,L,xc(q),te);if(q.$$typeof===ue)return $(j,L,mc(j,q),te);Ic(j,q)}return null}function X(j,L,q,te,be){if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return j=j.get(q)||null,b(L,j,""+te,be);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case S:return j=j.get(te.key===null?q:te.key)||null,D(L,j,te,be);case N:return j=j.get(te.key===null?q:te.key)||null,G(L,j,te,be);case w:var Ke=te._init;return te=Ke(te._payload),X(j,L,q,te,be)}if(Ye(te)||U(te))return j=j.get(q)||null,Z(L,j,te,be,null);if(typeof te.then=="function")return X(j,L,q,xc(te),be);if(te.$$typeof===ue)return X(j,L,q,mc(L,te),be);Ic(L,te)}return null}function ke(j,L,q,te){for(var be=null,Ke=null,Ie=L,Oe=L=0,an=null;Ie!==null&&Oe<q.length;Oe++){Ie.index>Oe?(an=Ie,Ie=null):an=Ie.sibling;var at=$(j,Ie,q[Oe],te);if(at===null){Ie===null&&(Ie=an);break}t&&Ie&&at.alternate===null&&i(j,Ie),L=d(at,L,Oe),Ke===null?be=at:Ke.sibling=at,Ke=at,Ie=an}if(Oe===q.length)return s(j,Ie),st&&ss(j,Oe),be;if(Ie===null){for(;Oe<q.length;Oe++)Ie=ie(j,q[Oe],te),Ie!==null&&(L=d(Ie,L,Oe),Ke===null?be=Ie:Ke.sibling=Ie,Ke=Ie);return st&&ss(j,Oe),be}for(Ie=l(Ie);Oe<q.length;Oe++)an=X(Ie,j,Oe,q[Oe],te),an!==null&&(t&&an.alternate!==null&&Ie.delete(an.key===null?Oe:an.key),L=d(an,L,Oe),Ke===null?be=an:Ke.sibling=an,Ke=an);return t&&Ie.forEach(function(pa){return i(j,pa)}),st&&ss(j,Oe),be}function De(j,L,q,te){if(q==null)throw Error(a(151));for(var be=null,Ke=null,Ie=L,Oe=L=0,an=null,at=q.next();Ie!==null&&!at.done;Oe++,at=q.next()){Ie.index>Oe?(an=Ie,Ie=null):an=Ie.sibling;var pa=$(j,Ie,at.value,te);if(pa===null){Ie===null&&(Ie=an);break}t&&Ie&&pa.alternate===null&&i(j,Ie),L=d(pa,L,Oe),Ke===null?be=pa:Ke.sibling=pa,Ke=pa,Ie=an}if(at.done)return s(j,Ie),st&&ss(j,Oe),be;if(Ie===null){for(;!at.done;Oe++,at=q.next())at=ie(j,at.value,te),at!==null&&(L=d(at,L,Oe),Ke===null?be=at:Ke.sibling=at,Ke=at);return st&&ss(j,Oe),be}for(Ie=l(Ie);!at.done;Oe++,at=q.next())at=X(Ie,j,Oe,at.value,te),at!==null&&(t&&at.alternate!==null&&Ie.delete(at.key===null?Oe:at.key),L=d(at,L,Oe),Ke===null?be=at:Ke.sibling=at,Ke=at);return t&&Ie.forEach(function(fA){return i(j,fA)}),st&&ss(j,Oe),be}function gt(j,L,q,te){if(typeof q=="object"&&q!==null&&q.type===B&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case S:e:{for(var be=q.key;L!==null;){if(L.key===be){if(be=q.type,be===B){if(L.tag===7){s(j,L.sibling),te=f(L,q.props.children),te.return=j,j=te;break e}}else if(L.elementType===be||typeof be=="object"&&be!==null&&be.$$typeof===w&&jy(be)===L.type){s(j,L.sibling),te=f(L,q.props),Ol(te,q),te.return=j,j=te;break e}s(j,L);break}else i(j,L);L=L.sibling}q.type===B?(te=is(q.props.children,j.mode,te,q.key),te.return=j,j=te):(te=cc(q.type,q.key,q.props,null,j.mode,te),Ol(te,q),te.return=j,j=te)}return E(j);case N:e:{for(be=q.key;L!==null;){if(L.key===be)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){s(j,L.sibling),te=f(L,q.children||[]),te.return=j,j=te;break e}else{s(j,L);break}else i(j,L);L=L.sibling}te=Pf(q,j.mode,te),te.return=j,j=te}return E(j);case w:return be=q._init,q=be(q._payload),gt(j,L,q,te)}if(Ye(q))return ke(j,L,q,te);if(U(q)){if(be=U(q),typeof be!="function")throw Error(a(150));return q=be.call(q),De(j,L,q,te)}if(typeof q.then=="function")return gt(j,L,xc(q),te);if(q.$$typeof===ue)return gt(j,L,mc(j,q),te);Ic(j,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(s(j,L.sibling),te=f(L,q),te.return=j,j=te):(s(j,L),te=Mf(q,j.mode,te),te.return=j,j=te),E(j)):s(j,L)}return function(j,L,q,te){try{Dl=0;var be=gt(j,L,q,te);return so=null,be}catch(Ie){if(Ie===bl||Ie===gc)throw Ie;var Ke=Wn(29,Ie,null,j.mode);return Ke.lanes=te,Ke.return=j,Ke}finally{}}}var oo=zy(!0),By=zy(!1),dr=ee(null),Yr=null;function ea(t){var i=t.alternate;fe(Wt,Wt.current&1),fe(dr,t),Yr===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(Yr=t)}function Hy(t){if(t.tag===22){if(fe(Wt,Wt.current),fe(dr,t),Yr===null){var i=t.alternate;i!==null&&i.memoizedState!==null&&(Yr=t)}}else ta()}function ta(){fe(Wt,Wt.current),fe(dr,dr.current)}function Ti(t){me(dr),Yr===t&&(Yr=null),me(Wt)}var Wt=ee(0);function Cc(t){for(var i=t;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||nm(s)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function dd(t,i,s,l){i=t.memoizedState,s=s(l,i),s=s==null?i:v({},i,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var md={enqueueSetState:function(t,i,s){t=t._reactInternals;var l=tr(),f=Wi(l);f.payload=i,s!=null&&(f.callback=s),i=Ji(t,f,l),i!==null&&(nr(i,t,l),Sl(i,t,l))},enqueueReplaceState:function(t,i,s){t=t._reactInternals;var l=tr(),f=Wi(l);f.tag=1,f.payload=i,s!=null&&(f.callback=s),i=Ji(t,f,l),i!==null&&(nr(i,t,l),Sl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var s=tr(),l=Wi(s);l.tag=2,i!=null&&(l.callback=i),i=Ji(t,l,s),i!==null&&(nr(i,t,s),Sl(i,t,s))}};function qy(t,i,s,l,f,d,E){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,E):i.prototype&&i.prototype.isPureReactComponent?!ml(s,l)||!ml(f,d):!0}function Fy(t,i,s,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,l),i.state!==t&&md.enqueueReplaceState(i,i.state,null)}function ds(t,i){var s=i;if("ref"in i){s={};for(var l in i)l!=="ref"&&(s[l]=i[l])}if(t=t.defaultProps){s===i&&(s=v({},s));for(var f in t)s[f]===void 0&&(s[f]=t[f])}return s}var Nc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function Gy(t){Nc(t)}function Ky(t){console.error(t)}function Yy(t){Nc(t)}function Dc(t,i){try{var s=t.onUncaughtError;s(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function $y(t,i,s){try{var l=t.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function pd(t,i,s){return s=Wi(s),s.tag=3,s.payload={element:null},s.callback=function(){Dc(t,i)},s}function Qy(t){return t=Wi(t),t.tag=3,t}function Xy(t,i,s,l){var f=s.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){$y(i,s,l)}}var E=s.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(t.callback=function(){$y(i,s,l),typeof f!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function fS(t,i,s,l,f){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=s.alternate,i!==null&&_l(i,s,f,!0),s=dr.current,s!==null){switch(s.tag){case 13:return Yr===null?jd():s.alternate===null&&Pt===0&&(Pt=3),s.flags&=-257,s.flags|=65536,s.lanes=f,l===Ff?s.flags|=16384:(i=s.updateQueue,i===null?s.updateQueue=new Set([l]):i.add(l),Bd(t,l,f)),!1;case 22:return s.flags|=65536,l===Ff?s.flags|=16384:(i=s.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=i):(s=i.retryQueue,s===null?i.retryQueue=new Set([l]):s.add(l)),Bd(t,l,f)),!1}throw Error(a(435,s.tag))}return Bd(t,l,f),jd(),!1}if(st)return i=dr.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Lf&&(t=Error(a(422),{cause:l}),vl(ur(t,s)))):(l!==Lf&&(i=Error(a(423),{cause:l}),vl(ur(i,s))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ur(l,s),f=pd(t.stateNode,l,f),Yf(t,f),Pt!==4&&(Pt=2)),!1;var d=Error(a(520),{cause:l});if(d=ur(d,s),jl===null?jl=[d]:jl.push(d),Pt!==4&&(Pt=2),i===null)return!0;l=ur(l,s),s=i;do{switch(s.tag){case 3:return s.flags|=65536,t=f&-f,s.lanes|=t,t=pd(s.stateNode,l,t),Yf(s,t),!1;case 1:if(i=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(oa===null||!oa.has(d))))return s.flags|=65536,f&=-f,s.lanes|=f,f=Qy(f),Xy(f,t,s,l),Yf(s,f),!1}s=s.return}while(s!==null);return!1}var Wy=Error(a(461)),nn=!1;function hn(t,i,s,l){i.child=t===null?By(i,null,s,l):oo(i,t.child,s,l)}function Jy(t,i,s,l,f){s=s.render;var d=i.ref;if("ref"in l){var E={};for(var b in l)b!=="ref"&&(E[b]=l[b])}else E=l;return cs(i),l=Jf(t,i,s,E,d,f),b=Zf(),t!==null&&!nn?(ed(t,i,f),bi(t,i,f)):(st&&b&&kf(i),i.flags|=1,hn(t,i,l,f),i.child)}function Zy(t,i,s,l,f){if(t===null){var d=s.type;return typeof d=="function"&&!Of(d)&&d.defaultProps===void 0&&s.compare===null?(i.tag=15,i.type=d,ev(t,i,d,l,f)):(t=cc(s.type,null,l,i,i.mode,f),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!wd(t,f)){var E=d.memoizedProps;if(s=s.compare,s=s!==null?s:ml,s(E,l)&&t.ref===i.ref)return bi(t,i,f)}return i.flags|=1,t=pi(d,l),t.ref=i.ref,t.return=i,i.child=t}function ev(t,i,s,l,f){if(t!==null){var d=t.memoizedProps;if(ml(d,l)&&t.ref===i.ref)if(nn=!1,i.pendingProps=l=d,wd(t,f))(t.flags&131072)!==0&&(nn=!0);else return i.lanes=t.lanes,bi(t,i,f)}return gd(t,i,s,l,f)}function tv(t,i,s){var l=i.pendingProps,f=l.children,d=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((i.flags&128)!==0){if(l=d!==null?d.baseLanes|s:s,t!==null){for(f=i.child=t.child,d=0;f!==null;)d=d|f.lanes|f.childLanes,f=f.sibling;i.childLanes=d&~l}else i.childLanes=0,i.child=null;return nv(t,i,l,s)}if((s&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(i,d!==null?d.cachePool:null),d!==null?ey(i,d):Qf(),Hy(i);else return i.lanes=i.childLanes=536870912,nv(t,i,d!==null?d.baseLanes|s:s,s)}else d!==null?(pc(i,d.cachePool),ey(i,d),ta(),i.memoizedState=null):(t!==null&&pc(i,null),Qf(),ta());return hn(t,i,f,s),i.child}function nv(t,i,s,l){var f=qf();return f=f===null?null:{parent:Xt._currentValue,pool:f},i.memoizedState={baseLanes:s,cachePool:f},t!==null&&pc(i,null),Qf(),Hy(i),t!==null&&_l(t,i,l,!0),null}function Oc(t,i){var s=i.ref;if(s===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(a(284));(t===null||t.ref!==s)&&(i.flags|=4194816)}}function gd(t,i,s,l,f){return cs(i),s=Jf(t,i,s,l,void 0,f),l=Zf(),t!==null&&!nn?(ed(t,i,f),bi(t,i,f)):(st&&l&&kf(i),i.flags|=1,hn(t,i,s,f),i.child)}function rv(t,i,s,l,f,d){return cs(i),i.updateQueue=null,s=ny(i,l,s,f),ty(t),l=Zf(),t!==null&&!nn?(ed(t,i,d),bi(t,i,d)):(st&&l&&kf(i),i.flags|=1,hn(t,i,s,d),i.child)}function iv(t,i,s,l,f){if(cs(i),i.stateNode===null){var d=Ws,E=s.contextType;typeof E=="object"&&E!==null&&(d=Tn(E)),d=new s(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=md,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Gf(i),E=s.contextType,d.context=typeof E=="object"&&E!==null?Tn(E):Ws,d.state=i.memoizedState,E=s.getDerivedStateFromProps,typeof E=="function"&&(dd(i,s,E,l),d.state=i.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(E=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),E!==d.state&&md.enqueueReplaceState(d,d.state,null),Rl(i,l,d,f),Al(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,D=ds(s,b);d.props=D;var G=d.context,Z=s.contextType;E=Ws,typeof Z=="object"&&Z!==null&&(E=Tn(Z));var ie=s.getDerivedStateFromProps;Z=typeof ie=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Z||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||G!==E)&&Fy(i,d,l,E),Xi=!1;var $=i.memoizedState;d.state=$,Rl(i,l,d,f),Al(),G=i.memoizedState,b||$!==G||Xi?(typeof ie=="function"&&(dd(i,s,ie,l),G=i.memoizedState),(D=Xi||qy(i,s,D,l,$,G,E))?(Z||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=E,l=D):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Kf(t,i),E=i.memoizedProps,Z=ds(s,E),d.props=Z,ie=i.pendingProps,$=d.context,G=s.contextType,D=Ws,typeof G=="object"&&G!==null&&(D=Tn(G)),b=s.getDerivedStateFromProps,(G=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(E!==ie||$!==D)&&Fy(i,d,l,D),Xi=!1,$=i.memoizedState,d.state=$,Rl(i,l,d,f),Al();var X=i.memoizedState;E!==ie||$!==X||Xi||t!==null&&t.dependencies!==null&&dc(t.dependencies)?(typeof b=="function"&&(dd(i,s,b,l),X=i.memoizedState),(Z=Xi||qy(i,s,Z,l,$,X,D)||t!==null&&t.dependencies!==null&&dc(t.dependencies))?(G||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,X,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,X,D)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),d.props=l,d.state=X,d.context=D,l=Z):(typeof d.componentDidUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||E===t.memoizedProps&&$===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,Oc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=oo(i,t.child,null,f),i.child=oo(i,null,s,f)):hn(t,i,s,f),i.memoizedState=d.state,t=i.child):t=bi(t,i,f),t}function av(t,i,s,l){return yl(),i.flags|=256,hn(t,i,s,l),i.child}var yd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function vd(t){return{baseLanes:t,cachePool:Kg()}}function _d(t,i,s){return t=t!==null?t.childLanes&~s:0,i&&(t|=mr),t}function sv(t,i,s){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,E;if((E=d)||(E=t!==null&&t.memoizedState===null?!1:(Wt.current&2)!==0),E&&(f=!0,i.flags&=-129),E=(i.flags&32)!==0,i.flags&=-33,t===null){if(st){if(f?ea(i):ta(),st){var b=Mt,D;if(D=b){e:{for(D=b,b=Kr;D.nodeType!==8;){if(!b){b=null;break e}if(D=Vr(D.nextSibling),D===null){b=null;break e}}b=D}b!==null?(i.memoizedState={dehydrated:b,treeContext:as!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},D=Wn(18,null,null,0),D.stateNode=b,D.return=i,i.child=D,On=i,Mt=null,D=!0):D=!1}D||ls(i)}if(b=i.memoizedState,b!==null&&(b=b.dehydrated,b!==null))return nm(b)?i.lanes=32:i.lanes=536870912,null;Ti(i)}return b=l.children,l=l.fallback,f?(ta(),f=i.mode,b=Mc({mode:"hidden",children:b},f),l=is(l,f,s,null),b.return=i,l.return=i,b.sibling=l,i.child=b,f=i.child,f.memoizedState=vd(s),f.childLanes=_d(t,E,s),i.memoizedState=yd,l):(ea(i),Ed(i,b))}if(D=t.memoizedState,D!==null&&(b=D.dehydrated,b!==null)){if(d)i.flags&256?(ea(i),i.flags&=-257,i=Td(t,i,s)):i.memoizedState!==null?(ta(),i.child=t.child,i.flags|=128,i=null):(ta(),f=l.fallback,b=i.mode,l=Mc({mode:"visible",children:l.children},b),f=is(f,b,s,null),f.flags|=2,l.return=i,f.return=i,l.sibling=f,i.child=l,oo(i,t.child,null,s),l=i.child,l.memoizedState=vd(s),l.childLanes=_d(t,E,s),i.memoizedState=yd,i=f);else if(ea(i),nm(b)){if(E=b.nextSibling&&b.nextSibling.dataset,E)var G=E.dgst;E=G,l=Error(a(419)),l.stack="",l.digest=E,vl({value:l,source:null,stack:null}),i=Td(t,i,s)}else if(nn||_l(t,i,s,!1),E=(s&t.childLanes)!==0,nn||E){if(E=bt,E!==null&&(l=s&-s,l=(l&42)!==0?1:Hr(l),l=(l&(E.suspendedLanes|s))!==0?0:l,l!==0&&l!==D.retryLane))throw D.retryLane=l,Xs(t,l),nr(E,t,l),Wy;b.data==="$?"||jd(),i=Td(t,i,s)}else b.data==="$?"?(i.flags|=192,i.child=t.child,i=null):(t=D.treeContext,Mt=Vr(b.nextSibling),On=i,st=!0,os=null,Kr=!1,t!==null&&(hr[fr++]=gi,hr[fr++]=yi,hr[fr++]=as,gi=t.id,yi=t.overflow,as=i),i=Ed(i,l.children),i.flags|=4096);return i}return f?(ta(),f=l.fallback,b=i.mode,D=t.child,G=D.sibling,l=pi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,G!==null?f=pi(G,f):(f=is(f,b,s,null),f.flags|=2),f.return=i,l.return=i,l.sibling=f,i.child=l,l=f,f=i.child,b=t.child.memoizedState,b===null?b=vd(s):(D=b.cachePool,D!==null?(G=Xt._currentValue,D=D.parent!==G?{parent:G,pool:G}:D):D=Kg(),b={baseLanes:b.baseLanes|s,cachePool:D}),f.memoizedState=b,f.childLanes=_d(t,E,s),i.memoizedState=yd,l):(ea(i),s=t.child,t=s.sibling,s=pi(s,{mode:"visible",children:l.children}),s.return=i,s.sibling=null,t!==null&&(E=i.deletions,E===null?(i.deletions=[t],i.flags|=16):E.push(t)),i.child=s,i.memoizedState=null,s)}function Ed(t,i){return i=Mc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Mc(t,i){return t=Wn(22,t,null,i),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Td(t,i,s){return oo(i,t.child,null,s),t=Ed(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function ov(t,i,s){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),jf(t.return,i,s)}function bd(t,i,s,l,f){var d=t.memoizedState;d===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:f}:(d.isBackwards=i,d.rendering=null,d.renderingStartTime=0,d.last=l,d.tail=s,d.tailMode=f)}function lv(t,i,s){var l=i.pendingProps,f=l.revealOrder,d=l.tail;if(hn(t,i,l.children,s),l=Wt.current,(l&2)!==0)l=l&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ov(t,s,i);else if(t.tag===19)ov(t,s,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch(fe(Wt,l),f){case"forwards":for(s=i.child,f=null;s!==null;)t=s.alternate,t!==null&&Cc(t)===null&&(f=s),s=s.sibling;s=f,s===null?(f=i.child,i.child=null):(f=s.sibling,s.sibling=null),bd(i,!1,f,s,d);break;case"backwards":for(s=null,f=i.child,i.child=null;f!==null;){if(t=f.alternate,t!==null&&Cc(t)===null){i.child=f;break}t=f.sibling,f.sibling=s,s=f,f=t}bd(i,!0,s,null,d);break;case"together":bd(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function bi(t,i,s){if(t!==null&&(i.dependencies=t.dependencies),sa|=i.lanes,(s&i.childLanes)===0)if(t!==null){if(_l(t,i,s,!1),(s&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(a(153));if(i.child!==null){for(t=i.child,s=pi(t,t.pendingProps),i.child=s,s.return=i;t.sibling!==null;)t=t.sibling,s=s.sibling=pi(t,t.pendingProps),s.return=i;s.sibling=null}return i.child}function wd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&dc(t)))}function dS(t,i,s){switch(i.tag){case 3:ot(i,i.stateNode.containerInfo),Qi(i,Xt,t.memoizedState.cache),yl();break;case 27:case 5:Ot(i);break;case 4:ot(i,i.stateNode.containerInfo);break;case 10:Qi(i,i.type,i.memoizedProps.value);break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(ea(i),i.flags|=128,null):(s&i.child.childLanes)!==0?sv(t,i,s):(ea(i),t=bi(t,i,s),t!==null?t.sibling:null);ea(i);break;case 19:var f=(t.flags&128)!==0;if(l=(s&i.childLanes)!==0,l||(_l(t,i,s,!1),l=(s&i.childLanes)!==0),f){if(l)return lv(t,i,s);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),fe(Wt,Wt.current),l)break;return null;case 22:case 23:return i.lanes=0,tv(t,i,s);case 24:Qi(i,Xt,t.memoizedState.cache)}return bi(t,i,s)}function uv(t,i,s){if(t!==null)if(t.memoizedProps!==i.pendingProps)nn=!0;else{if(!wd(t,s)&&(i.flags&128)===0)return nn=!1,dS(t,i,s);nn=(t.flags&131072)!==0}else nn=!1,st&&(i.flags&1048576)!==0&&jg(i,fc,i.index);switch(i.lanes=0,i.tag){case 16:e:{t=i.pendingProps;var l=i.elementType,f=l._init;if(l=f(l._payload),i.type=l,typeof l=="function")Of(l)?(t=ds(l,t),i.tag=1,i=iv(null,i,l,t,s)):(i.tag=0,i=gd(null,i,l,t,s));else{if(l!=null){if(f=l.$$typeof,f===Re){i.tag=11,i=Jy(null,i,l,t,s);break e}else if(f===x){i.tag=14,i=Zy(null,i,l,t,s);break e}}throw i=Ve(l)||l,Error(a(306,i,""))}}return i;case 0:return gd(t,i,i.type,i.pendingProps,s);case 1:return l=i.type,f=ds(l,i.pendingProps),iv(t,i,l,f,s);case 3:e:{if(ot(i,i.stateNode.containerInfo),t===null)throw Error(a(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,Kf(t,i),Rl(i,l,null,s);var E=i.memoizedState;if(l=E.cache,Qi(i,Xt,l),l!==d.cache&&zf(i,[Xt],s,!0),Al(),l=E.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:E.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=av(t,i,l,s);break e}else if(l!==f){f=ur(Error(a(424)),i),vl(f),i=av(t,i,l,s);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Mt=Vr(t.firstChild),On=i,st=!0,os=null,Kr=!0,s=By(i,null,l,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(yl(),l===f){i=bi(t,i,s);break e}hn(t,i,l,s)}i=i.child}return i;case 26:return Oc(t,i),t===null?(s=d_(i.type,null,i.pendingProps,null))?i.memoizedState=s:st||(s=i.type,t=i.pendingProps,l=Yc(Ne.current).createElement(s),l[K]=i,l[se]=t,dn(l,s,t),$e(l),i.stateNode=l):i.memoizedState=d_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Ot(i),t===null&&st&&(l=i.stateNode=c_(i.type,i.pendingProps,Ne.current),On=i,Kr=!0,f=Mt,ca(i.type)?(rm=f,Mt=Vr(l.firstChild)):Mt=f),hn(t,i,i.pendingProps.children,s),Oc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&st&&((f=l=Mt)&&(l=BS(l,i.type,i.pendingProps,Kr),l!==null?(i.stateNode=l,On=i,Mt=Vr(l.firstChild),Kr=!1,f=!0):f=!1),f||ls(i)),Ot(i),f=i.type,d=i.pendingProps,E=t!==null?t.memoizedProps:null,l=d.children,Zd(f,d)?l=null:E!==null&&Zd(f,E)&&(i.flags|=32),i.memoizedState!==null&&(f=Jf(t,i,aS,null,null,s),$l._currentValue=f),Oc(t,i),hn(t,i,l,s),i.child;case 6:return t===null&&st&&((t=s=Mt)&&(s=HS(s,i.pendingProps,Kr),s!==null?(i.stateNode=s,On=i,Mt=null,t=!0):t=!1),t||ls(i)),null;case 13:return sv(t,i,s);case 4:return ot(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=oo(i,null,l,s):hn(t,i,l,s),i.child;case 11:return Jy(t,i,i.type,i.pendingProps,s);case 7:return hn(t,i,i.pendingProps,s),i.child;case 8:return hn(t,i,i.pendingProps.children,s),i.child;case 12:return hn(t,i,i.pendingProps.children,s),i.child;case 10:return l=i.pendingProps,Qi(i,i.type,l.value),hn(t,i,l.children,s),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,cs(i),f=Tn(f),l=l(f),i.flags|=1,hn(t,i,l,s),i.child;case 14:return Zy(t,i,i.type,i.pendingProps,s);case 15:return ev(t,i,i.type,i.pendingProps,s);case 19:return lv(t,i,s);case 31:return l=i.pendingProps,s=i.mode,l={mode:l.mode,children:l.children},t===null?(s=Mc(l,s),s.ref=i.ref,i.child=s,s.return=i,i=s):(s=pi(t.child,l),s.ref=i.ref,i.child=s,s.return=i,i=s),i;case 22:return tv(t,i,s);case 24:return cs(i),l=Tn(Xt),t===null?(f=qf(),f===null&&(f=bt,d=Bf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=s),f=d),i.memoizedState={parent:l,cache:f},Gf(i),Qi(i,Xt,f)):((t.lanes&s)!==0&&(Kf(t,i),Rl(i,null,null,s),Al()),f=t.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Qi(i,Xt,l)):(l=d.cache,Qi(i,Xt,l),l!==f.cache&&zf(i,[Xt],s,!0))),hn(t,i,i.pendingProps.children,s),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function wi(t){t.flags|=4}function cv(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!v_(i)){if(i=dr.current,i!==null&&((tt&4194048)===tt?Yr!==null:(tt&62914560)!==tt&&(tt&536870912)===0||i!==Yr))throw wl=Ff,Yg;t.flags|=8192}}function Pc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?ar():536870912,t.lanes|=i,ho|=i)}function Ml(t,i){if(!st)switch(t.tailMode){case"hidden":i=t.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Nt(t){var i=t.alternate!==null&&t.alternate.child===t.child,s=0,l=0;if(i)for(var f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)s|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=s,i}function mS(t,i,s){var l=i.pendingProps;switch(Vf(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(i),null;case 1:return Nt(i),null;case 3:return s=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),_i(Xt),Gn(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(gl(i)?wi(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Hg())),Nt(i),null;case 26:return s=i.memoizedState,t===null?(wi(i),s!==null?(Nt(i),cv(i,s)):(Nt(i),i.flags&=-16777217)):s?s!==t.memoizedState?(wi(i),Nt(i),cv(i,s)):(Nt(i),i.flags&=-16777217):(t.memoizedProps!==l&&wi(i),Nt(i),i.flags&=-16777217),null;case 27:Kn(i),s=Ne.current;var f=i.type;if(t!==null&&i.stateNode!=null)t.memoizedProps!==l&&wi(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Nt(i),null}t=Ee.current,gl(i)?zg(i):(t=c_(f,l,s),i.stateNode=t,wi(i))}return Nt(i),null;case 5:if(Kn(i),s=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&wi(i);else{if(!l){if(i.stateNode===null)throw Error(a(166));return Nt(i),null}if(t=Ee.current,gl(i))zg(i);else{switch(f=Yc(Ne.current),t){case 1:t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":t=f.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":t=f.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":t=f.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?f.createElement(s,{is:l.is}):f.createElement(s)}}t[K]=i,t[se]=l;e:for(f=i.child;f!==null;){if(f.tag===5||f.tag===6)t.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===i)break e;for(;f.sibling===null;){if(f.return===null||f.return===i)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}i.stateNode=t;e:switch(dn(t,s,l),s){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&wi(i)}}return Nt(i),i.flags&=-16777217,null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&wi(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(a(166));if(t=Ne.current,gl(i)){if(t=i.stateNode,s=i.memoizedProps,l=null,f=On,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[K]=i,t=!!(t.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||r_(t.nodeValue,s)),t||ls(i)}else t=Yc(t).createTextNode(l),t[K]=i,i.stateNode=t}return Nt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=gl(i),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(a(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[K]=i}else yl(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Nt(i),f=!1}else f=Hg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Ti(i),i):(Ti(i),null)}if(Ti(i),(i.flags&128)!==0)return i.lanes=s,i;if(s=l!==null,t=t!==null&&t.memoizedState!==null,s){l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var d=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)}return s!==t&&s&&(i.child.flags|=8192),Pc(i,i.updateQueue),Nt(i),null;case 4:return Gn(),t===null&&$d(i.stateNode.containerInfo),Nt(i),null;case 10:return _i(i.type),Nt(i),null;case 19:if(me(Wt),f=i.memoizedState,f===null)return Nt(i),null;if(l=(i.flags&128)!==0,d=f.rendering,d===null)if(l)Ml(f,!1);else{if(Pt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=Cc(t),d!==null){for(i.flags|=128,Ml(f,!1),t=d.updateQueue,i.updateQueue=t,Pc(i,t),i.subtreeFlags=0,t=s,s=i.child;s!==null;)Ug(s,t),s=s.sibling;return fe(Wt,Wt.current&1|2),i.child}t=t.sibling}f.tail!==null&&ln()>Lc&&(i.flags|=128,l=!0,Ml(f,!1),i.lanes=4194304)}else{if(!l)if(t=Cc(d),t!==null){if(i.flags|=128,l=!0,t=t.updateQueue,i.updateQueue=t,Pc(i,t),Ml(f,!0),f.tail===null&&f.tailMode==="hidden"&&!d.alternate&&!st)return Nt(i),null}else 2*ln()-f.renderingStartTime>Lc&&s!==536870912&&(i.flags|=128,l=!0,Ml(f,!1),i.lanes=4194304);f.isBackwards?(d.sibling=i.child,i.child=d):(t=f.last,t!==null?t.sibling=d:i.child=d,f.last=d)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=ln(),i.sibling=null,t=Wt.current,fe(Wt,l?t&1|2:t&1),i):(Nt(i),null);case 22:case 23:return Ti(i),Xf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(s&536870912)!==0&&(i.flags&128)===0&&(Nt(i),i.subtreeFlags&6&&(i.flags|=8192)):Nt(i),s=i.updateQueue,s!==null&&Pc(i,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==s&&(i.flags|=2048),t!==null&&me(hs),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),i.memoizedState.cache!==s&&(i.flags|=2048),_i(Xt),Nt(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function pS(t,i){switch(Vf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return _i(Xt),Gn(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Kn(i),null;case 13:if(Ti(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(a(340));yl()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return me(Wt),null;case 4:return Gn(),null;case 10:return _i(i.type),null;case 22:case 23:return Ti(i),Xf(),t!==null&&me(hs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return _i(Xt),null;case 25:return null;default:return null}}function hv(t,i){switch(Vf(i),i.tag){case 3:_i(Xt),Gn();break;case 26:case 27:case 5:Kn(i);break;case 4:Gn();break;case 13:Ti(i);break;case 19:me(Wt);break;case 10:_i(i.type);break;case 22:case 23:Ti(i),Xf(),t!==null&&me(hs);break;case 24:_i(Xt)}}function Pl(t,i){try{var s=i.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var f=l.next;s=f;do{if((s.tag&t)===t){l=void 0;var d=s.create,E=s.inst;l=d(),E.destroy=l}s=s.next}while(s!==f)}}catch(b){vt(i,i.return,b)}}function na(t,i,s){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var E=l.inst,b=E.destroy;if(b!==void 0){E.destroy=void 0,f=i;var D=s,G=b;try{G()}catch(Z){vt(f,D,Z)}}}l=l.next}while(l!==d)}}catch(Z){vt(i,i.return,Z)}}function fv(t){var i=t.updateQueue;if(i!==null){var s=t.stateNode;try{Zg(i,s)}catch(l){vt(t,t.return,l)}}}function dv(t,i,s){s.props=ds(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(l){vt(t,i,l)}}function kl(t,i){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof s=="function"?t.refCleanup=s(l):s.current=l}}catch(f){vt(t,i,f)}}function $r(t,i){var s=t.ref,l=t.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(f){vt(t,i,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(f){vt(t,i,f)}else s.current=null}function mv(t){var i=t.type,s=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(f){vt(t,t.return,f)}}function Sd(t,i,s){try{var l=t.stateNode;VS(l,t.type,s,i),l[se]=i}catch(f){vt(t,t.return,f)}}function pv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ca(t.type)||t.tag===4}function Ad(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||pv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ca(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Rd(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,i):(i=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,i.appendChild(t),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Kc));else if(l!==4&&(l===27&&ca(t.type)&&(s=t.stateNode,i=null),t=t.child,t!==null))for(Rd(t,i,s),t=t.sibling;t!==null;)Rd(t,i,s),t=t.sibling}function kc(t,i,s){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?s.insertBefore(t,i):s.appendChild(t);else if(l!==4&&(l===27&&ca(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(kc(t,i,s),t=t.sibling;t!==null;)kc(t,i,s),t=t.sibling}function gv(t){var i=t.stateNode,s=t.memoizedProps;try{for(var l=t.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);dn(i,l,s),i[K]=t,i[se]=s}catch(d){vt(t,t.return,d)}}var Si=!1,jt=!1,xd=!1,yv=typeof WeakSet=="function"?WeakSet:Set,rn=null;function gS(t,i){if(t=t.containerInfo,Wd=Zc,t=Ig(t),Af(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var E=0,b=-1,D=-1,G=0,Z=0,ie=t,$=null;t:for(;;){for(var X;ie!==s||f!==0&&ie.nodeType!==3||(b=E+f),ie!==d||l!==0&&ie.nodeType!==3||(D=E+l),ie.nodeType===3&&(E+=ie.nodeValue.length),(X=ie.firstChild)!==null;)$=ie,ie=X;for(;;){if(ie===t)break t;if($===s&&++G===f&&(b=E),$===d&&++Z===l&&(D=E),(X=ie.nextSibling)!==null)break;ie=$,$=ie.parentNode}ie=X}s=b===-1||D===-1?null:{start:b,end:D}}else s=null}s=s||{start:0,end:0}}else s=null;for(Jd={focusedElem:t,selectionRange:s},Zc=!1,rn=i;rn!==null;)if(i=rn,t=i.child,(i.subtreeFlags&1024)!==0&&t!==null)t.return=i,rn=t;else for(;rn!==null;){switch(i=rn,d=i.alternate,t=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,s=i,f=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var ke=ds(s.type,f,s.elementType===s.type);t=l.getSnapshotBeforeUpdate(ke,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(De){vt(s,s.return,De)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,s=t.nodeType,s===9)tm(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":tm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=i.sibling,t!==null){t.return=i.return,rn=t;break}rn=i.return}}function vv(t,i,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:ra(t,s),l&4&&Pl(5,s);break;case 1:if(ra(t,s),l&4)if(t=s.stateNode,i===null)try{t.componentDidMount()}catch(E){vt(s,s.return,E)}else{var f=ds(s.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(f,i,t.__reactInternalSnapshotBeforeUpdate)}catch(E){vt(s,s.return,E)}}l&64&&fv(s),l&512&&kl(s,s.return);break;case 3:if(ra(t,s),l&64&&(t=s.updateQueue,t!==null)){if(i=null,s.child!==null)switch(s.child.tag){case 27:case 5:i=s.child.stateNode;break;case 1:i=s.child.stateNode}try{Zg(t,i)}catch(E){vt(s,s.return,E)}}break;case 27:i===null&&l&4&&gv(s);case 26:case 5:ra(t,s),i===null&&l&4&&mv(s),l&512&&kl(s,s.return);break;case 12:ra(t,s);break;case 13:ra(t,s),l&4&&Tv(t,s),l&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=AS.bind(null,s),qS(t,s))));break;case 22:if(l=s.memoizedState!==null||Si,!l){i=i!==null&&i.memoizedState!==null||jt,f=Si;var d=jt;Si=l,(jt=i)&&!d?ia(t,s,(s.subtreeFlags&8772)!==0):ra(t,s),Si=f,jt=d}break;case 30:break;default:ra(t,s)}}function _v(t){var i=t.alternate;i!==null&&(t.alternate=null,_v(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&Ae(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var It=null,zn=!1;function Ai(t,i,s){for(s=s.child;s!==null;)Ev(t,i,s),s=s.sibling}function Ev(t,i,s){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Zt,s)}catch{}switch(s.tag){case 26:jt||$r(s,i),Ai(t,i,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:jt||$r(s,i);var l=It,f=zn;ca(s.type)&&(It=s.stateNode,zn=!1),Ai(t,i,s),Fl(s.stateNode),It=l,zn=f;break;case 5:jt||$r(s,i);case 6:if(l=It,f=zn,It=null,Ai(t,i,s),It=l,zn=f,It!==null)if(zn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(s.stateNode)}catch(d){vt(s,i,d)}else try{It.removeChild(s.stateNode)}catch(d){vt(s,i,d)}break;case 18:It!==null&&(zn?(t=It,l_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Jl(t)):l_(It,s.stateNode));break;case 4:l=It,f=zn,It=s.stateNode.containerInfo,zn=!0,Ai(t,i,s),It=l,zn=f;break;case 0:case 11:case 14:case 15:jt||na(2,s,i),jt||na(4,s,i),Ai(t,i,s);break;case 1:jt||($r(s,i),l=s.stateNode,typeof l.componentWillUnmount=="function"&&dv(s,i,l)),Ai(t,i,s);break;case 21:Ai(t,i,s);break;case 22:jt=(l=jt)||s.memoizedState!==null,Ai(t,i,s),jt=l;break;default:Ai(t,i,s)}}function Tv(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Jl(t)}catch(s){vt(i,i.return,s)}}function yS(t){switch(t.tag){case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new yv),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new yv),i;default:throw Error(a(435,t.tag))}}function Id(t,i){var s=yS(t);i.forEach(function(l){var f=RS.bind(null,t,l);s.has(l)||(s.add(l),l.then(f,f))})}function Jn(t,i){var s=i.deletions;if(s!==null)for(var l=0;l<s.length;l++){var f=s[l],d=t,E=i,b=E;e:for(;b!==null;){switch(b.tag){case 27:if(ca(b.type)){It=b.stateNode,zn=!1;break e}break;case 5:It=b.stateNode,zn=!1;break e;case 3:case 4:It=b.stateNode.containerInfo,zn=!0;break e}b=b.return}if(It===null)throw Error(a(160));Ev(d,E,f),It=null,zn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)bv(i,t),i=i.sibling}var kr=null;function bv(t,i){var s=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Jn(i,t),Zn(t),l&4&&(na(3,t,t.return),Pl(3,t),na(5,t,t.return));break;case 1:Jn(i,t),Zn(t),l&512&&(jt||s===null||$r(s,s.return)),l&64&&Si&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var f=kr;if(Jn(i,t),Zn(t),l&512&&(jt||s===null||$r(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=t.memoizedState,s===null)if(l===null)if(t.stateNode===null){e:{l=t.type,s=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[xe]||d[K]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),dn(d,l,s),d[K]=t,$e(d),l=d;break e;case"link":var E=g_("link","href",f).get(l+(s.href||""));if(E){for(var b=0;b<E.length;b++)if(d=E[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){E.splice(b,1);break t}}d=f.createElement(l),dn(d,l,s),f.head.appendChild(d);break;case"meta":if(E=g_("meta","content",f).get(l+(s.content||""))){for(b=0;b<E.length;b++)if(d=E[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){E.splice(b,1);break t}}d=f.createElement(l),dn(d,l,s),f.head.appendChild(d);break;default:throw Error(a(468,l))}d[K]=t,$e(d),l=d}t.stateNode=l}else y_(f,t.type,t.stateNode);else t.stateNode=p_(f,l,t.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?y_(f,t.type,t.stateNode):p_(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Sd(t,t.memoizedProps,s.memoizedProps)}break;case 27:Jn(i,t),Zn(t),l&512&&(jt||s===null||$r(s,s.return)),s!==null&&l&4&&Sd(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Jn(i,t),Zn(t),l&512&&(jt||s===null||$r(s,s.return)),t.flags&32){f=t.stateNode;try{or(f,"")}catch(X){vt(t,t.return,X)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Sd(t,f,s!==null?s.memoizedProps:f)),l&1024&&(xd=!0);break;case 6:if(Jn(i,t),Zn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,s=t.stateNode;try{s.nodeValue=l}catch(X){vt(t,t.return,X)}}break;case 3:if(Xc=null,f=kr,kr=$c(i.containerInfo),Jn(i,t),kr=f,Zn(t),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Jl(i.containerInfo)}catch(X){vt(t,t.return,X)}xd&&(xd=!1,wv(t));break;case 4:l=kr,kr=$c(t.stateNode.containerInfo),Jn(i,t),Zn(t),kr=l;break;case 12:Jn(i,t),Zn(t);break;case 13:Jn(i,t),Zn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Pd=ln()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Id(t,l)));break;case 22:f=t.memoizedState!==null;var D=s!==null&&s.memoizedState!==null,G=Si,Z=jt;if(Si=G||f,jt=Z||D,Jn(i,t),jt=Z,Si=G,Zn(t),l&8192)e:for(i=t.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(s===null||D||Si||jt||ms(t)),s=null,i=t;;){if(i.tag===5||i.tag===26){if(s===null){D=s=i;try{if(d=D.stateNode,f)E=d.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{b=D.stateNode;var ie=D.memoizedProps.style,$=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;b.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(X){vt(D,D.return,X)}}}else if(i.tag===6){if(s===null){D=i;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(X){vt(D,D.return,X)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;s===i&&(s=null),i=i.return}s===i&&(s=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Id(t,s))));break;case 19:Jn(i,t),Zn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Id(t,l)));break;case 30:break;case 21:break;default:Jn(i,t),Zn(t)}}function Zn(t){var i=t.flags;if(i&2){try{for(var s,l=t.return;l!==null;){if(pv(l)){s=l;break}l=l.return}if(s==null)throw Error(a(160));switch(s.tag){case 27:var f=s.stateNode,d=Ad(t);kc(t,d,f);break;case 5:var E=s.stateNode;s.flags&32&&(or(E,""),s.flags&=-33);var b=Ad(t);kc(t,b,E);break;case 3:case 4:var D=s.stateNode.containerInfo,G=Ad(t);Rd(t,G,D);break;default:throw Error(a(161))}}catch(Z){vt(t,t.return,Z)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function wv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;wv(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function ra(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)vv(t,i.alternate,i),i=i.sibling}function ms(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:na(4,i,i.return),ms(i);break;case 1:$r(i,i.return);var s=i.stateNode;typeof s.componentWillUnmount=="function"&&dv(i,i.return,s),ms(i);break;case 27:Fl(i.stateNode);case 26:case 5:$r(i,i.return),ms(i);break;case 22:i.memoizedState===null&&ms(i);break;case 30:ms(i);break;default:ms(i)}t=t.sibling}}function ia(t,i,s){for(s=s&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=t,d=i,E=d.flags;switch(d.tag){case 0:case 11:case 15:ia(f,d,s),Pl(4,d);break;case 1:if(ia(f,d,s),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(G){vt(l,l.return,G)}if(l=d,f=l.updateQueue,f!==null){var b=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Jg(D[f],b)}catch(G){vt(l,l.return,G)}}s&&E&64&&fv(d),kl(d,d.return);break;case 27:gv(d);case 26:case 5:ia(f,d,s),s&&l===null&&E&4&&mv(d),kl(d,d.return);break;case 12:ia(f,d,s);break;case 13:ia(f,d,s),s&&E&4&&Tv(f,d);break;case 22:d.memoizedState===null&&ia(f,d,s),kl(d,d.return);break;case 30:break;default:ia(f,d,s)}i=i.sibling}}function Cd(t,i){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&El(s))}function Nd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&El(t))}function Qr(t,i,s,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sv(t,i,s,l),i=i.sibling}function Sv(t,i,s,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:Qr(t,i,s,l),f&2048&&Pl(9,i);break;case 1:Qr(t,i,s,l);break;case 3:Qr(t,i,s,l),f&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&El(t)));break;case 12:if(f&2048){Qr(t,i,s,l),t=i.stateNode;try{var d=i.memoizedProps,E=d.id,b=d.onPostCommit;typeof b=="function"&&b(E,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){vt(i,i.return,D)}}else Qr(t,i,s,l);break;case 13:Qr(t,i,s,l);break;case 23:break;case 22:d=i.stateNode,E=i.alternate,i.memoizedState!==null?d._visibility&2?Qr(t,i,s,l):Vl(t,i):d._visibility&2?Qr(t,i,s,l):(d._visibility|=2,lo(t,i,s,l,(i.subtreeFlags&10256)!==0)),f&2048&&Cd(E,i);break;case 24:Qr(t,i,s,l),f&2048&&Nd(i.alternate,i);break;default:Qr(t,i,s,l)}}function lo(t,i,s,l,f){for(f=f&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var d=t,E=i,b=s,D=l,G=E.flags;switch(E.tag){case 0:case 11:case 15:lo(d,E,b,D,f),Pl(8,E);break;case 23:break;case 22:var Z=E.stateNode;E.memoizedState!==null?Z._visibility&2?lo(d,E,b,D,f):Vl(d,E):(Z._visibility|=2,lo(d,E,b,D,f)),f&&G&2048&&Cd(E.alternate,E);break;case 24:lo(d,E,b,D,f),f&&G&2048&&Nd(E.alternate,E);break;default:lo(d,E,b,D,f)}i=i.sibling}}function Vl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var s=t,l=i,f=l.flags;switch(l.tag){case 22:Vl(s,l),f&2048&&Cd(l.alternate,l);break;case 24:Vl(s,l),f&2048&&Nd(l.alternate,l);break;default:Vl(s,l)}i=i.sibling}}var Ll=8192;function uo(t){if(t.subtreeFlags&Ll)for(t=t.child;t!==null;)Av(t),t=t.sibling}function Av(t){switch(t.tag){case 26:uo(t),t.flags&Ll&&t.memoizedState!==null&&nA(kr,t.memoizedState,t.memoizedProps);break;case 5:uo(t);break;case 3:case 4:var i=kr;kr=$c(t.stateNode.containerInfo),uo(t),kr=i;break;case 22:t.memoizedState===null&&(i=t.alternate,i!==null&&i.memoizedState!==null?(i=Ll,Ll=16777216,uo(t),Ll=i):uo(t));break;default:uo(t)}}function Rv(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Ul(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];rn=l,Iv(l,t)}Rv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)xv(t),t=t.sibling}function xv(t){switch(t.tag){case 0:case 11:case 15:Ul(t),t.flags&2048&&na(9,t,t.return);break;case 3:Ul(t);break;case 12:Ul(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Vc(t)):Ul(t);break;default:Ul(t)}}function Vc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var s=0;s<i.length;s++){var l=i[s];rn=l,Iv(l,t)}Rv(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:na(8,i,i.return),Vc(i);break;case 22:s=i.stateNode,s._visibility&2&&(s._visibility&=-3,Vc(i));break;default:Vc(i)}t=t.sibling}}function Iv(t,i){for(;rn!==null;){var s=rn;switch(s.tag){case 0:case 11:case 15:na(8,s,i);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:El(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,rn=l;else e:for(s=t;rn!==null;){l=rn;var f=l.sibling,d=l.return;if(_v(l),l===s){rn=null;break e}if(f!==null){f.return=d,rn=f;break e}rn=d}}}var vS={getCacheForType:function(t){var i=Tn(Xt),s=i.data.get(t);return s===void 0&&(s=t(),i.data.set(t,s)),s}},_S=typeof WeakMap=="function"?WeakMap:Map,ct=0,bt=null,Qe=null,tt=0,ht=0,er=null,aa=!1,co=!1,Dd=!1,Ri=0,Pt=0,sa=0,ps=0,Od=0,mr=0,ho=0,jl=null,Bn=null,Md=!1,Pd=0,Lc=1/0,Uc=null,oa=null,fn=0,la=null,fo=null,mo=0,kd=0,Vd=null,Cv=null,zl=0,Ld=null;function tr(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(Y.T!==null){var t=eo;return t!==0?t:Fd()}return Cr()}function Nv(){mr===0&&(mr=(tt&536870912)===0||st?ji():536870912);var t=dr.current;return t!==null&&(t.flags|=32),mr}function nr(t,i,s){(t===bt&&(ht===2||ht===9)||t.cancelPendingCommit!==null)&&(po(t,0),ua(t,tt,mr,!1)),xt(t,s),((ct&2)===0||t!==bt)&&(t===bt&&((ct&2)===0&&(ps|=s),Pt===4&&ua(t,tt,mr,!1)),Xr(t))}function Dv(t,i,s){if((ct&6)!==0)throw Error(a(327));var l=!s&&(i&124)===0&&(i&t.expiredLanes)===0||Rr(t,i),f=l?bS(t,i):zd(t,i,!0),d=l;do{if(f===0){co&&!l&&ua(t,i,0,!1);break}else{if(s=t.current.alternate,d&&!ES(s)){f=zd(t,i,!1),d=!1;continue}if(f===2){if(d=i,t.errorRecoveryDisabledLanes&d)var E=0;else E=t.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){i=E;e:{var b=t;f=jl;var D=b.current.memoizedState.isDehydrated;if(D&&(po(b,E).flags|=256),E=zd(b,E,!1),E!==2){if(Dd&&!D){b.errorRecoveryDisabledLanes|=d,ps|=d,f=4;break e}d=Bn,Bn=f,d!==null&&(Bn===null?Bn=d:Bn.push.apply(Bn,d))}f=E}if(d=!1,f!==2)continue}}if(f===1){po(t,0),ua(t,i,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:ua(l,i,mr,!aa);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(f=Pd+300-ln(),10<f)){if(ua(l,i,mr,!aa),Vn(l,0,!0)!==0)break e;l.timeoutHandle=s_(Ov.bind(null,l,s,Bn,Uc,Md,i,mr,ps,ho,aa,d,2,-0,0),f);break e}Ov(l,s,Bn,Uc,Md,i,mr,ps,ho,aa,d,0,-0,0)}}break}while(!0);Xr(t)}function Ov(t,i,s,l,f,d,E,b,D,G,Z,ie,$,X){if(t.timeoutHandle=-1,ie=i.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(Yl={stylesheets:null,count:0,unsuspend:tA},Av(i),ie=rA(),ie!==null)){t.cancelPendingCommit=ie(jv.bind(null,t,i,d,s,l,f,E,b,D,Z,1,$,X)),ua(t,d,E,!G);return}jv(t,i,d,s,l,f,E,b,D)}function ES(t){for(var i=t;;){var s=i.tag;if((s===0||s===11||s===15)&&i.flags&16384&&(s=i.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var f=s[l],d=f.getSnapshot;f=f.value;try{if(!Xn(d(),f))return!1}catch{return!1}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function ua(t,i,s,l){i&=~Od,i&=~ps,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var f=i;0<f;){var d=31-un(f),E=1<<d;l[d]=-1,f&=~E}s!==0&&Ir(t,s,i)}function jc(){return(ct&6)===0?(Bl(0),!1):!0}function Ud(){if(Qe!==null){if(ht===0)var t=Qe.return;else t=Qe,vi=us=null,td(t),so=null,Dl=0,t=Qe;for(;t!==null;)hv(t.alternate,t),t=t.return;Qe=null}}function po(t,i){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,US(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),Ud(),bt=t,Qe=s=pi(t.current,null),tt=i,ht=0,er=null,aa=!1,co=Rr(t,i),Dd=!1,ho=mr=Od=ps=sa=Pt=0,Bn=jl=null,Md=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var f=31-un(l),d=1<<f;i|=t[f],l&=~d}return Ri=i,oc(),s}function Mv(t,i){Ge=null,Y.H=Rc,i===bl||i===gc?(i=Xg(),ht=3):i===Yg?(i=Xg(),ht=4):ht=i===Wy?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,er=i,Qe===null&&(Pt=1,Dc(t,ur(i,t.current)))}function Pv(){var t=Y.H;return Y.H=Rc,t===null?Rc:t}function kv(){var t=Y.A;return Y.A=vS,t}function jd(){Pt=4,aa||(tt&4194048)!==tt&&dr.current!==null||(co=!0),(sa&134217727)===0&&(ps&134217727)===0||bt===null||ua(bt,tt,mr,!1)}function zd(t,i,s){var l=ct;ct|=2;var f=Pv(),d=kv();(bt!==t||tt!==i)&&(Uc=null,po(t,i)),i=!1;var E=Pt;e:do try{if(ht!==0&&Qe!==null){var b=Qe,D=er;switch(ht){case 8:Ud(),E=6;break e;case 3:case 2:case 9:case 6:dr.current===null&&(i=!0);var G=ht;if(ht=0,er=null,go(t,b,D,G),s&&co){E=0;break e}break;default:G=ht,ht=0,er=null,go(t,b,D,G)}}TS(),E=Pt;break}catch(Z){Mv(t,Z)}while(!0);return i&&t.shellSuspendCounter++,vi=us=null,ct=l,Y.H=f,Y.A=d,Qe===null&&(bt=null,tt=0,oc()),E}function TS(){for(;Qe!==null;)Vv(Qe)}function bS(t,i){var s=ct;ct|=2;var l=Pv(),f=kv();bt!==t||tt!==i?(Uc=null,Lc=ln()+500,po(t,i)):co=Rr(t,i);e:do try{if(ht!==0&&Qe!==null){i=Qe;var d=er;t:switch(ht){case 1:ht=0,er=null,go(t,i,d,1);break;case 2:case 9:if($g(d)){ht=0,er=null,Lv(i);break}i=function(){ht!==2&&ht!==9||bt!==t||(ht=7),Xr(t)},d.then(i,i);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:$g(d)?(ht=0,er=null,Lv(i)):(ht=0,er=null,go(t,i,d,7));break;case 5:var E=null;switch(Qe.tag){case 26:E=Qe.memoizedState;case 5:case 27:var b=Qe;if(!E||v_(E)){ht=0,er=null;var D=b.sibling;if(D!==null)Qe=D;else{var G=b.return;G!==null?(Qe=G,zc(G)):Qe=null}break t}}ht=0,er=null,go(t,i,d,5);break;case 6:ht=0,er=null,go(t,i,d,6);break;case 8:Ud(),Pt=6;break e;default:throw Error(a(462))}}wS();break}catch(Z){Mv(t,Z)}while(!0);return vi=us=null,Y.H=l,Y.A=f,ct=s,Qe!==null?0:(bt=null,tt=0,oc(),Pt)}function wS(){for(;Qe!==null&&!Jo();)Vv(Qe)}function Vv(t){var i=uv(t.alternate,t,Ri);t.memoizedProps=t.pendingProps,i===null?zc(t):Qe=i}function Lv(t){var i=t,s=i.alternate;switch(i.tag){case 15:case 0:i=rv(s,i,i.pendingProps,i.type,void 0,tt);break;case 11:i=rv(s,i,i.pendingProps,i.type.render,i.ref,tt);break;case 5:td(i);default:hv(s,i),i=Qe=Ug(i,Ri),i=uv(s,i,Ri)}t.memoizedProps=t.pendingProps,i===null?zc(t):Qe=i}function go(t,i,s,l){vi=us=null,td(i),so=null,Dl=0;var f=i.return;try{if(fS(t,f,i,s,tt)){Pt=1,Dc(t,ur(s,t.current)),Qe=null;return}}catch(d){if(f!==null)throw Qe=f,d;Pt=1,Dc(t,ur(s,t.current)),Qe=null;return}i.flags&32768?(st||l===1?t=!0:co||(tt&536870912)!==0?t=!1:(aa=t=!0,(l===2||l===9||l===3||l===6)&&(l=dr.current,l!==null&&l.tag===13&&(l.flags|=16384))),Uv(i,t)):zc(i)}function zc(t){var i=t;do{if((i.flags&32768)!==0){Uv(i,aa);return}t=i.return;var s=mS(i.alternate,i,Ri);if(s!==null){Qe=s;return}if(i=i.sibling,i!==null){Qe=i;return}Qe=i=t}while(i!==null);Pt===0&&(Pt=5)}function Uv(t,i){do{var s=pS(t.alternate,t);if(s!==null){s.flags&=32767,Qe=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!i&&(t=t.sibling,t!==null)){Qe=t;return}Qe=t=s}while(t!==null);Pt=6,Qe=null}function jv(t,i,s,l,f,d,E,b,D){t.cancelPendingCommit=null;do Bc();while(fn!==0);if((ct&6)!==0)throw Error(a(327));if(i!==null){if(i===t.current)throw Error(a(177));if(d=i.lanes|i.childLanes,d|=Nf,js(t,s,d,E,b,D),t===bt&&(Qe=bt=null,tt=0),fo=i,la=t,mo=s,kd=d,Vd=f,Cv=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,xS(Tr,function(){return Fv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=Y.T,Y.T=null,f=he.p,he.p=2,E=ct,ct|=4;try{gS(t,i,s)}finally{ct=E,he.p=f,Y.T=l}}fn=1,zv(),Bv(),Hv()}}function zv(){if(fn===1){fn=0;var t=la,i=fo,s=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||s){s=Y.T,Y.T=null;var l=he.p;he.p=2;var f=ct;ct|=4;try{bv(i,t);var d=Jd,E=Ig(t.containerInfo),b=d.focusedElem,D=d.selectionRange;if(E!==b&&b&&b.ownerDocument&&xg(b.ownerDocument.documentElement,b)){if(D!==null&&Af(b)){var G=D.start,Z=D.end;if(Z===void 0&&(Z=G),"selectionStart"in b)b.selectionStart=G,b.selectionEnd=Math.min(Z,b.value.length);else{var ie=b.ownerDocument||document,$=ie&&ie.defaultView||window;if($.getSelection){var X=$.getSelection(),ke=b.textContent.length,De=Math.min(D.start,ke),gt=D.end===void 0?De:Math.min(D.end,ke);!X.extend&&De>gt&&(E=gt,gt=De,De=E);var j=Rg(b,De),L=Rg(b,gt);if(j&&L&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==L.node||X.focusOffset!==L.offset)){var q=ie.createRange();q.setStart(j.node,j.offset),X.removeAllRanges(),De>gt?(X.addRange(q),X.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),X.addRange(q))}}}}for(ie=[],X=b;X=X.parentNode;)X.nodeType===1&&ie.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<ie.length;b++){var te=ie[b];te.element.scrollLeft=te.left,te.element.scrollTop=te.top}}Zc=!!Wd,Jd=Wd=null}finally{ct=f,he.p=l,Y.T=s}}t.current=i,fn=2}}function Bv(){if(fn===2){fn=0;var t=la,i=fo,s=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||s){s=Y.T,Y.T=null;var l=he.p;he.p=2;var f=ct;ct|=4;try{vv(t,i.alternate,i)}finally{ct=f,he.p=l,Y.T=s}}fn=3}}function Hv(){if(fn===4||fn===3){fn=0,za();var t=la,i=fo,s=mo,l=Cv;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?fn=5:(fn=0,fo=la=null,qv(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(oa=null),Ha(s),i=i.stateNode,_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Zt,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=Y.T,f=he.p,he.p=2,Y.T=null;try{for(var d=t.onRecoverableError,E=0;E<l.length;E++){var b=l[E];d(b.value,{componentStack:b.stack})}}finally{Y.T=i,he.p=f}}(mo&3)!==0&&Bc(),Xr(t),f=t.pendingLanes,(s&4194090)!==0&&(f&42)!==0?t===Ld?zl++:(zl=0,Ld=t):zl=0,Bl(0)}}function qv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,El(i)))}function Bc(t){return zv(),Bv(),Hv(),Fv()}function Fv(){if(fn!==5)return!1;var t=la,i=kd;kd=0;var s=Ha(mo),l=Y.T,f=he.p;try{he.p=32>s?32:s,Y.T=null,s=Vd,Vd=null;var d=la,E=mo;if(fn=0,fo=la=null,mo=0,(ct&6)!==0)throw Error(a(331));var b=ct;if(ct|=4,xv(d.current),Sv(d,d.current,E,s),ct=b,Bl(0,!1),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Zt,d)}catch{}return!0}finally{he.p=f,Y.T=l,qv(t,i)}}function Gv(t,i,s){i=ur(s,i),i=pd(t.stateNode,i,2),t=Ji(t,i,2),t!==null&&(xt(t,2),Xr(t))}function vt(t,i,s){if(t.tag===3)Gv(t,t,s);else for(;i!==null;){if(i.tag===3){Gv(i,t,s);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(oa===null||!oa.has(l))){t=ur(s,t),s=Qy(2),l=Ji(i,s,2),l!==null&&(Xy(s,l,i,t),xt(l,2),Xr(l));break}}i=i.return}}function Bd(t,i,s){var l=t.pingCache;if(l===null){l=t.pingCache=new _S;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(s)||(Dd=!0,f.add(s),t=SS.bind(null,t,i,s),i.then(t,t))}function SS(t,i,s){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,bt===t&&(tt&s)===s&&(Pt===4||Pt===3&&(tt&62914560)===tt&&300>ln()-Pd?(ct&2)===0&&po(t,0):Od|=s,ho===tt&&(ho=0)),Xr(t)}function Kv(t,i){i===0&&(i=ar()),t=Xs(t,i),t!==null&&(xt(t,i),Xr(t))}function AS(t){var i=t.memoizedState,s=0;i!==null&&(s=i.retryLane),Kv(t,s)}function RS(t,i){var s=0;switch(t.tag){case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(s=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(i),Kv(t,s)}function xS(t,i){return ui(t,i)}var Hc=null,yo=null,Hd=!1,qc=!1,qd=!1,gs=0;function Xr(t){t!==yo&&t.next===null&&(yo===null?Hc=yo=t:yo=yo.next=t),qc=!0,Hd||(Hd=!0,CS())}function Bl(t,i){if(!qd&&qc){qd=!0;do for(var s=!1,l=Hc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var E=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-un(42|t)+1)-1,d&=f&~(E&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,Xv(l,d))}else d=tt,d=Vn(l,l===bt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Rr(l,d)||(s=!0,Xv(l,d));l=l.next}while(s);qd=!1}}function IS(){Yv()}function Yv(){qc=Hd=!1;var t=0;gs!==0&&(LS()&&(t=gs),gs=0);for(var i=ln(),s=null,l=Hc;l!==null;){var f=l.next,d=$v(l,i);d===0?(l.next=null,s===null?Hc=f:s.next=f,f===null&&(yo=s)):(s=l,(t!==0||(d&3)!==0)&&(qc=!0)),l=f}Bl(t)}function $v(t,i){for(var s=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var E=31-un(d),b=1<<E,D=f[E];D===-1?((b&s)===0||(b&l)!==0)&&(f[E]=xr(b,i)):D<=i&&(t.expiredLanes|=b),d&=~b}if(i=bt,s=tt,s=Vn(t,t===i?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,s===0||t===i&&(ht===2||ht===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Mn(l),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Rr(t,s)){if(i=s&-s,i===t.callbackPriority)return i;switch(l!==null&&Mn(l),Ha(s)){case 2:case 8:s=Bt;break;case 32:s=Tr;break;case 268435456:s=wr;break;default:s=Tr}return l=Qv.bind(null,t),s=ui(s,l),t.callbackPriority=i,t.callbackNode=s,i}return l!==null&&l!==null&&Mn(l),t.callbackPriority=2,t.callbackNode=null,2}function Qv(t,i){if(fn!==0&&fn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Bc()&&t.callbackNode!==s)return null;var l=tt;return l=Vn(t,t===bt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Dv(t,l,i),$v(t,ln()),t.callbackNode!=null&&t.callbackNode===s?Qv.bind(null,t):null)}function Xv(t,i){if(Bc())return null;Dv(t,i,!0)}function CS(){jS(function(){(ct&6)!==0?ui(kt,IS):Yv()})}function Fd(){return gs===0&&(gs=ji()),gs}function Wv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Nr(""+t)}function Jv(t,i){var s=i.ownerDocument.createElement("input");return s.name=i.name,s.value=i.value,t.id&&s.setAttribute("form",t.id),i.parentNode.insertBefore(s,i),t=new FormData(t),s.parentNode.removeChild(s),t}function NS(t,i,s,l,f){if(i==="submit"&&s&&s.stateNode===f){var d=Wv((f[se]||null).action),E=l.submitter;E&&(i=(i=E[se]||null)?Wv(i.formAction):E.getAttribute("formAction"),i!==null&&(d=i,E=null));var b=new Qa("action","action",null,l,f);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(gs!==0){var D=E?Jv(f,E):new FormData(f);cd(s,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(b.preventDefault(),D=E?Jv(f,E):new FormData(f),cd(s,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var Gd=0;Gd<Cf.length;Gd++){var Kd=Cf[Gd],DS=Kd.toLowerCase(),OS=Kd[0].toUpperCase()+Kd.slice(1);Pr(DS,"on"+OS)}Pr(Dg,"onAnimationEnd"),Pr(Og,"onAnimationIteration"),Pr(Mg,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Qw,"onTransitionRun"),Pr(Xw,"onTransitionStart"),Pr(Ww,"onTransitionCancel"),Pr(Pg,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function Zv(t,i){i=(i&4)!==0;for(var s=0;s<t.length;s++){var l=t[s],f=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var E=l.length-1;0<=E;E--){var b=l[E],D=b.instance,G=b.currentTarget;if(b=b.listener,D!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=G;try{d(f)}catch(Z){Nc(Z)}f.currentTarget=null,d=D}else for(E=0;E<l.length;E++){if(b=l[E],D=b.instance,G=b.currentTarget,b=b.listener,D!==d&&f.isPropagationStopped())break e;d=b,f.currentTarget=G;try{d(f)}catch(Z){Nc(Z)}f.currentTarget=null,d=D}}}}function Xe(t,i){var s=i[Te];s===void 0&&(s=i[Te]=new Set);var l=t+"__bubble";s.has(l)||(e_(i,t,2,!1),s.add(l))}function Yd(t,i,s){var l=0;i&&(l|=4),e_(s,t,l,i)}var Fc="_reactListening"+Math.random().toString(36).slice(2);function $d(t){if(!t[Fc]){t[Fc]=!0,ft.forEach(function(s){s!=="selectionchange"&&(MS.has(s)||Yd(s,!1,t),Yd(s,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Fc]||(i[Fc]=!0,Yd("selectionchange",!1,i))}}function e_(t,i,s,l){switch(S_(i)){case 2:var f=sA;break;case 8:f=oA;break;default:f=lm}s=f.bind(null,i,s,t),f=void 0,!di||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(i,s,{capture:!0,passive:f}):t.addEventListener(i,s,!0):f!==void 0?t.addEventListener(i,s,{passive:f}):t.addEventListener(i,s,!1)}function Qd(t,i,s,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var E=l.tag;if(E===3||E===4){var b=l.stateNode.containerInfo;if(b===f)break;if(E===4)for(E=l.return;E!==null;){var D=E.tag;if((D===3||D===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;b!==null;){if(E=ve(b),E===null)return;if(D=E.tag,D===5||D===6||D===26||D===27){l=d=E;continue e}b=b.parentNode}}l=l.return}Ka(function(){var G=d,Z=al(s),ie=[];e:{var $=kg.get(t);if($!==void 0){var X=Qa,ke=t;switch(t){case"keypress":if(Ya(s)===0)break e;case"keydown":case"keyup":X=Ks;break;case"focusin":ke="focus",X=qs;break;case"focusout":ke="blur",X=qs;break;case"beforeblur":case"afterblur":X=qs;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=es;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Ju;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=$i;break;case Dg:case Og:case Mg:X=ol;break;case Pg:X=y;break;case"scroll":case"scrollend":X=Wa;break;case"wheel":X=A;break;case"copy":case"cut":case"paste":X=ec;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=cl;break;case"toggle":case"beforetoggle":X=W}var De=(i&4)!==0,gt=!De&&(t==="scroll"||t==="scrollend"),j=De?$!==null?$+"Capture":null:$;De=[];for(var L=G,q;L!==null;){var te=L;if(q=te.stateNode,te=te.tag,te!==5&&te!==26&&te!==27||q===null||j===null||(te=Ki(L,j),te!=null&&De.push(ql(L,te,q))),gt)break;L=L.return}0<De.length&&($=new X($,ke,null,s,Z),ie.push({event:$,listeners:De}))}}if((i&7)===0){e:{if($=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",$&&s!==il&&(ke=s.relatedTarget||s.fromElement)&&(ve(ke)||ke[ce]))break e;if((X||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,X?(ke=s.relatedTarget||s.toElement,X=G,ke=ke?ve(ke):null,ke!==null&&(gt=u(ke),De=ke.tag,ke!==gt||De!==5&&De!==27&&De!==6)&&(ke=null)):(X=null,ke=G),X!==ke)){if(De=es,te="onMouseLeave",j="onMouseEnter",L="mouse",(t==="pointerout"||t==="pointerover")&&(De=cl,te="onPointerLeave",j="onPointerEnter",L="pointer"),gt=X==null?$:rt(X),q=ke==null?$:rt(ke),$=new De(te,L+"leave",X,s,Z),$.target=gt,$.relatedTarget=q,te=null,ve(Z)===G&&(De=new De(j,L+"enter",ke,s,Z),De.target=q,De.relatedTarget=gt,te=De),gt=te,X&&ke)t:{for(De=X,j=ke,L=0,q=De;q;q=vo(q))L++;for(q=0,te=j;te;te=vo(te))q++;for(;0<L-q;)De=vo(De),L--;for(;0<q-L;)j=vo(j),q--;for(;L--;){if(De===j||j!==null&&De===j.alternate)break t;De=vo(De),j=vo(j)}De=null}else De=null;X!==null&&t_(ie,$,X,De,!1),ke!==null&&gt!==null&&t_(ie,gt,ke,De,!0)}}e:{if($=G?rt(G):window,X=$.nodeName&&$.nodeName.toLowerCase(),X==="select"||X==="input"&&$.type==="file")var be=Eg;else if(vg($))if(Tg)be=Kw;else{be=Fw;var Ke=qw}else X=$.nodeName,!X||X.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?G&&zs(G.elementType)&&(be=Eg):be=Gw;if(be&&(be=be(t,G))){_g(ie,be,s,Z);break e}Ke&&Ke(t,$,G),t==="focusout"&&G&&$.type==="number"&&G.memoizedProps.value!=null&&tl($,"number",$.value)}switch(Ke=G?rt(G):window,t){case"focusin":(vg(Ke)||Ke.contentEditable==="true")&&(Ys=Ke,Rf=G,pl=null);break;case"focusout":pl=Rf=Ys=null;break;case"mousedown":xf=!0;break;case"contextmenu":case"mouseup":case"dragend":xf=!1,Cg(ie,s,Z);break;case"selectionchange":if($w)break;case"keydown":case"keyup":Cg(ie,s,Z)}var Ie;if(ze)e:{switch(t){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Mr?Dr(t,s)&&(Oe="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(Oe="onCompositionStart");Oe&&(Lt&&s.locale!=="ko"&&(Mr||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Mr&&(Ie=Wu()):(lr=Z,Tt="value"in lr?lr.value:lr.textContent,Mr=!0)),Ke=Gc(G,Oe),0<Ke.length&&(Oe=new ul(Oe,t,null,s,Z),ie.push({event:Oe,listeners:Ke}),Ie?Oe.data=Ie:(Ie=Or(s),Ie!==null&&(Oe.data=Ie)))),(Ie=ut?hl(t,s):zw(t,s))&&(Oe=Gc(G,"onBeforeInput"),0<Oe.length&&(Ke=new ul("onBeforeInput","beforeinput",null,s,Z),ie.push({event:Ke,listeners:Oe}),Ke.data=Ie)),NS(ie,t,G,s,Z)}Zv(ie,i)})}function ql(t,i,s){return{instance:t,listener:i,currentTarget:s}}function Gc(t,i){for(var s=i+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Ki(t,s),f!=null&&l.unshift(ql(t,f,d)),f=Ki(t,i),f!=null&&l.push(ql(t,f,d))),t.tag===3)return l;t=t.return}return[]}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function t_(t,i,s,l,f){for(var d=i._reactName,E=[];s!==null&&s!==l;){var b=s,D=b.alternate,G=b.stateNode;if(b=b.tag,D!==null&&D===l)break;b!==5&&b!==26&&b!==27||G===null||(D=G,f?(G=Ki(s,d),G!=null&&E.unshift(ql(s,G,D))):f||(G=Ki(s,d),G!=null&&E.push(ql(s,G,D)))),s=s.return}E.length!==0&&t.push({event:i,listeners:E})}var PS=/\r\n?/g,kS=/\u0000|\uFFFD/g;function n_(t){return(typeof t=="string"?t:""+t).replace(PS,`
`).replace(kS,"")}function r_(t,i){return i=n_(i),n_(t)===i}function Kc(){}function pt(t,i,s,l,f,d){switch(s){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||or(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&or(t,""+l);break;case"className":sr(t,"class",l);break;case"tabIndex":sr(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":sr(t,s,l);break;case"style":rl(t,l,d);break;case"data":if(i!=="object"){sr(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||s!=="href")){t.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Nr(""+l),t.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(i!=="input"&&pt(t,i,"name",f.name,f,null),pt(t,i,"formEncType",f.formEncType,f,null),pt(t,i,"formMethod",f.formMethod,f,null),pt(t,i,"formTarget",f.formTarget,f,null)):(pt(t,i,"encType",f.encType,f,null),pt(t,i,"method",f.method,f,null),pt(t,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(s);break}l=Nr(""+l),t.setAttribute(s,l);break;case"onClick":l!=null&&(t.onclick=Kc);break;case"onScroll":l!=null&&Xe("scroll",t);break;case"onScrollEnd":l!=null&&Xe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}s=Nr(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""+l):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":l===!0?t.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(s,l):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(s,l):t.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(s):t.setAttribute(s,l);break;case"popover":Xe("beforetoggle",t),Xe("toggle",t),In(t,"popover",l);break;case"xlinkActuate":cn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":cn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":cn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":cn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":cn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":cn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":cn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":cn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":cn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":In(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=$u.get(s)||s,In(t,s,l))}}function Xd(t,i,s,l,f,d){switch(s){case"style":rl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(s=l.__html,s!=null){if(f.children!=null)throw Error(a(60));t.innerHTML=s}}break;case"children":typeof l=="string"?or(t,l):(typeof l=="number"||typeof l=="bigint")&&or(t,""+l);break;case"onScroll":l!=null&&Xe("scroll",t);break;case"onScrollEnd":l!=null&&Xe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Kc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!it.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(f=s.endsWith("Capture"),i=s.slice(2,f?s.length-7:void 0),d=t[se]||null,d=d!=null?d[s]:null,typeof d=="function"&&t.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(i,l,f);break e}s in t?t[s]=l:l===!0?t.setAttribute(s,""):In(t,s,l)}}}function dn(t,i,s){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",t),Xe("load",t);var l=!1,f=!1,d;for(d in s)if(s.hasOwnProperty(d)){var E=s[d];if(E!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:pt(t,i,d,E,s,null)}}f&&pt(t,i,"srcSet",s.srcSet,s,null),l&&pt(t,i,"src",s.src,s,null);return;case"input":Xe("invalid",t);var b=d=E=f=null,D=null,G=null;for(l in s)if(s.hasOwnProperty(l)){var Z=s[l];if(Z!=null)switch(l){case"name":f=Z;break;case"type":E=Z;break;case"checked":D=Z;break;case"defaultChecked":G=Z;break;case"value":d=Z;break;case"defaultValue":b=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(a(137,i));break;default:pt(t,i,l,Z,s,null)}}el(t,d,b,D,G,E,f,!1),qi(t);return;case"select":Xe("invalid",t),l=E=d=null;for(f in s)if(s.hasOwnProperty(f)&&(b=s[f],b!=null))switch(f){case"value":d=b;break;case"defaultValue":E=b;break;case"multiple":l=b;default:pt(t,i,f,b,s,null)}i=d,s=E,t.multiple=!!l,i!=null?Fi(t,!!l,i,!1):s!=null&&Fi(t,!!l,s,!0);return;case"textarea":Xe("invalid",t),d=f=l=null;for(E in s)if(s.hasOwnProperty(E)&&(b=s[E],b!=null))switch(E){case"value":l=b;break;case"defaultValue":f=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(a(91));break;default:pt(t,i,E,b,s,null)}Yu(t,l,f,d),qi(t);return;case"option":for(D in s)if(s.hasOwnProperty(D)&&(l=s[D],l!=null))switch(D){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:pt(t,i,D,l,s,null)}return;case"dialog":Xe("beforetoggle",t),Xe("toggle",t),Xe("cancel",t),Xe("close",t);break;case"iframe":case"object":Xe("load",t);break;case"video":case"audio":for(l=0;l<Hl.length;l++)Xe(Hl[l],t);break;case"image":Xe("error",t),Xe("load",t);break;case"details":Xe("toggle",t);break;case"embed":case"source":case"link":Xe("error",t),Xe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in s)if(s.hasOwnProperty(G)&&(l=s[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:pt(t,i,G,l,s,null)}return;default:if(zs(i)){for(Z in s)s.hasOwnProperty(Z)&&(l=s[Z],l!==void 0&&Xd(t,i,Z,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&pt(t,i,b,l,s,null))}function VS(t,i,s,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,E=null,b=null,D=null,G=null,Z=null;for(X in s){var ie=s[X];if(s.hasOwnProperty(X)&&ie!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":D=ie;default:l.hasOwnProperty(X)||pt(t,i,X,null,l,ie)}}for(var $ in l){var X=l[$];if(ie=s[$],l.hasOwnProperty($)&&(X!=null||ie!=null))switch($){case"type":d=X;break;case"name":f=X;break;case"checked":G=X;break;case"defaultChecked":Z=X;break;case"value":E=X;break;case"defaultValue":b=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(a(137,i));break;default:X!==ie&&pt(t,i,$,X,l,ie)}}Zo(t,E,b,D,G,Z,d,f);return;case"select":X=E=b=$=null;for(d in s)if(D=s[d],s.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":X=D;default:l.hasOwnProperty(d)||pt(t,i,d,null,l,D)}for(f in l)if(d=l[f],D=s[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":$=d;break;case"defaultValue":b=d;break;case"multiple":E=d;default:d!==D&&pt(t,i,f,d,l,D)}i=b,s=E,l=X,$!=null?Fi(t,!!s,$,!1):!!l!=!!s&&(i!=null?Fi(t,!!s,i,!0):Fi(t,!!s,s?[]:"",!1));return;case"textarea":X=$=null;for(b in s)if(f=s[b],s.hasOwnProperty(b)&&f!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:pt(t,i,b,null,l,f)}for(E in l)if(f=l[E],d=s[E],l.hasOwnProperty(E)&&(f!=null||d!=null))switch(E){case"value":$=f;break;case"defaultValue":X=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==d&&pt(t,i,E,f,l,d)}Ku(t,$,X);return;case"option":for(var ke in s)if($=s[ke],s.hasOwnProperty(ke)&&$!=null&&!l.hasOwnProperty(ke))switch(ke){case"selected":t.selected=!1;break;default:pt(t,i,ke,null,l,$)}for(D in l)if($=l[D],X=s[D],l.hasOwnProperty(D)&&$!==X&&($!=null||X!=null))switch(D){case"selected":t.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:pt(t,i,D,$,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in s)$=s[De],s.hasOwnProperty(De)&&$!=null&&!l.hasOwnProperty(De)&&pt(t,i,De,null,l,$);for(G in l)if($=l[G],X=s[G],l.hasOwnProperty(G)&&$!==X&&($!=null||X!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(a(137,i));break;default:pt(t,i,G,$,l,X)}return;default:if(zs(i)){for(var gt in s)$=s[gt],s.hasOwnProperty(gt)&&$!==void 0&&!l.hasOwnProperty(gt)&&Xd(t,i,gt,void 0,l,$);for(Z in l)$=l[Z],X=s[Z],!l.hasOwnProperty(Z)||$===X||$===void 0&&X===void 0||Xd(t,i,Z,$,l,X);return}}for(var j in s)$=s[j],s.hasOwnProperty(j)&&$!=null&&!l.hasOwnProperty(j)&&pt(t,i,j,null,l,$);for(ie in l)$=l[ie],X=s[ie],!l.hasOwnProperty(ie)||$===X||$==null&&X==null||pt(t,i,ie,$,l,X)}var Wd=null,Jd=null;function Yc(t){return t.nodeType===9?t:t.ownerDocument}function i_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function Zd(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var em=null;function LS(){var t=window.event;return t&&t.type==="popstate"?t===em?!1:(em=t,!0):(em=null,!1)}var s_=typeof setTimeout=="function"?setTimeout:void 0,US=typeof clearTimeout=="function"?clearTimeout:void 0,o_=typeof Promise=="function"?Promise:void 0,jS=typeof queueMicrotask=="function"?queueMicrotask:typeof o_<"u"?function(t){return o_.resolve(null).then(t).catch(zS)}:s_;function zS(t){setTimeout(function(){throw t})}function ca(t){return t==="head"}function l_(t,i){var s=i,l=0,f=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(0<l&&8>l){s=l;var E=t.ownerDocument;if(s&1&&Fl(E.documentElement),s&2&&Fl(E.body),s&4)for(s=E.head,Fl(s),E=s.firstChild;E;){var b=E.nextSibling,D=E.nodeName;E[xe]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||s.removeChild(E),E=b}}if(f===0){t.removeChild(d),Jl(i);return}f--}else s==="$"||s==="$?"||s==="$!"?f++:l=s.charCodeAt(0)-48;else l=0;s=d}while(s);Jl(i)}function tm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var s=i;switch(i=i.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":tm(s),Ae(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function BS(t,i,s,l){for(;t.nodeType===1;){var f=s;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[xe])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=Vr(t.nextSibling),t===null)break}return null}function HS(t,i,s){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=Vr(t.nextSibling),t===null))return null;return t}function nm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function qS(t,i){var s=t.ownerDocument;if(t.data!=="$?"||s.readyState==="complete")i();else{var l=function(){i(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Vr(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return t}var rm=null;function u_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return t;i--}else s==="/$"&&i++}t=t.previousSibling}return null}function c_(t,i,s){switch(i=Yc(s),t){case"html":if(t=i.documentElement,!t)throw Error(a(452));return t;case"head":if(t=i.head,!t)throw Error(a(453));return t;case"body":if(t=i.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Fl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);Ae(t)}var pr=new Map,h_=new Set;function $c(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var xi=he.d;he.d={f:FS,r:GS,D:KS,C:YS,L:$S,m:QS,X:WS,S:XS,M:JS};function FS(){var t=xi.f(),i=jc();return t||i}function GS(t){var i=je(t);i!==null&&i.tag===5&&i.type==="form"?Dy(i):xi.r(t)}var _o=typeof document>"u"?null:document;function f_(t,i,s){var l=_o;if(l&&typeof i=="string"&&i){var f=tn(i);f='link[rel="'+t+'"][href="'+f+'"]',typeof s=="string"&&(f+='[crossorigin="'+s+'"]'),h_.has(f)||(h_.add(f),t={rel:t,crossOrigin:s,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),dn(i,"link",t),$e(i),l.head.appendChild(i)))}}function KS(t){xi.D(t),f_("dns-prefetch",t,null)}function YS(t,i){xi.C(t,i),f_("preconnect",t,i)}function $S(t,i,s){xi.L(t,i,s);var l=_o;if(l&&t&&i){var f='link[rel="preload"][as="'+tn(i)+'"]';i==="image"&&s&&s.imageSrcSet?(f+='[imagesrcset="'+tn(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(f+='[imagesizes="'+tn(s.imageSizes)+'"]')):f+='[href="'+tn(t)+'"]';var d=f;switch(i){case"style":d=Eo(t);break;case"script":d=To(t)}pr.has(d)||(t=v({rel:"preload",href:i==="image"&&s&&s.imageSrcSet?void 0:t,as:i},s),pr.set(d,t),l.querySelector(f)!==null||i==="style"&&l.querySelector(Gl(d))||i==="script"&&l.querySelector(Kl(d))||(i=l.createElement("link"),dn(i,"link",t),$e(i),l.head.appendChild(i)))}}function QS(t,i){xi.m(t,i);var s=_o;if(s&&t){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+tn(l)+'"][href="'+tn(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=To(t)}if(!pr.has(d)&&(t=v({rel:"modulepreload",href:t},i),pr.set(d,t),s.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Kl(d)))return}l=s.createElement("link"),dn(l,"link",t),$e(l),s.head.appendChild(l)}}}function XS(t,i,s){xi.S(t,i,s);var l=_o;if(l&&t){var f=yt(l).hoistableStyles,d=Eo(t);i=i||"default";var E=f.get(d);if(!E){var b={loading:0,preload:null};if(E=l.querySelector(Gl(d)))b.loading=5;else{t=v({rel:"stylesheet",href:t,"data-precedence":i},s),(s=pr.get(d))&&im(t,s);var D=E=l.createElement("link");$e(D),dn(D,"link",t),D._p=new Promise(function(G,Z){D.onload=G,D.onerror=Z}),D.addEventListener("load",function(){b.loading|=1}),D.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Qc(E,i,l)}E={type:"stylesheet",instance:E,count:1,state:b},f.set(d,E)}}}function WS(t,i){xi.X(t,i);var s=_o;if(s&&t){var l=yt(s).hoistableScripts,f=To(t),d=l.get(f);d||(d=s.querySelector(Kl(f)),d||(t=v({src:t,async:!0},i),(i=pr.get(f))&&am(t,i),d=s.createElement("script"),$e(d),dn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function JS(t,i){xi.M(t,i);var s=_o;if(s&&t){var l=yt(s).hoistableScripts,f=To(t),d=l.get(f);d||(d=s.querySelector(Kl(f)),d||(t=v({src:t,async:!0,type:"module"},i),(i=pr.get(f))&&am(t,i),d=s.createElement("script"),$e(d),dn(d,"link",t),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function d_(t,i,s,l){var f=(f=Ne.current)?$c(f):null;if(!f)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(i=Eo(s.href),s=yt(f).hoistableStyles,l=s.get(i),l||(l={type:"style",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Eo(s.href);var d=yt(f).hoistableStyles,E=d.get(t);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,E),(d=f.querySelector(Gl(t)))&&!d._p&&(E.instance=d,E.state.loading=5),pr.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},pr.set(t,s),d||ZS(f,t,s,E.state))),i&&l===null)throw Error(a(528,""));return E}if(i&&l!==null)throw Error(a(529,""));return null;case"script":return i=s.async,s=s.src,typeof s=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=To(s),s=yt(f).hoistableScripts,l=s.get(i),l||(l={type:"script",instance:null,count:0,state:null},s.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function Eo(t){return'href="'+tn(t)+'"'}function Gl(t){return'link[rel="stylesheet"]['+t+"]"}function m_(t){return v({},t,{"data-precedence":t.precedence,precedence:null})}function ZS(t,i,s,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),dn(i,"link",s),$e(i),t.head.appendChild(i))}function To(t){return'[src="'+tn(t)+'"]'}function Kl(t){return"script[async]"+t}function p_(t,i,s){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+tn(s.href)+'"]');if(l)return i.instance=l,$e(l),l;var f=v({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),$e(l),dn(l,"style",f),Qc(l,s.precedence,t),i.instance=l;case"stylesheet":f=Eo(s.href);var d=t.querySelector(Gl(f));if(d)return i.state.loading|=4,i.instance=d,$e(d),d;l=m_(s),(f=pr.get(f))&&im(l,f),d=(t.ownerDocument||t).createElement("link"),$e(d);var E=d;return E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),dn(d,"link",l),i.state.loading|=4,Qc(d,s.precedence,t),i.instance=d;case"script":return d=To(s.src),(f=t.querySelector(Kl(d)))?(i.instance=f,$e(f),f):(l=s,(f=pr.get(d))&&(l=v({},s),am(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),$e(f),dn(f,"link",l),t.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Qc(l,s.precedence,t));return i.instance}function Qc(t,i,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,E=0;E<l.length;E++){var b=l[E];if(b.dataset.precedence===i)d=b;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=s.nodeType===9?s.head:s,i.insertBefore(t,i.firstChild))}function im(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function am(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Xc=null;function g_(t,i,s){if(Xc===null){var l=new Map,f=Xc=new Map;f.set(s,l)}else f=Xc,l=f.get(s),l||(l=new Map,f.set(s,l));if(l.has(t))return l;for(l.set(t,null),s=s.getElementsByTagName(t),f=0;f<s.length;f++){var d=s[f];if(!(d[xe]||d[K]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var E=d.getAttribute(i)||"";E=t+E;var b=l.get(E);b?b.push(d):l.set(E,[d])}}return l}function y_(t,i,s){t=t.ownerDocument||t,t.head.insertBefore(s,i==="title"?t.querySelector("head > title"):null)}function eA(t,i,s){if(s===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function v_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var Yl=null;function tA(){}function nA(t,i,s){if(Yl===null)throw Error(a(475));var l=Yl;if(i.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var f=Eo(s.href),d=t.querySelector(Gl(f));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Wc.bind(l),t.then(l,l)),i.state.loading|=4,i.instance=d,$e(d);return}d=t.ownerDocument||t,s=m_(s),(f=pr.get(f))&&im(s,f),d=d.createElement("link"),$e(d);var E=d;E._p=new Promise(function(b,D){E.onload=b,E.onerror=D}),dn(d,"link",s),i.instance=d}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(i,t),(t=i.state.preload)&&(i.state.loading&3)===0&&(l.count++,i=Wc.bind(l),t.addEventListener("load",i),t.addEventListener("error",i))}}function rA(){if(Yl===null)throw Error(a(475));var t=Yl;return t.stylesheets&&t.count===0&&sm(t,t.stylesheets),0<t.count?function(i){var s=setTimeout(function(){if(t.stylesheets&&sm(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(s)}}:null}function Wc(){if(this.count--,this.count===0){if(this.stylesheets)sm(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Jc=null;function sm(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Jc=new Map,i.forEach(iA,t),Jc=null,Wc.call(t))}function iA(t,i){if(!(i.state.loading&4)){var s=Jc.get(t);if(s)var l=s.get(null);else{s=new Map,Jc.set(t,s);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var E=f[d];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(s.set(E.dataset.precedence,E),l=E)}l&&s.set(null,l)}f=i.instance,E=f.getAttribute("data-precedence"),d=s.get(E)||l,d===l&&s.set(null,f),s.set(E,f),this.count++,l=Wc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),i.state.loading|=4}}var $l={$$typeof:ue,Provider:null,Consumer:null,_currentValue:ge,_currentValue2:ge,_threadCount:0};function aA(t,i,s,l,f,d,E,b){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zi(0),this.hiddenUpdates=zi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=b,this.incompleteTransitions=new Map}function __(t,i,s,l,f,d,E,b,D,G,Z,ie){return t=new aA(t,i,s,E,b,D,G,ie),i=1,d===!0&&(i|=24),d=Wn(3,null,null,i),t.current=d,d.stateNode=t,i=Bf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:i},Gf(d),t}function E_(t){return t?(t=Ws,t):Ws}function T_(t,i,s,l,f,d){f=E_(f),l.context===null?l.context=f:l.pendingContext=f,l=Wi(i),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Ji(t,l,i),s!==null&&(nr(s,t,i),Sl(s,t,i))}function b_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<i?s:i}}function om(t,i){b_(t,i),(t=t.alternate)&&b_(t,i)}function w_(t){if(t.tag===13){var i=Xs(t,67108864);i!==null&&nr(i,t,67108864),om(t,67108864)}}var Zc=!0;function sA(t,i,s,l){var f=Y.T;Y.T=null;var d=he.p;try{he.p=2,lm(t,i,s,l)}finally{he.p=d,Y.T=f}}function oA(t,i,s,l){var f=Y.T;Y.T=null;var d=he.p;try{he.p=8,lm(t,i,s,l)}finally{he.p=d,Y.T=f}}function lm(t,i,s,l){if(Zc){var f=um(l);if(f===null)Qd(t,i,l,eh,s),A_(t,l);else if(uA(f,t,i,s,l))l.stopPropagation();else if(A_(t,l),i&4&&-1<lA.indexOf(t)){for(;f!==null;){var d=je(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var E=kn(d.pendingLanes);if(E!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;E;){var D=1<<31-un(E);b.entanglements[1]|=D,E&=~D}Xr(d),(ct&6)===0&&(Lc=ln()+500,Bl(0))}}break;case 13:b=Xs(d,2),b!==null&&nr(b,d,2),jc(),om(d,2)}if(d=um(l),d===null&&Qd(t,i,l,eh,s),d===f)break;f=d}f!==null&&l.stopPropagation()}else Qd(t,i,l,null,s)}}function um(t){return t=al(t),cm(t)}var eh=null;function cm(t){if(eh=null,t=ve(t),t!==null){var i=u(t);if(i===null)t=null;else{var s=i.tag;if(s===13){if(t=h(i),t!==null)return t;t=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return eh=t,null}function S_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vs()){case kt:return 2;case Bt:return 8;case Tr:case br:return 32;case wr:return 268435456;default:return 32}default:return 32}}var hm=!1,ha=null,fa=null,da=null,Ql=new Map,Xl=new Map,ma=[],lA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function A_(t,i){switch(t){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":Ql.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xl.delete(i.pointerId)}}function Wl(t,i,s,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=je(i),i!==null&&w_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),t)}function uA(t,i,s,l,f){switch(i){case"focusin":return ha=Wl(ha,t,i,s,l,f),!0;case"dragenter":return fa=Wl(fa,t,i,s,l,f),!0;case"mouseover":return da=Wl(da,t,i,s,l,f),!0;case"pointerover":var d=f.pointerId;return Ql.set(d,Wl(Ql.get(d)||null,t,i,s,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Xl.set(d,Wl(Xl.get(d)||null,t,i,s,l,f)),!0}return!1}function R_(t){var i=ve(t.target);if(i!==null){var s=u(i);if(s!==null){if(i=s.tag,i===13){if(i=h(s),i!==null){t.blockedOn=i,P(t.priority,function(){if(s.tag===13){var l=tr();l=Hr(l);var f=Xs(s,l);f!==null&&nr(f,s,l),om(s,l)}});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function th(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var s=um(t.nativeEvent);if(s===null){s=t.nativeEvent;var l=new s.constructor(s.type,s);il=l,s.target.dispatchEvent(l),il=null}else return i=je(s),i!==null&&w_(i),t.blockedOn=s,!1;i.shift()}return!0}function x_(t,i,s){th(t)&&s.delete(i)}function cA(){hm=!1,ha!==null&&th(ha)&&(ha=null),fa!==null&&th(fa)&&(fa=null),da!==null&&th(da)&&(da=null),Ql.forEach(x_),Xl.forEach(x_)}function nh(t,i){t.blockedOn===i&&(t.blockedOn=null,hm||(hm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,cA)))}var rh=null;function I_(t){rh!==t&&(rh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){rh===t&&(rh=null);for(var i=0;i<t.length;i+=3){var s=t[i],l=t[i+1],f=t[i+2];if(typeof l!="function"){if(cm(l||s)===null)continue;break}var d=je(s);d!==null&&(t.splice(i,3),i-=3,cd(d,{pending:!0,data:f,method:s.method,action:l},l,f))}}))}function Jl(t){function i(D){return nh(D,t)}ha!==null&&nh(ha,t),fa!==null&&nh(fa,t),da!==null&&nh(da,t),Ql.forEach(i),Xl.forEach(i);for(var s=0;s<ma.length;s++){var l=ma[s];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ma.length&&(s=ma[0],s.blockedOn===null);)R_(s),s.blockedOn===null&&ma.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var f=s[l],d=s[l+1],E=f[se]||null;if(typeof d=="function")E||I_(s);else if(E){var b=null;if(d&&d.hasAttribute("formAction")){if(f=d,E=d[se]||null)b=E.formAction;else if(cm(f)!==null)continue}else b=E.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),I_(s)}}}function fm(t){this._internalRoot=t}ih.prototype.render=fm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(a(409));var s=i.current,l=tr();T_(s,l,t,i,null,null)},ih.prototype.unmount=fm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;T_(t.current,2,null,t,null,null),jc(),i[ce]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var i=Cr();t={blockedOn:null,target:t,priority:i};for(var s=0;s<ma.length&&i!==0&&i<ma[s].priority;s++);ma.splice(s,0,t),s===0&&R_(t)}};var C_=e.version;if(C_!=="19.1.1")throw Error(a(527,C_,"19.1.1"));he.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=p(i),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var hA={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:Y,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ah.isDisabled&&ah.supportsFiber)try{Zt=ah.inject(hA),_t=ah}catch{}}return eu.createRoot=function(t,i){if(!o(t))throw Error(a(299));var s=!1,l="",f=Gy,d=Ky,E=Yy,b=null;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(E=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(b=i.unstable_transitionCallbacks)),i=__(t,1,!1,null,null,s,l,f,d,E,b,null),t[ce]=i.current,$d(t),new fm(i)},eu.hydrateRoot=function(t,i,s){if(!o(t))throw Error(a(299));var l=!1,f="",d=Gy,E=Ky,b=Yy,D=null,G=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(f=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(E=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(D=s.unstable_transitionCallbacks),s.formState!==void 0&&(G=s.formState)),i=__(t,1,!0,i,s??null,l,f,d,E,b,D,G),i.context=E_(null),s=i.current,l=tr(),l=Hr(l),f=Wi(l),f.callback=null,Ji(s,f,l),s=l,i.current.lanes=s,xt(i,s),Xr(i),t[ce]=i.current,$d(t),new ih(i)},eu.version="19.1.1",eu}var j_;function EA(){if(j_)return pm.exports;j_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),pm.exports=_A(),pm.exports}var TA=EA();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var BE=r=>{throw TypeError(r)},bA=(r,e,n)=>e.has(r)||BE("Cannot "+n),_m=(r,e,n)=>(bA(r,e,"read from private field"),n?n.call(r):e.get(r)),wA=(r,e,n)=>e.has(r)?BE("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,n),z_="popstate";function SA(r={}){function e(a,o){let{pathname:u,search:h,hash:m}=a.location;return yu("",{pathname:u,search:h,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(a,o){return typeof o=="string"?o:Na(o)}return RA(e,n,null,r)}function We(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Yt(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AA(){return Math.random().toString(36).substring(2,10)}function B_(r,e){return{usr:r.state,key:r.key,idx:e}}function yu(r,e,n=null,a){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?La(e):e,state:n,key:e&&e.key||a||AA()}}function Na({pathname:r="/",search:e="",hash:n=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(r+=n.charAt(0)==="#"?n:"#"+n),r}function La(r){let e={};if(r){let n=r.indexOf("#");n>=0&&(e.hash=r.substring(n),r=r.substring(0,n));let a=r.indexOf("?");a>=0&&(e.search=r.substring(a),r=r.substring(0,a)),r&&(e.pathname=r)}return e}function RA(r,e,n,a={}){let{window:o=document.defaultView,v5Compat:u=!1}=a,h=o.history,m="POP",p=null,g=v();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function v(){return(h.state||{idx:null}).idx}function T(){m="POP";let Q=v(),ne=Q==null?null:Q-g;g=Q,p&&p({action:m,location:J.location,delta:ne})}function S(Q,ne){m="PUSH";let oe=yu(J.location,Q,ne);g=v()+1;let ue=B_(oe,g),Re=J.createHref(oe);try{h.pushState(ue,"",Re)}catch(le){if(le instanceof DOMException&&le.name==="DataCloneError")throw le;o.location.assign(Re)}u&&p&&p({action:m,location:J.location,delta:1})}function N(Q,ne){m="REPLACE";let oe=yu(J.location,Q,ne);g=v();let ue=B_(oe,g),Re=J.createHref(oe);h.replaceState(ue,"",Re),u&&p&&p({action:m,location:J.location,delta:0})}function B(Q){return HE(Q)}let J={get action(){return m},get location(){return r(o,h)},listen(Q){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(z_,T),p=Q,()=>{o.removeEventListener(z_,T),p=null}},createHref(Q){return e(o,Q)},createURL:B,encodeLocation(Q){let ne=B(Q);return{pathname:ne.pathname,search:ne.search,hash:ne.hash}},push:S,replace:N,go(Q){return h.go(Q)}};return J}function HE(r,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),We(n,"No window.location.(origin|href) available to create URL");let a=typeof r=="string"?r:Na(r);return a=a.replace(/ $/,"%20"),!e&&a.startsWith("//")&&(a=n+a),new URL(a,n)}var au,H_=class{constructor(r){if(wA(this,au,new Map),r)for(let[e,n]of r)this.set(e,n)}get(r){if(_m(this,au).has(r))return _m(this,au).get(r);if(r.defaultValue!==void 0)return r.defaultValue;throw new Error("No value found for context")}set(r,e){_m(this,au).set(r,e)}};au=new WeakMap;var xA=new Set(["lazy","caseSensitive","path","id","index","children"]);function IA(r){return xA.has(r)}var CA=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function NA(r){return CA.has(r)}function DA(r){return r.index===!0}function vu(r,e,n=[],a={},o=!1){return r.map((u,h)=>{let m=[...n,String(h)],p=typeof u.id=="string"?u.id:m.join("-");if(We(u.index!==!0||!u.children,"Cannot specify children on an index route"),We(o||!a[p],`Found a route id collision on id "${p}".  Route id's must be globally unique within Data Router usages`),DA(u)){let g={...u,...e(u),id:p};return a[p]=g,g}else{let g={...u,...e(u),id:p,children:void 0};return a[p]=g,u.children&&(g.children=vu(u.children,e,m,a,o)),g}})}function ya(r,e,n="/"){return gh(r,e,n,!1)}function gh(r,e,n,a){let o=typeof e=="string"?La(e):e,u=_r(o.pathname||"/",n);if(u==null)return null;let h=qE(r);MA(h);let m=null;for(let p=0;m==null&&p<h.length;++p){let g=FA(u);m=HA(h[p],g,a)}return m}function OA(r,e){let{route:n,pathname:a,params:o}=r;return{id:n.id,pathname:a,params:o,data:e[n.id],loaderData:e[n.id],handle:n.handle}}function qE(r,e=[],n=[],a="",o=!1){let u=(h,m,p=o,g)=>{let v={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:m,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(a)&&p)return;We(v.relativePath.startsWith(a),`Absolute route path "${v.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(a.length)}let T=Zr([a,v.relativePath]),S=n.concat(v);h.children&&h.children.length>0&&(We(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),qE(h.children,e,S,T,p)),!(h.path==null&&!h.index)&&e.push({path:T,score:zA(T,h.index),routesMeta:S})};return r.forEach((h,m)=>{if(h.path===""||!h.path?.includes("?"))u(h,m);else for(let p of FE(h.path))u(h,m,!0,p)}),e}function FE(r){let e=r.split("/");if(e.length===0)return[];let[n,...a]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(a.length===0)return o?[u,""]:[u];let h=FE(a.join("/")),m=[];return m.push(...h.map(p=>p===""?u:[u,p].join("/"))),o&&m.push(...h),m.map(p=>r.startsWith("/")&&p===""?"/":p)}function MA(r){r.sort((e,n)=>e.score!==n.score?n.score-e.score:BA(e.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var PA=/^:[\w-]+$/,kA=3,VA=2,LA=1,UA=10,jA=-2,q_=r=>r==="*";function zA(r,e){let n=r.split("/"),a=n.length;return n.some(q_)&&(a+=jA),e&&(a+=VA),n.filter(o=>!q_(o)).reduce((o,u)=>o+(PA.test(u)?kA:u===""?LA:UA),a)}function BA(r,e){return r.length===e.length&&r.slice(0,-1).every((a,o)=>a===e[o])?r[r.length-1]-e[e.length-1]:0}function HA(r,e,n=!1){let{routesMeta:a}=r,o={},u="/",h=[];for(let m=0;m<a.length;++m){let p=a[m],g=m===a.length-1,v=u==="/"?e:e.slice(u.length)||"/",T=Dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),S=p.route;if(!T&&g&&n&&!a[a.length-1].route.index&&(T=Dh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Zr([u,T.pathname]),pathnameBase:$A(Zr([u,T.pathnameBase])),route:S}),T.pathnameBase!=="/"&&(u=Zr([u,T.pathnameBase]))}return h}function Dh(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[n,a]=qA(r.path,r.caseSensitive,r.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:a.reduce((g,{paramName:v,isOptional:T},S)=>{if(v==="*"){let B=m[S]||"";h=u.slice(0,u.length-B.length).replace(/(.)\/+$/,"$1")}const N=m[S];return T&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:r}}function qA(r,e=!1,n=!0){Yt(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let a=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,m,p)=>(a.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(a.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),a]}function FA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Yt(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function _r(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,a=r.charAt(n);return a&&a!=="/"?null:r.slice(n)||"/"}function GA({basename:r,pathname:e}){return e==="/"?r:Zr([r,e])}function KA(r,e="/"){let{pathname:n,search:a="",hash:o=""}=typeof r=="string"?La(r):r;return{pathname:n?n.startsWith("/")?n:YA(n,e):e,search:QA(a),hash:XA(o)}}function YA(r,e){let n=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Em(r,e,n,a){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function GE(r){return r.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function gp(r){let e=GE(r);return e.map((n,a)=>a===e.length-1?n.pathname:n.pathnameBase)}function yp(r,e,n,a=!1){let o;typeof r=="string"?o=La(r):(o={...r},We(!o.pathname||!o.pathname.includes("?"),Em("?","pathname","search",o)),We(!o.pathname||!o.pathname.includes("#"),Em("#","pathname","hash",o)),We(!o.search||!o.search.includes("#"),Em("#","search","hash",o)));let u=r===""||o.pathname==="",h=u?"/":o.pathname,m;if(h==null)m=n;else{let T=e.length-1;if(!a&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),T-=1;o.pathname=S.join("/")}m=T>=0?e[T]:"/"}let p=KA(o,m),g=h&&h!=="/"&&h.endsWith("/"),v=(u||h===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Zr=r=>r.join("/").replace(/\/\/+/g,"/"),$A=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),QA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,XA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,Oh=class{constructor(r,e,n,a=!1){this.status=r,this.statusText=e||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function _u(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var KE=["POST","PUT","PATCH","DELETE"],WA=new Set(KE),JA=["GET",...KE],ZA=new Set(JA),eR=new Set([301,302,303,307,308]),tR=new Set([307,308]),Tm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},nR={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},rR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vp=r=>rR.test(r),iR=r=>({hasErrorBoundary:!!r.hasErrorBoundary}),YE="remix-router-transitions",$E=Symbol("ResetLoaderData");function aR(r){const e=r.window?r.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";We(r.routes.length>0,"You must provide a non-empty routes array to createRouter");let a=r.hydrationRouteProperties||[],o=r.mapRouteProperties||iR,u={},h=vu(r.routes,o,void 0,u),m,p=r.basename||"/";p.startsWith("/")||(p=`/${p}`);let g=r.dataStrategy||cR,v={...r.future},T=null,S=new Set,N=null,B=null,J=null,Q=r.hydrationData!=null,ne=ya(h,r.history.location,p),oe=!1,ue=null,Re;if(ne==null&&!r.patchRoutesOnNavigation){let P=gr(404,{pathname:r.history.location.pathname}),{matches:z,route:K}=sh(h);Re=!0,ne=z,ue={[K.id]:P}}else if(ne&&!r.hydrationData&&$n(ne,h,r.history.location.pathname).active&&(ne=null),ne)if(ne.some(P=>P.route.lazy))Re=!1;else if(!ne.some(P=>_p(P.route)))Re=!0;else{let P=r.hydrationData?r.hydrationData.loaderData:null,z=r.hydrationData?r.hydrationData.errors:null;if(z){let K=ne.findIndex(se=>z[se.route.id]!==void 0);Re=ne.slice(0,K+1).every(se=>!Um(se.route,P,z))}else Re=ne.every(K=>!Um(K.route,P,z))}else{Re=!1,ne=[];let P=$n(null,h,r.history.location.pathname);P.active&&P.matches&&(oe=!0,ne=P.matches)}let le,V={historyAction:r.history.action,location:r.history.location,matches:ne,initialized:Re,navigation:Tm,restoreScrollPosition:r.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:r.hydrationData&&r.hydrationData.loaderData||{},actionData:r.hydrationData&&r.hydrationData.actionData||null,errors:r.hydrationData&&r.hydrationData.errors||ue,fetchers:new Map,blockers:new Map},x="POP",w=!1,R,O=!1,k=new Map,U=null,C=!1,Ve=!1,Ye=new Set,Y=new Map,he=0,ge=-1,Ue=new Map,M=new Set,ee=new Map,me=new Map,fe=new Set,Ee=new Map,He,Ne=null;function $t(){if(T=r.history.listen(({action:P,location:z,delta:K})=>{if(He){He(),He=void 0;return}Yt(Ee.size===0||K!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let se=ji({currentLocation:V.location,nextLocation:z,historyAction:P});if(se&&K!=null){let ce=new Promise(Te=>{He=Te});r.history.go(K*-1),xr(se,{state:"blocked",location:z,proceed(){xr(se,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),ce.then(()=>r.history.go(K))},reset(){let Te=new Map(V.blockers);Te.set(se,tu),Ot({blockers:Te})}});return}return Mn(P,z)}),n){AR(e,k);let P=()=>RR(e,k);e.addEventListener("pagehide",P),U=()=>e.removeEventListener("pagehide",P)}return V.initialized||Mn("POP",V.location,{initialHydration:!0}),le}function ot(){T&&T(),U&&U(),S.clear(),R&&R.abort(),V.fetchers.forEach((P,z)=>Ba(z)),V.blockers.forEach((P,z)=>Rr(z))}function Gn(P){return S.add(P),()=>S.delete(P)}function Ot(P,z={}){P.matches&&(P.matches=P.matches.map(ce=>{let Te=u[ce.route.id],we=ce.route;return we.element!==Te.element||we.errorElement!==Te.errorElement||we.hydrateFallbackElement!==Te.hydrateFallbackElement?{...ce,route:Te}:ce})),V={...V,...P};let K=[],se=[];V.fetchers.forEach((ce,Te)=>{ce.state==="idle"&&(fe.has(Te)?K.push(Te):se.push(Te))}),fe.forEach(ce=>{!V.fetchers.has(ce)&&!Y.has(ce)&&K.push(ce)}),[...S].forEach(ce=>ce(V,{deletedFetchers:K,viewTransitionOpts:z.viewTransitionOpts,flushSync:z.flushSync===!0})),K.forEach(ce=>Ba(ce)),se.forEach(ce=>V.fetchers.delete(ce))}function Kn(P,z,{flushSync:K}={}){let se=V.actionData!=null&&V.navigation.formMethod!=null&&qn(V.navigation.formMethod)&&V.navigation.state==="loading"&&P.state?._isRedirect!==!0,ce;z.actionData?Object.keys(z.actionData).length>0?ce=z.actionData:ce=null:se?ce=V.actionData:ce=null;let Te=z.loaderData?Z_(V.loaderData,z.loaderData,z.matches||[],z.errors):V.loaderData,we=V.blockers;we.size>0&&(we=new Map(we),we.forEach((Ae,ve)=>we.set(ve,tu)));let Se=C?!1:Ir(P,z.matches||V.matches),_e=w===!0||V.navigation.formMethod!=null&&qn(V.navigation.formMethod)&&P.state?._isRedirect!==!0;m&&(h=m,m=void 0),C||x==="POP"||(x==="PUSH"?r.history.push(P,P.state):x==="REPLACE"&&r.history.replace(P,P.state));let xe;if(x==="POP"){let Ae=k.get(V.location.pathname);Ae&&Ae.has(P.pathname)?xe={currentLocation:V.location,nextLocation:P}:k.has(P.pathname)&&(xe={currentLocation:P,nextLocation:V.location})}else if(O){let Ae=k.get(V.location.pathname);Ae?Ae.add(P.pathname):(Ae=new Set([P.pathname]),k.set(V.location.pathname,Ae)),xe={currentLocation:V.location,nextLocation:P}}Ot({...z,actionData:ce,loaderData:Te,historyAction:x,location:P,initialized:!0,navigation:Tm,revalidation:"idle",restoreScrollPosition:Se,preventScrollReset:_e,blockers:we},{viewTransitionOpts:xe,flushSync:K===!0}),x="POP",w=!1,O=!1,C=!1,Ve=!1,Ne?.resolve(),Ne=null}async function li(P,z){if(typeof P=="number"){r.history.go(P);return}let K=Lm(V.location,V.matches,p,P,z?.fromRouteId,z?.relative),{path:se,submission:ce,error:Te}=F_(!1,K,z),we=V.location,Se=yu(V.location,se,z&&z.state);Se={...Se,...r.history.encodeLocation(Se)};let _e=z&&z.replace!=null?z.replace:void 0,xe="PUSH";_e===!0?xe="REPLACE":_e===!1||ce!=null&&qn(ce.formMethod)&&ce.formAction===V.location.pathname+V.location.search&&(xe="REPLACE");let Ae=z&&"preventScrollReset"in z?z.preventScrollReset===!0:void 0,ve=(z&&z.flushSync)===!0,je=ji({currentLocation:we,nextLocation:Se,historyAction:xe});if(je){xr(je,{state:"blocked",location:Se,proceed(){xr(je,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),li(P,z)},reset(){let rt=new Map(V.blockers);rt.set(je,tu),Ot({blockers:rt})}});return}await Mn(xe,Se,{submission:ce,pendingError:Te,preventScrollReset:Ae,replace:z&&z.replace,enableViewTransition:z&&z.viewTransition,flushSync:ve})}function ui(){Ne||(Ne=xR()),Sr(),Ot({revalidation:"loading"});let P=Ne.promise;return V.navigation.state==="submitting"?P:V.navigation.state==="idle"?(Mn(V.historyAction,V.location,{startUninterruptedRevalidation:!0}),P):(Mn(x||V.historyAction,V.navigation.location,{overrideNavigation:V.navigation,enableViewTransition:O===!0}),P)}async function Mn(P,z,K){R&&R.abort(),R=null,x=P,C=(K&&K.startUninterruptedRevalidation)===!0,js(V.location,V.matches),w=(K&&K.preventScrollReset)===!0,O=(K&&K.enableViewTransition)===!0;let se=m||h,ce=K&&K.overrideNavigation,Te=K?.initialHydration&&V.matches&&V.matches.length>0&&!oe?V.matches:ya(se,z,p),we=(K&&K.flushSync)===!0;if(Te&&V.initialized&&!Ve&&vR(V.location,z)&&!(K&&K.submission&&qn(K.submission.formMethod))){Kn(z,{matches:Te},{flushSync:we});return}let Se=$n(Te,se,z.pathname);if(Se.active&&Se.matches&&(Te=Se.matches),!Te){let{error:$e,notFoundMatches:ft,route:it}=ar(z.pathname);Kn(z,{matches:ft,loaderData:{},errors:{[it.id]:$e}},{flushSync:we});return}R=new AbortController;let _e=bo(r.history,z,R.signal,K&&K.submission),xe=r.getContext?await r.getContext():new H_,Ae;if(K&&K.pendingError)Ae=[va(Te).route.id,{type:"error",error:K.pendingError}];else if(K&&K.submission&&qn(K.submission.formMethod)){let $e=await Jo(_e,z,K.submission,Te,xe,Se.active,K&&K.initialHydration===!0,{replace:K.replace,flushSync:we});if($e.shortCircuited)return;if($e.pendingActionResult){let[ft,it]=$e.pendingActionResult;if(rr(it)&&_u(it.error)&&it.error.status===404){R=null,Kn(z,{matches:$e.matches,loaderData:{},errors:{[ft]:it.error}});return}}Te=$e.matches||Te,Ae=$e.pendingActionResult,ce=bm(z,K.submission),we=!1,Se.active=!1,_e=bo(r.history,_e.url,_e.signal)}let{shortCircuited:ve,matches:je,loaderData:rt,errors:yt}=await za(_e,z,Te,xe,Se.active,ce,K&&K.submission,K&&K.fetcherSubmission,K&&K.replace,K&&K.initialHydration===!0,we,Ae);ve||(R=null,Kn(z,{matches:je||Te,...e0(Ae),loaderData:rt,errors:yt}))}async function Jo(P,z,K,se,ce,Te,we,Se={}){Sr();let _e=wR(z,K);if(Ot({navigation:_e},{flushSync:Se.flushSync===!0}),Te){let ve=await Hr(se,z.pathname,P.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){if(ve.partialMatches.length===0){let{matches:rt,route:yt}=sh(h);return{matches:rt,pendingActionResult:[yt.id,{type:"error",error:ve.error}]}}let je=va(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[je,{type:"error",error:ve.error}]}}else if(ve.matches)se=ve.matches;else{let{notFoundMatches:je,error:rt,route:yt}=ar(z.pathname);return{matches:je,pendingActionResult:[yt.id,{type:"error",error:rt}]}}}let xe,Ae=yh(se,z);if(!Ae.route.action&&!Ae.route.lazy)xe={type:"error",error:gr(405,{method:P.method,pathname:z.pathname,routeId:Ae.route.id})};else{let ve=xo(o,u,P,se,Ae,we?[]:a,ce),je=await wr(P,ve,ce,null);if(xe=je[Ae.route.id],!xe){for(let rt of se)if(je[rt.route.id]){xe=je[rt.route.id];break}}if(P.signal.aborted)return{shortCircuited:!0}}if(Es(xe)){let ve;return Se&&Se.replace!=null?ve=Se.replace:ve=X_(xe.response.headers.get("Location"),new URL(P.url),p)===V.location.pathname+V.location.search,await br(P,xe,!0,{submission:K,replace:ve}),{shortCircuited:!0}}if(rr(xe)){let ve=va(se,Ae.route.id);return(Se&&Se.replace)!==!0&&(x="PUSH"),{matches:se,pendingActionResult:[ve.route.id,xe,Ae.route.id]}}return{matches:se,pendingActionResult:[Ae.route.id,xe]}}async function za(P,z,K,se,ce,Te,we,Se,_e,xe,Ae,ve){let je=Te||bm(z,we),rt=we||Se||n0(je),yt=!C&&!xe;if(ce){if(yt){let Ct=ln(ve);Ot({navigation:je,...Ct!==void 0?{actionData:Ct}:{}},{flushSync:Ae})}let qe=await Hr(K,z.pathname,P.signal);if(qe.type==="aborted")return{shortCircuited:!0};if(qe.type==="error"){if(qe.partialMatches.length===0){let{matches:_n,route:Ln}=sh(h);return{matches:_n,loaderData:{},errors:{[Ln.id]:qe.error}}}let Ct=va(qe.partialMatches).route.id;return{matches:qe.partialMatches,loaderData:{},errors:{[Ct]:qe.error}}}else if(qe.matches)K=qe.matches;else{let{error:Ct,notFoundMatches:_n,route:Ln}=ar(z.pathname);return{matches:_n,loaderData:{},errors:{[Ln.id]:Ct}}}}let $e=m||h,{dsMatches:ft,revalidatingFetchers:it}=G_(P,se,o,u,r.history,V,K,rt,z,xe?[]:a,xe===!0,Ve,Ye,fe,ee,M,$e,p,r.patchRoutesOnNavigation!=null,ve);if(ge=++he,!r.dataStrategy&&!ft.some(qe=>qe.shouldLoad)&&!ft.some(qe=>qe.route.middleware&&qe.route.middleware.length>0)&&it.length===0){let qe=Ar();return Kn(z,{matches:K,loaderData:{},errors:ve&&rr(ve[1])?{[ve[0]]:ve[1].error}:null,...e0(ve),...qe?{fetchers:new Map(V.fetchers)}:{}},{flushSync:Ae}),{shortCircuited:!0}}if(yt){let qe={};if(!ce){qe.navigation=je;let Ct=ln(ve);Ct!==void 0&&(qe.actionData=Ct)}it.length>0&&(qe.fetchers=Vs(it)),Ot(qe,{flushSync:Ae})}it.forEach(qe=>{Pn(qe.key),qe.controller&&Y.set(qe.key,qe.controller)});let en=()=>it.forEach(qe=>Pn(qe.key));R&&R.signal.addEventListener("abort",en);let{loaderResults:yn,fetcherResults:vn}=await Ls(ft,it,P,se);if(P.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",en),it.forEach(qe=>Y.delete(qe.key));let Vt=oh(yn);if(Vt)return await br(P,Vt.result,!0,{replace:_e}),{shortCircuited:!0};if(Vt=oh(vn),Vt)return M.add(Vt.key),await br(P,Vt.result,!0,{replace:_e}),{shortCircuited:!0};let{loaderData:qr,errors:ci}=J_(V,K,yn,ve,it,vn);xe&&V.errors&&(ci={...V.errors,...ci});let In=Ar(),sr=kn(ge),cn=In||sr||it.length>0;return{matches:K,loaderData:qr,errors:ci,...cn?{fetchers:new Map(V.fetchers)}:{}}}function ln(P){if(P&&!rr(P[1]))return{[P[0]]:P[1].data};if(V.actionData)return Object.keys(V.actionData).length===0?null:V.actionData}function Vs(P){return P.forEach(z=>{let K=V.fetchers.get(z.key),se=nu(void 0,K?K.data:void 0);V.fetchers.set(z.key,se)}),new Map(V.fetchers)}async function kt(P,z,K,se){Pn(P);let ce=(se&&se.flushSync)===!0,Te=m||h,we=Lm(V.location,V.matches,p,K,z,se?.relative),Se=ya(Te,we,p),_e=$n(Se,Te,we);if(_e.active&&_e.matches&&(Se=_e.matches),!Se){_t(P,z,gr(404,{pathname:we}),{flushSync:ce});return}let{path:xe,submission:Ae,error:ve}=F_(!0,we,se);if(ve){_t(P,z,ve,{flushSync:ce});return}let je=r.getContext?await r.getContext():new H_,rt=(se&&se.preventScrollReset)===!0;if(Ae&&qn(Ae.formMethod)){await Bt(P,z,xe,Se,je,_e.active,ce,rt,Ae);return}ee.set(P,{routeId:z,path:xe}),await Tr(P,z,xe,Se,je,_e.active,ce,rt,Ae)}async function Bt(P,z,K,se,ce,Te,we,Se,_e){Sr(),ee.delete(P);let xe=V.fetchers.get(P);Zt(P,SR(_e,xe),{flushSync:we});let Ae=new AbortController,ve=bo(r.history,K,Ae.signal,_e);if(Te){let Et=await Hr(se,new URL(ve.url).pathname,ve.signal,P);if(Et.type==="aborted")return;if(Et.type==="error"){_t(P,z,Et.error,{flushSync:we});return}else if(Et.matches)se=Et.matches;else{_t(P,z,gr(404,{pathname:K}),{flushSync:we});return}}let je=yh(se,K);if(!je.route.action&&!je.route.lazy){let Et=gr(405,{method:_e.formMethod,pathname:K,routeId:z});_t(P,z,Et,{flushSync:we});return}Y.set(P,Ae);let rt=he,yt=xo(o,u,ve,se,je,a,ce),ft=(await wr(ve,yt,ce,P))[je.route.id];if(ve.signal.aborted){Y.get(P)===Ae&&Y.delete(P);return}if(fe.has(P)){if(Es(ft)||rr(ft)){Zt(P,Ii(void 0));return}}else{if(Es(ft))if(Y.delete(P),ge>rt){Zt(P,Ii(void 0));return}else return M.add(P),Zt(P,nu(_e)),br(ve,ft,!1,{fetcherSubmission:_e,preventScrollReset:Se});if(rr(ft)){_t(P,z,ft.error);return}}let it=V.navigation.location||V.location,en=bo(r.history,it,Ae.signal),yn=m||h,vn=V.navigation.state!=="idle"?ya(yn,V.navigation.location,p):V.matches;We(vn,"Didn't find any matches after fetcher action");let Vt=++he;Ue.set(P,Vt);let qr=nu(_e,ft.data);V.fetchers.set(P,qr);let{dsMatches:ci,revalidatingFetchers:In}=G_(en,ce,o,u,r.history,V,vn,_e,it,a,!1,Ve,Ye,fe,ee,M,yn,p,r.patchRoutesOnNavigation!=null,[je.route.id,ft]);In.filter(Et=>Et.key!==P).forEach(Et=>{let Bi=Et.key,Un=V.fetchers.get(Bi),St=nu(void 0,Un?Un.data:void 0);V.fetchers.set(Bi,St),Pn(Bi),Et.controller&&Y.set(Bi,Et.controller)}),Ot({fetchers:new Map(V.fetchers)});let sr=()=>In.forEach(Et=>Pn(Et.key));Ae.signal.addEventListener("abort",sr);let{loaderResults:cn,fetcherResults:qe}=await Ls(ci,In,en,ce);if(Ae.signal.aborted)return;if(Ae.signal.removeEventListener("abort",sr),Ue.delete(P),Y.delete(P),In.forEach(Et=>Y.delete(Et.key)),V.fetchers.has(P)){let Et=Ii(ft.data);V.fetchers.set(P,Et)}let Ct=oh(cn);if(Ct)return br(en,Ct.result,!1,{preventScrollReset:Se});if(Ct=oh(qe),Ct)return M.add(Ct.key),br(en,Ct.result,!1,{preventScrollReset:Se});let{loaderData:_n,errors:Ln}=J_(V,vn,cn,void 0,In,qe);kn(Vt),V.navigation.state==="loading"&&Vt>ge?(We(x,"Expected pending action"),R&&R.abort(),Kn(V.navigation.location,{matches:vn,loaderData:_n,errors:Ln,fetchers:new Map(V.fetchers)})):(Ot({errors:Ln,loaderData:Z_(V.loaderData,_n,vn,Ln),fetchers:new Map(V.fetchers)}),Ve=!1)}async function Tr(P,z,K,se,ce,Te,we,Se,_e){let xe=V.fetchers.get(P);Zt(P,nu(_e,xe?xe.data:void 0),{flushSync:we});let Ae=new AbortController,ve=bo(r.history,K,Ae.signal);if(Te){let it=await Hr(se,new URL(ve.url).pathname,ve.signal,P);if(it.type==="aborted")return;if(it.type==="error"){_t(P,z,it.error,{flushSync:we});return}else if(it.matches)se=it.matches;else{_t(P,z,gr(404,{pathname:K}),{flushSync:we});return}}let je=yh(se,K);Y.set(P,Ae);let rt=he,yt=xo(o,u,ve,se,je,a,ce),ft=(await wr(ve,yt,ce,P))[je.route.id];if(Y.get(P)===Ae&&Y.delete(P),!ve.signal.aborted){if(fe.has(P)){Zt(P,Ii(void 0));return}if(Es(ft))if(ge>rt){Zt(P,Ii(void 0));return}else{M.add(P),await br(ve,ft,!1,{preventScrollReset:Se});return}if(rr(ft)){_t(P,z,ft.error);return}Zt(P,Ii(ft.data))}}async function br(P,z,K,{submission:se,fetcherSubmission:ce,preventScrollReset:Te,replace:we}={}){z.response.headers.has("X-Remix-Revalidate")&&(Ve=!0);let Se=z.response.headers.get("Location");We(Se,"Expected a Location header on the redirect Response"),Se=X_(Se,new URL(P.url),p);let _e=yu(V.location,Se,{_isRedirect:!0});if(n){let yt=!1;if(z.response.headers.has("X-Remix-Reload-Document"))yt=!0;else if(vp(Se)){const $e=HE(Se,!0);yt=$e.origin!==e.location.origin||_r($e.pathname,p)==null}if(yt){we?e.location.replace(Se):e.location.assign(Se);return}}R=null;let xe=we===!0||z.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ae,formAction:ve,formEncType:je}=V.navigation;!se&&!ce&&Ae&&ve&&je&&(se=n0(V.navigation));let rt=se||ce;if(tR.has(z.response.status)&&rt&&qn(rt.formMethod))await Mn(xe,_e,{submission:{...rt,formAction:Se},preventScrollReset:Te||w,enableViewTransition:K?O:void 0});else{let yt=bm(_e,se);await Mn(xe,_e,{overrideNavigation:yt,fetcherSubmission:ce,preventScrollReset:Te||w,enableViewTransition:K?O:void 0})}}async function wr(P,z,K,se){let ce,Te={};try{ce=await fR(g,P,z,se,K,!1)}catch(we){return z.filter(Se=>Se.shouldLoad).forEach(Se=>{Te[Se.route.id]={type:"error",error:we}}),Te}if(P.signal.aborted)return Te;for(let[we,Se]of Object.entries(ce))if(TR(Se)){let _e=Se.result;Te[we]={type:"redirect",response:gR(_e,P,we,z,p)}}else Te[we]=await pR(Se);return Te}async function Ls(P,z,K,se){let ce=wr(K,P,se,null),Te=Promise.all(z.map(async _e=>{if(_e.matches&&_e.match&&_e.request&&_e.controller){let Ae=(await wr(_e.request,_e.matches,se,_e.key))[_e.match.route.id];return{[_e.key]:Ae}}else return Promise.resolve({[_e.key]:{type:"error",error:gr(404,{pathname:_e.path})}})})),we=await ce,Se=(await Te).reduce((_e,xe)=>Object.assign(_e,xe),{});return{loaderResults:we,fetcherResults:Se}}function Sr(){Ve=!0,ee.forEach((P,z)=>{Y.has(z)&&Ye.add(z),Pn(z)})}function Zt(P,z,K={}){V.fetchers.set(P,z),Ot({fetchers:new Map(V.fetchers)},{flushSync:(K&&K.flushSync)===!0})}function _t(P,z,K,se={}){let ce=va(V.matches,z);Ba(P),Ot({errors:{[ce.route.id]:K},fetchers:new Map(V.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function xn(P){return me.set(P,(me.get(P)||0)+1),fe.has(P)&&fe.delete(P),V.fetchers.get(P)||nR}function un(P,z){Pn(P,z?.reason),Zt(P,Ii(null))}function Ba(P){let z=V.fetchers.get(P);Y.has(P)&&!(z&&z.state==="loading"&&Ue.has(P))&&Pn(P),ee.delete(P),Ue.delete(P),M.delete(P),fe.delete(P),Ye.delete(P),V.fetchers.delete(P)}function Us(P){let z=(me.get(P)||0)-1;z<=0?(me.delete(P),fe.add(P)):me.set(P,z),Ot({fetchers:new Map(V.fetchers)})}function Pn(P,z){let K=Y.get(P);K&&(K.abort(z),Y.delete(P))}function Yn(P){for(let z of P){let K=xn(z),se=Ii(K.data);V.fetchers.set(z,se)}}function Ar(){let P=[],z=!1;for(let K of M){let se=V.fetchers.get(K);We(se,`Expected fetcher: ${K}`),se.state==="loading"&&(M.delete(K),P.push(K),z=!0)}return Yn(P),z}function kn(P){let z=[];for(let[K,se]of Ue)if(se<P){let ce=V.fetchers.get(K);We(ce,`Expected fetcher: ${K}`),ce.state==="loading"&&(Pn(K),Ue.delete(K),z.push(K))}return Yn(z),z.length>0}function Vn(P,z){let K=V.blockers.get(P)||tu;return Ee.get(P)!==z&&Ee.set(P,z),K}function Rr(P){V.blockers.delete(P),Ee.delete(P)}function xr(P,z){let K=V.blockers.get(P)||tu;We(K.state==="unblocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="blocked"||K.state==="blocked"&&z.state==="proceeding"||K.state==="blocked"&&z.state==="unblocked"||K.state==="proceeding"&&z.state==="unblocked",`Invalid blocker state transition: ${K.state} -> ${z.state}`);let se=new Map(V.blockers);se.set(P,z),Ot({blockers:se})}function ji({currentLocation:P,nextLocation:z,historyAction:K}){if(Ee.size===0)return;Ee.size>1&&Yt(!1,"A router only supports one blocker at a time");let se=Array.from(Ee.entries()),[ce,Te]=se[se.length-1],we=V.blockers.get(ce);if(!(we&&we.state==="proceeding")&&Te({currentLocation:P,nextLocation:z,historyAction:K}))return ce}function ar(P){let z=gr(404,{pathname:P}),K=m||h,{matches:se,route:ce}=sh(K);return{notFoundMatches:se,route:ce,error:z}}function zi(P,z,K){if(N=P,J=z,B=K||null,!Q&&V.navigation===Tm){Q=!0;let se=Ir(V.location,V.matches);se!=null&&Ot({restoreScrollPosition:se})}return()=>{N=null,J=null,B=null}}function xt(P,z){return B&&B(P,z.map(se=>OA(se,V.loaderData)))||P.key}function js(P,z){if(N&&J){let K=xt(P,z);N[K]=J()}}function Ir(P,z){if(N){let K=xt(P,z),se=N[K];if(typeof se=="number")return se}return null}function $n(P,z,K){if(r.patchRoutesOnNavigation)if(P){if(Object.keys(P[0].params).length>0)return{active:!0,matches:gh(z,K,p,!0)}}else return{active:!0,matches:gh(z,K,p,!0)||[]};return{active:!1,matches:null}}async function Hr(P,z,K,se){if(!r.patchRoutesOnNavigation)return{type:"success",matches:P};let ce=P;for(;;){let Te=m==null,we=m||h,Se=u;try{await r.patchRoutesOnNavigation({signal:K,path:z,matches:ce,fetcherKey:se,patch:(Ae,ve)=>{K.aborted||K_(Ae,ve,we,Se,o,!1)}})}catch(Ae){return{type:"error",error:Ae,partialMatches:ce}}finally{Te&&!K.aborted&&(h=[...h])}if(K.aborted)return{type:"aborted"};let _e=ya(we,z,p);if(_e)return{type:"success",matches:_e};let xe=gh(we,z,p,!0);if(!xe||ce.length===xe.length&&ce.every((Ae,ve)=>Ae.route.id===xe[ve].route.id))return{type:"success",matches:null};ce=xe}}function Ha(P){u={},m=vu(P,o,void 0,u)}function Cr(P,z,K=!1){let se=m==null;K_(P,z,m||h,u,o,K),se&&(h=[...h],Ot({}))}return le={get basename(){return p},get future(){return v},get state(){return V},get routes(){return h},get window(){return e},initialize:$t,subscribe:Gn,enableScrollRestoration:zi,navigate:li,fetch:kt,revalidate:ui,createHref:P=>r.history.createHref(P),encodeLocation:P=>r.history.encodeLocation(P),getFetcher:xn,resetFetcher:un,deleteFetcher:Us,dispose:ot,getBlocker:Vn,deleteBlocker:Rr,patchRoutes:Cr,_internalFetchControllers:Y,_internalSetRoutes:Ha,_internalSetStateDoNotUseOrYouWillBreakYourApp(P){Ot(P)}},le}function sR(r){return r!=null&&("formData"in r&&r.formData!=null||"body"in r&&r.body!==void 0)}function Lm(r,e,n,a,o,u){let h,m;if(o){h=[];for(let g of e)if(h.push(g),g.route.id===o){m=g;break}}else h=e,m=e[e.length-1];let p=yp(a||".",gp(h),_r(r.pathname,n)||r.pathname,u==="path");if(a==null&&(p.search=r.search,p.hash=r.hash),(a==null||a===""||a===".")&&m){let g=Ep(p.search);if(m.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!m.route.index&&g){let v=new URLSearchParams(p.search),T=v.getAll("index");v.delete("index"),T.filter(N=>N).forEach(N=>v.append("index",N));let S=v.toString();p.search=S?`?${S}`:""}}return n!=="/"&&(p.pathname=GA({basename:n,pathname:p.pathname})),Na(p)}function F_(r,e,n){if(!n||!sR(n))return{path:e};if(n.formMethod&&!bR(n.formMethod))return{path:e,error:gr(405,{method:n.formMethod})};let a=()=>({path:e,error:gr(400,{type:"invalid-body"})}),u=(n.formMethod||"get").toUpperCase(),h=eT(e);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!qn(u))return a();let T=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((S,[N,B])=>`${S}${N}=${B}
`,""):String(n.body);return{path:e,submission:{formMethod:u,formAction:h,formEncType:n.formEncType,formData:void 0,json:void 0,text:T}}}else if(n.formEncType==="application/json"){if(!qn(u))return a();try{let T=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:e,submission:{formMethod:u,formAction:h,formEncType:n.formEncType,formData:void 0,json:T,text:void 0}}}catch{return a()}}}We(typeof FormData=="function","FormData is not available in this environment");let m,p;if(n.formData)m=zm(n.formData),p=n.formData;else if(n.body instanceof FormData)m=zm(n.body),p=n.body;else if(n.body instanceof URLSearchParams)m=n.body,p=W_(m);else if(n.body==null)m=new URLSearchParams,p=new FormData;else try{m=new URLSearchParams(n.body),p=W_(m)}catch{return a()}let g={formMethod:u,formAction:h,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(qn(g.formMethod))return{path:e,submission:g};let v=La(e);return r&&v.search&&Ep(v.search)&&m.append("index",""),v.search=`?${m}`,{path:Na(v),submission:g}}function G_(r,e,n,a,o,u,h,m,p,g,v,T,S,N,B,J,Q,ne,oe,ue){let Re=ue?rr(ue[1])?ue[1].error:ue[1].data:void 0,le=o.createURL(u.location),V=o.createURL(p),x;if(v&&u.errors){let C=Object.keys(u.errors)[0];x=h.findIndex(Ve=>Ve.route.id===C)}else if(ue&&rr(ue[1])){let C=ue[0];x=h.findIndex(Ve=>Ve.route.id===C)-1}let w=ue?ue[1].statusCode:void 0,R=w&&w>=400,O={currentUrl:le,currentParams:u.matches[0]?.params||{},nextUrl:V,nextParams:h[0].params,...m,actionResult:Re,actionStatus:w},k=h.map((C,Ve)=>{let{route:Ye}=C,Y=null;if(x!=null&&Ve>x?Y=!1:Ye.lazy?Y=!0:_p(Ye)?v?Y=Um(Ye,u.loaderData,u.errors):oR(u.loaderData,u.matches[Ve],C)&&(Y=!0):Y=!1,Y!==null)return jm(n,a,r,C,g,e,Y);let he=R?!1:T||le.pathname+le.search===V.pathname+V.search||le.search!==V.search||lR(u.matches[Ve],C),ge={...O,defaultShouldRevalidate:he},Ue=Mh(C,ge);return jm(n,a,r,C,g,e,Ue,ge)}),U=[];return B.forEach((C,Ve)=>{if(v||!h.some(me=>me.route.id===C.routeId)||N.has(Ve))return;let Ye=u.fetchers.get(Ve),Y=Ye&&Ye.state!=="idle"&&Ye.data===void 0,he=ya(Q,C.path,ne);if(!he){if(oe&&Y)return;U.push({key:Ve,routeId:C.routeId,path:C.path,matches:null,match:null,request:null,controller:null});return}if(J.has(Ve))return;let ge=yh(he,C.path),Ue=new AbortController,M=bo(o,C.path,Ue.signal),ee=null;if(S.has(Ve))S.delete(Ve),ee=xo(n,a,M,he,ge,g,e);else if(Y)T&&(ee=xo(n,a,M,he,ge,g,e));else{let me={...O,defaultShouldRevalidate:R?!1:T};Mh(ge,me)&&(ee=xo(n,a,M,he,ge,g,e,me))}ee&&U.push({key:Ve,routeId:C.routeId,path:C.path,matches:ee,match:ge,request:M,controller:Ue})}),{dsMatches:k,revalidatingFetchers:U}}function _p(r){return r.loader!=null||r.middleware!=null&&r.middleware.length>0}function Um(r,e,n){if(r.lazy)return!0;if(!_p(r))return!1;let a=e!=null&&r.id in e,o=n!=null&&n[r.id]!==void 0;return!a&&o?!1:typeof r.loader=="function"&&r.loader.hydrate===!0?!0:!a&&!o}function oR(r,e,n){let a=!e||n.route.id!==e.route.id,o=!r.hasOwnProperty(n.route.id);return a||o}function lR(r,e){let n=r.route.path;return r.pathname!==e.pathname||n!=null&&n.endsWith("*")&&r.params["*"]!==e.params["*"]}function Mh(r,e){if(r.route.shouldRevalidate){let n=r.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function K_(r,e,n,a,o,u){let h;if(r){let g=a[r];We(g,`No route found to patch children into: routeId = ${r}`),g.children||(g.children=[]),h=g.children}else h=n;let m=[],p=[];if(e.forEach(g=>{let v=h.find(T=>QE(g,T));v?p.push({existingRoute:v,newRoute:g}):m.push(g)}),m.length>0){let g=vu(m,o,[r||"_","patch",String(h?.length||"0")],a);h.push(...g)}if(u&&p.length>0)for(let g=0;g<p.length;g++){let{existingRoute:v,newRoute:T}=p[g],S=v,[N]=vu([T],o,[],{},!0);Object.assign(S,{element:N.element?N.element:S.element,errorElement:N.errorElement?N.errorElement:S.errorElement,hydrateFallbackElement:N.hydrateFallbackElement?N.hydrateFallbackElement:S.hydrateFallbackElement})}}function QE(r,e){return"id"in r&&"id"in e&&r.id===e.id?!0:r.index===e.index&&r.path===e.path&&r.caseSensitive===e.caseSensitive?(!r.children||r.children.length===0)&&(!e.children||e.children.length===0)?!0:r.children.every((n,a)=>e.children?.some(o=>QE(n,o))):!1}var Y_=new WeakMap,XE=({key:r,route:e,manifest:n,mapRouteProperties:a})=>{let o=n[e.id];if(We(o,"No route found in manifest"),!o.lazy||typeof o.lazy!="object")return;let u=o.lazy[r];if(!u)return;let h=Y_.get(o);h||(h={},Y_.set(o,h));let m=h[r];if(m)return m;let p=(async()=>{let g=IA(r),T=o[r]!==void 0&&r!=="hasErrorBoundary";if(g)Yt(!g,"Route property "+r+" is not a supported lazy route property. This property will be ignored."),h[r]=Promise.resolve();else if(T)Yt(!1,`Route "${o.id}" has a static property "${r}" defined. The lazy property will be ignored.`);else{let S=await u();S!=null&&(Object.assign(o,{[r]:S}),Object.assign(o,a(o)))}typeof o.lazy=="object"&&(o.lazy[r]=void 0,Object.values(o.lazy).every(S=>S===void 0)&&(o.lazy=void 0))})();return h[r]=p,p},$_=new WeakMap;function uR(r,e,n,a,o){let u=n[r.id];if(We(u,"No route found in manifest"),!r.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof r.lazy=="function"){let v=$_.get(u);if(v)return{lazyRoutePromise:v,lazyHandlerPromise:v};let T=(async()=>{We(typeof r.lazy=="function","No lazy route function found");let S=await r.lazy(),N={};for(let B in S){let J=S[B];if(J===void 0)continue;let Q=NA(B),oe=u[B]!==void 0&&B!=="hasErrorBoundary";Q?Yt(!Q,"Route property "+B+" is not a supported property to be returned from a lazy route function. This property will be ignored."):oe?Yt(!oe,`Route "${u.id}" has a static property "${B}" defined but its lazy function is also returning a value for this property. The lazy route property "${B}" will be ignored.`):N[B]=J}Object.assign(u,N),Object.assign(u,{...a(u),lazy:void 0})})();return $_.set(u,T),T.catch(()=>{}),{lazyRoutePromise:T,lazyHandlerPromise:T}}let h=Object.keys(r.lazy),m=[],p;for(let v of h){if(o&&o.includes(v))continue;let T=XE({key:v,route:r,manifest:n,mapRouteProperties:a});T&&(m.push(T),v===e&&(p=T))}let g=m.length>0?Promise.all(m).then(()=>{}):void 0;return g?.catch(()=>{}),p?.catch(()=>{}),{lazyRoutePromise:g,lazyHandlerPromise:p}}async function Q_(r){let e=r.matches.filter(o=>o.shouldLoad),n={};return(await Promise.all(e.map(o=>o.resolve()))).forEach((o,u)=>{n[e[u].route.id]=o}),n}async function cR(r){return r.matches.some(e=>e.route.middleware)?WE(r,()=>Q_(r)):Q_(r)}function WE(r,e){return hR(r,e,a=>a,_R,n);function n(a,o,u){if(u)return Promise.resolve(Object.assign(u.value,{[o]:{type:"error",result:a}}));{let{matches:h}=r,m=Math.min(Math.max(h.findIndex(g=>g.route.id===o),0),Math.max(h.findIndex(g=>g.unstable_shouldCallHandler()),0)),p=va(h,h[m].route.id).route.id;return Promise.resolve({[p]:{type:"error",result:a}})}}}async function hR(r,e,n,a,o){let{matches:u,request:h,params:m,context:p}=r,g=u.flatMap(T=>T.route.middleware?T.route.middleware.map(S=>[T.route.id,S]):[]);return await JE({request:h,params:m,context:p},g,e,n,a,o)}async function JE(r,e,n,a,o,u,h=0){let{request:m}=r;if(m.signal.aborted)throw m.signal.reason??new Error(`Request aborted: ${m.method} ${m.url}`);let p=e[h];if(!p)return await n();let[g,v]=p,T,S=async()=>{if(T)throw new Error("You may only call `next()` once per middleware");try{return T={value:await JE(r,e,n,a,o,u,h+1)},T.value}catch(N){return T={value:await u(N,g,T)},T.value}};try{let N=await v(r,S),B=N!=null?a(N):void 0;return o(B)?B:T?B??T.value:(T={value:await S()},T.value)}catch(N){return await u(N,g,T)}}function ZE(r,e,n,a,o){let u=XE({key:"middleware",route:a.route,manifest:e,mapRouteProperties:r}),h=uR(a.route,qn(n.method)?"action":"loader",e,r,o);return{middleware:u,route:h.lazyRoutePromise,handler:h.lazyHandlerPromise}}function jm(r,e,n,a,o,u,h,m=null){let p=!1,g=ZE(r,e,n,a,o);return{...a,_lazyPromises:g,shouldLoad:h,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler(v){return p=!0,m?typeof v=="boolean"?Mh(a,{...m,defaultShouldRevalidate:v}):Mh(a,m):h},resolve(v){let{lazy:T,loader:S,middleware:N}=a.route,B=p||h||v&&!qn(n.method)&&(T||S),J=N&&N.length>0&&!S&&!T;return B&&!J?dR({request:n,match:a,lazyHandlerPromise:g?.handler,lazyRoutePromise:g?.route,handlerOverride:v,scopedContext:u}):Promise.resolve({type:"data",result:void 0})}}}function xo(r,e,n,a,o,u,h,m=null){return a.map(p=>p.route.id!==o.route.id?{...p,shouldLoad:!1,unstable_shouldRevalidateArgs:m,unstable_shouldCallHandler:()=>!1,_lazyPromises:ZE(r,e,n,p,u),resolve:()=>Promise.resolve({type:"data",result:void 0})}:jm(r,e,n,p,u,h,!0,m))}async function fR(r,e,n,a,o,u){n.some(g=>g._lazyPromises?.middleware)&&await Promise.all(n.map(g=>g._lazyPromises?.middleware));let h={request:e,params:n[0].params,context:o,matches:n},p=await r({...h,fetcherKey:a,runClientMiddleware:g=>{let v=h;return WE(v,()=>g({...v,fetcherKey:a,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(n.flatMap(g=>[g._lazyPromises?.handler,g._lazyPromises?.route]))}catch{}return p}async function dR({request:r,match:e,lazyHandlerPromise:n,lazyRoutePromise:a,handlerOverride:o,scopedContext:u}){let h,m,p=qn(r.method),g=p?"action":"loader",v=T=>{let S,N=new Promise((Q,ne)=>S=ne);m=()=>S(),r.signal.addEventListener("abort",m);let B=Q=>typeof T!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${g}" [routeId: ${e.route.id}]`)):T({request:r,params:e.params,context:u},...Q!==void 0?[Q]:[]),J=(async()=>{try{return{type:"data",result:await(o?o(ne=>B(ne)):B())}}catch(Q){return{type:"error",result:Q}}})();return Promise.race([J,N])};try{let T=p?e.route.action:e.route.loader;if(n||a)if(T){let S,[N]=await Promise.all([v(T).catch(B=>{S=B}),n,a]);if(S!==void 0)throw S;h=N}else{await n;let S=p?e.route.action:e.route.loader;if(S)[h]=await Promise.all([v(S),a]);else if(g==="action"){let N=new URL(r.url),B=N.pathname+N.search;throw gr(405,{method:r.method,pathname:B,routeId:e.route.id})}else return{type:"data",result:void 0}}else if(T)h=await v(T);else{let S=new URL(r.url),N=S.pathname+S.search;throw gr(404,{pathname:N})}}catch(T){return{type:"error",result:T}}finally{m&&r.signal.removeEventListener("abort",m)}return h}async function mR(r){let e=r.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?r.body==null?null:r.json():r.text()}async function pR(r){let{result:e,type:n}=r;if(tT(e)){let a;try{a=await mR(e)}catch(o){return{type:"error",error:o}}return n==="error"?{type:"error",error:new Oh(e.status,e.statusText,a),statusCode:e.status,headers:e.headers}:{type:"data",data:a,statusCode:e.status,headers:e.headers}}return n==="error"?t0(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:new Oh(e.init?.status||500,void 0,e.data),statusCode:_u(e)?e.status:void 0,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:_u(e)?e.status:void 0}:t0(e)?{type:"data",data:e.data,statusCode:e.init?.status,headers:e.init?.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function gR(r,e,n,a,o){let u=r.headers.get("Location");if(We(u,"Redirects returned/thrown from loaders/actions must have a Location header"),!vp(u)){let h=a.slice(0,a.findIndex(m=>m.route.id===n)+1);u=Lm(new URL(e.url),h,o,u),r.headers.set("Location",u)}return r}function X_(r,e,n){if(vp(r)){let a=r,o=a.startsWith("//")?new URL(e.protocol+a):new URL(a),u=_r(o.pathname,n)!=null;if(o.origin===e.origin&&u)return o.pathname+o.search+o.hash}return r}function bo(r,e,n,a){let o=r.createURL(eT(e)).toString(),u={signal:n};if(a&&qn(a.formMethod)){let{formMethod:h,formEncType:m}=a;u.method=h.toUpperCase(),m==="application/json"?(u.headers=new Headers({"Content-Type":m}),u.body=JSON.stringify(a.json)):m==="text/plain"?u.body=a.text:m==="application/x-www-form-urlencoded"&&a.formData?u.body=zm(a.formData):u.body=a.formData}return new Request(o,u)}function zm(r){let e=new URLSearchParams;for(let[n,a]of r.entries())e.append(n,typeof a=="string"?a:a.name);return e}function W_(r){let e=new FormData;for(let[n,a]of r.entries())e.append(n,a);return e}function yR(r,e,n,a=!1,o=!1){let u={},h=null,m,p=!1,g={},v=n&&rr(n[1])?n[1].error:void 0;return r.forEach(T=>{if(!(T.route.id in e))return;let S=T.route.id,N=e[S];if(We(!Es(N),"Cannot handle redirect results in processLoaderData"),rr(N)){let B=N.error;if(v!==void 0&&(B=v,v=void 0),h=h||{},o)h[S]=B;else{let J=va(r,S);h[J.route.id]==null&&(h[J.route.id]=B)}a||(u[S]=$E),p||(p=!0,m=_u(N.error)?N.error.status:500),N.headers&&(g[S]=N.headers)}else u[S]=N.data,N.statusCode&&N.statusCode!==200&&!p&&(m=N.statusCode),N.headers&&(g[S]=N.headers)}),v!==void 0&&n&&(h={[n[0]]:v},n[2]&&(u[n[2]]=void 0)),{loaderData:u,errors:h,statusCode:m||200,loaderHeaders:g}}function J_(r,e,n,a,o,u){let{loaderData:h,errors:m}=yR(e,n,a);return o.filter(p=>!p.matches||p.matches.some(g=>g.shouldLoad)).forEach(p=>{let{key:g,match:v,controller:T}=p;if(T&&T.signal.aborted)return;let S=u[g];if(We(S,"Did not find corresponding fetcher result"),rr(S)){let N=va(r.matches,v?.route.id);m&&m[N.route.id]||(m={...m,[N.route.id]:S.error}),r.fetchers.delete(g)}else if(Es(S))We(!1,"Unhandled fetcher revalidation redirect");else{let N=Ii(S.data);r.fetchers.set(g,N)}}),{loaderData:h,errors:m}}function Z_(r,e,n,a){let o=Object.entries(e).filter(([,u])=>u!==$E).reduce((u,[h,m])=>(u[h]=m,u),{});for(let u of n){let h=u.route.id;if(!e.hasOwnProperty(h)&&r.hasOwnProperty(h)&&u.route.loader&&(o[h]=r[h]),a&&a.hasOwnProperty(h))break}return o}function e0(r){return r?rr(r[1])?{actionData:{}}:{actionData:{[r[0]]:r[1].data}}:{}}function va(r,e){return(e?r.slice(0,r.findIndex(a=>a.route.id===e)+1):[...r]).reverse().find(a=>a.route.hasErrorBoundary===!0)||r[0]}function sh(r){let e=r.length===1?r[0]:r.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function gr(r,{pathname:e,routeId:n,method:a,type:o,message:u}={}){let h="Unknown Server Error",m="Unknown @remix-run/router error";return r===400?(h="Bad Request",a&&e&&n?m=`You made a ${a} request to "${e}" but did not provide a \`loader\` for route "${n}", so there is no way to handle the request.`:o==="invalid-body"&&(m="Unable to encode submission body")):r===403?(h="Forbidden",m=`Route "${n}" does not match URL "${e}"`):r===404?(h="Not Found",m=`No route matches URL "${e}"`):r===405&&(h="Method Not Allowed",a&&e&&n?m=`You made a ${a.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${n}", so there is no way to handle the request.`:a&&(m=`Invalid request method "${a.toUpperCase()}"`)),new Oh(r||500,h,new Error(m),!0)}function oh(r){let e=Object.entries(r);for(let n=e.length-1;n>=0;n--){let[a,o]=e[n];if(Es(o))return{key:a,result:o}}}function eT(r){let e=typeof r=="string"?La(r):r;return Na({...e,hash:""})}function vR(r,e){return r.pathname!==e.pathname||r.search!==e.search?!1:r.hash===""?e.hash!=="":r.hash===e.hash?!0:e.hash!==""}function _R(r){return r!=null&&typeof r=="object"&&Object.entries(r).every(([e,n])=>typeof e=="string"&&ER(n))}function ER(r){return r!=null&&typeof r=="object"&&"type"in r&&"result"in r&&(r.type==="data"||r.type==="error")}function TR(r){return tT(r.result)&&eR.has(r.result.status)}function rr(r){return r.type==="error"}function Es(r){return(r&&r.type)==="redirect"}function t0(r){return typeof r=="object"&&r!=null&&"type"in r&&"data"in r&&"init"in r&&r.type==="DataWithResponseInit"}function tT(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.headers=="object"&&typeof r.body<"u"}function bR(r){return ZA.has(r.toUpperCase())}function qn(r){return WA.has(r.toUpperCase())}function Ep(r){return new URLSearchParams(r).getAll("index").some(e=>e==="")}function yh(r,e){let n=typeof e=="string"?La(e).search:e.search;if(r[r.length-1].route.index&&Ep(n||""))return r[r.length-1];let a=GE(r);return a[a.length-1]}function n0(r){let{formMethod:e,formAction:n,formEncType:a,text:o,formData:u,json:h}=r;if(!(!e||!n||!a)){if(o!=null)return{formMethod:e,formAction:n,formEncType:a,formData:void 0,json:void 0,text:o};if(u!=null)return{formMethod:e,formAction:n,formEncType:a,formData:u,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:n,formEncType:a,formData:void 0,json:h,text:void 0}}}function bm(r,e){return e?{state:"loading",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:r,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function wR(r,e){return{state:"submitting",location:r,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function nu(r,e){return r?{state:"loading",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function SR(r,e){return{state:"submitting",formMethod:r.formMethod,formAction:r.formAction,formEncType:r.formEncType,formData:r.formData,json:r.json,text:r.text,data:e?e.data:void 0}}function Ii(r){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:r}}function AR(r,e){try{let n=r.sessionStorage.getItem(YE);if(n){let a=JSON.parse(n);for(let[o,u]of Object.entries(a||{}))u&&Array.isArray(u)&&e.set(o,new Set(u||[]))}}catch{}}function RR(r,e){if(e.size>0){let n={};for(let[a,o]of e)n[a]=[...o];try{r.sessionStorage.setItem(YE,JSON.stringify(n))}catch(a){Yt(!1,`Failed to save applied view transitions in sessionStorage (${a}).`)}}}function xR(){let r,e,n=new Promise((a,o)=>{r=async u=>{a(u);try{await n}catch{}},e=async u=>{o(u);try{await n}catch{}}});return{promise:n,resolve:r,reject:e}}var Cs=H.createContext(null);Cs.displayName="DataRouter";var Du=H.createContext(null);Du.displayName="DataRouterState";H.createContext(!1);var Tp=H.createContext({isTransitioning:!1});Tp.displayName="ViewTransition";var nT=H.createContext(new Map);nT.displayName="Fetchers";var IR=H.createContext(null);IR.displayName="Await";var si=H.createContext(null);si.displayName="Navigation";var ef=H.createContext(null);ef.displayName="Location";var oi=H.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var bp=H.createContext(null);bp.displayName="RouteError";function CR(r,{relative:e}={}){We(Ou(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=H.useContext(si),{hash:o,pathname:u,search:h}=Mu(r,{relative:e}),m=u;return n!=="/"&&(m=u==="/"?n:Zr([n,u])),a.createHref({pathname:m,search:h,hash:o})}function Ou(){return H.useContext(ef)!=null}function Ns(){return We(Ou(),"useLocation() may be used only in the context of a <Router> component."),H.useContext(ef).location}var rT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function iT(r){H.useContext(si).static||H.useLayoutEffect(r)}function qo(){let{isDataRoute:r}=H.useContext(oi);return r?HR():NR()}function NR(){We(Ou(),"useNavigate() may be used only in the context of a <Router> component.");let r=H.useContext(Cs),{basename:e,navigator:n}=H.useContext(si),{matches:a}=H.useContext(oi),{pathname:o}=Ns(),u=JSON.stringify(gp(a)),h=H.useRef(!1);return iT(()=>{h.current=!0}),H.useCallback((p,g={})=>{if(Yt(h.current,rT),!h.current)return;if(typeof p=="number"){n.go(p);return}let v=yp(p,JSON.parse(u),o,g.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Zr([e,v.pathname])),(g.replace?n.replace:n.push)(v,g.state,g)},[e,n,u,o,r])}H.createContext(null);function DR(){let{matches:r}=H.useContext(oi),e=r[r.length-1];return e?e.params:{}}function Mu(r,{relative:e}={}){let{matches:n}=H.useContext(oi),{pathname:a}=Ns(),o=JSON.stringify(gp(n));return H.useMemo(()=>yp(r,JSON.parse(o),a,e==="path"),[r,o,a,e])}function OR(r,e,n,a,o){We(Ou(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=H.useContext(si),{matches:h}=H.useContext(oi),m=h[h.length-1],p=m?m.params:{},g=m?m.pathname:"/",v=m?m.pathnameBase:"/",T=m&&m.route;{let oe=T&&T.path||"";sT(g,!T||oe.endsWith("*")||oe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${oe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${oe}"> to <Route path="${oe==="/"?"*":`${oe}/*`}">.`)}let S=Ns(),N;N=S;let B=N.pathname||"/",J=B;if(v!=="/"){let oe=v.replace(/^\//,"").split("/");J="/"+B.replace(/^\//,"").split("/").slice(oe.length).join("/")}let Q=ya(r,{pathname:J});return Yt(T||Q!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Yt(Q==null||Q[Q.length-1].route.element!==void 0||Q[Q.length-1].route.Component!==void 0||Q[Q.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),LR(Q&&Q.map(oe=>Object.assign({},oe,{params:Object.assign({},p,oe.params),pathname:Zr([v,u.encodeLocation?u.encodeLocation(oe.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:oe.pathname]),pathnameBase:oe.pathnameBase==="/"?v:Zr([v,u.encodeLocation?u.encodeLocation(oe.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:oe.pathnameBase])})),h,n,a,o)}function MR(){let r=aT(),e=_u(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),n=r instanceof Error?r.stack:null,a="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:a},u={padding:"2px 4px",backgroundColor:a},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=H.createElement(H.Fragment,null,H.createElement("p",null," Hey developer "),H.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",H.createElement("code",{style:u},"ErrorBoundary")," or"," ",H.createElement("code",{style:u},"errorElement")," prop on your route.")),H.createElement(H.Fragment,null,H.createElement("h2",null,"Unexpected Application Error!"),H.createElement("h3",{style:{fontStyle:"italic"}},e),n?H.createElement("pre",{style:o},n):null,h)}var PR=H.createElement(MR,null),kR=class extends H.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?H.createElement(oi.Provider,{value:this.props.routeContext},H.createElement(bp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function VR({routeContext:r,match:e,children:n}){let a=H.useContext(Cs);return a&&a.static&&a.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=e.route.id),H.createElement(oi.Provider,{value:r},n)}function LR(r,e=[],n=null,a=null,o=null){if(r==null){if(!n)return null;if(n.errors)r=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)r=n.matches;else return null}let u=r,h=n?.errors;if(h!=null){let g=u.findIndex(v=>v.route.id&&h?.[v.route.id]!==void 0);We(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,g+1))}let m=!1,p=-1;if(n)for(let g=0;g<u.length;g++){let v=u[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:T,errors:S}=n,N=v.route.loader&&!T.hasOwnProperty(v.route.id)&&(!S||S[v.route.id]===void 0);if(v.route.lazy||N){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((g,v,T)=>{let S,N=!1,B=null,J=null;n&&(S=h&&v.route.id?h[v.route.id]:void 0,B=v.route.errorElement||PR,m&&(p<0&&T===0?(sT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,J=null):p===T&&(N=!0,J=v.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,T+1)),ne=()=>{let oe;return S?oe=B:N?oe=J:v.route.Component?oe=H.createElement(v.route.Component,null):v.route.element?oe=v.route.element:oe=g,H.createElement(VR,{match:v,routeContext:{outlet:g,matches:Q,isDataRoute:n!=null},children:oe})};return n&&(v.route.ErrorBoundary||v.route.errorElement||T===0)?H.createElement(kR,{location:n.location,revalidation:n.revalidation,component:B,error:S,children:ne(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},unstable_onError:a}):ne()},null)}function wp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function UR(r){let e=H.useContext(Cs);return We(e,wp(r)),e}function jR(r){let e=H.useContext(Du);return We(e,wp(r)),e}function zR(r){let e=H.useContext(oi);return We(e,wp(r)),e}function Sp(r){let e=zR(r),n=e.matches[e.matches.length-1];return We(n.route.id,`${r} can only be used on routes that contain a unique "id"`),n.route.id}function BR(){return Sp("useRouteId")}function aT(){let r=H.useContext(bp),e=jR("useRouteError"),n=Sp("useRouteError");return r!==void 0?r:e.errors?.[n]}function HR(){let{router:r}=UR("useNavigate"),e=Sp("useNavigate"),n=H.useRef(!1);return iT(()=>{n.current=!0}),H.useCallback(async(o,u={})=>{Yt(n.current,rT),n.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...u}))},[r,e])}var r0={};function sT(r,e,n){!e&&!r0[r]&&(r0[r]=!0,Yt(!1,n))}var i0={};function a0(r,e){!r&&!i0[e]&&(i0[e]=!0,console.warn(e))}function qR(r){let e={hasErrorBoundary:r.hasErrorBoundary||r.ErrorBoundary!=null||r.errorElement!=null};return r.Component&&(r.element&&Yt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:H.createElement(r.Component),Component:void 0})),r.HydrateFallback&&(r.hydrateFallbackElement&&Yt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:H.createElement(r.HydrateFallback),HydrateFallback:void 0})),r.ErrorBoundary&&(r.errorElement&&Yt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:H.createElement(r.ErrorBoundary),ErrorBoundary:void 0})),e}var FR=["HydrateFallback","hydrateFallbackElement"],GR=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",e(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",n(a))}})}};function KR({router:r,flushSync:e,unstable_onError:n}){let[a,o]=H.useState(r.state),[u,h]=H.useState(),[m,p]=H.useState({isTransitioning:!1}),[g,v]=H.useState(),[T,S]=H.useState(),[N,B]=H.useState(),J=H.useRef(new Map),Q=H.useCallback(le=>{o(V=>(le.errors&&n&&Object.entries(le.errors).forEach(([x,w])=>{V.errors?.[x]!==w&&n(w)}),le))},[n]),ne=H.useCallback((le,{deletedFetchers:V,flushSync:x,viewTransitionOpts:w})=>{le.fetchers.forEach((O,k)=>{O.data!==void 0&&J.current.set(k,O.data)}),V.forEach(O=>J.current.delete(O)),a0(x===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let R=r.window!=null&&r.window.document!=null&&typeof r.window.document.startViewTransition=="function";if(a0(w==null||R,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!w||!R){e&&x?e(()=>Q(le)):H.startTransition(()=>Q(le));return}if(e&&x){e(()=>{T&&(g&&g.resolve(),T.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:w.currentLocation,nextLocation:w.nextLocation})});let O=r.window.document.startViewTransition(()=>{e(()=>Q(le))});O.finished.finally(()=>{e(()=>{v(void 0),S(void 0),h(void 0),p({isTransitioning:!1})})}),e(()=>S(O));return}T?(g&&g.resolve(),T.skipTransition(),B({state:le,currentLocation:w.currentLocation,nextLocation:w.nextLocation})):(h(le),p({isTransitioning:!0,flushSync:!1,currentLocation:w.currentLocation,nextLocation:w.nextLocation}))},[r.window,e,T,g,Q]);H.useLayoutEffect(()=>r.subscribe(ne),[r,ne]),H.useEffect(()=>{m.isTransitioning&&!m.flushSync&&v(new GR)},[m]),H.useEffect(()=>{if(g&&u&&r.window){let le=u,V=g.promise,x=r.window.document.startViewTransition(async()=>{H.startTransition(()=>Q(le)),await V});x.finished.finally(()=>{v(void 0),S(void 0),h(void 0),p({isTransitioning:!1})}),S(x)}},[u,g,r.window,Q]),H.useEffect(()=>{g&&u&&a.location.key===u.location.key&&g.resolve()},[g,T,a.location,u]),H.useEffect(()=>{!m.isTransitioning&&N&&(h(N.state),p({isTransitioning:!0,flushSync:!1,currentLocation:N.currentLocation,nextLocation:N.nextLocation}),B(void 0))},[m.isTransitioning,N]);let oe=H.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:le=>r.navigate(le),push:(le,V,x)=>r.navigate(le,{state:V,preventScrollReset:x?.preventScrollReset}),replace:(le,V,x)=>r.navigate(le,{replace:!0,state:V,preventScrollReset:x?.preventScrollReset})}),[r]),ue=r.basename||"/",Re=H.useMemo(()=>({router:r,navigator:oe,static:!1,basename:ue,unstable_onError:n}),[r,oe,ue,n]);return H.createElement(H.Fragment,null,H.createElement(Cs.Provider,{value:Re},H.createElement(Du.Provider,{value:a},H.createElement(nT.Provider,{value:J.current},H.createElement(Tp.Provider,{value:m},H.createElement(QR,{basename:ue,location:a.location,navigationType:a.historyAction,navigator:oe},H.createElement(YR,{routes:r.routes,future:r.future,state:a,unstable_onError:n})))))),null)}var YR=H.memo($R);function $R({routes:r,future:e,state:n,unstable_onError:a}){return OR(r,void 0,n,a,e)}function QR({basename:r="/",children:e=null,location:n,navigationType:a="POP",navigator:o,static:u=!1}){We(!Ou(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),m=H.useMemo(()=>({basename:h,navigator:o,static:u,future:{}}),[h,o,u]);typeof n=="string"&&(n=La(n));let{pathname:p="/",search:g="",hash:v="",state:T=null,key:S="default"}=n,N=H.useMemo(()=>{let B=_r(p,h);return B==null?null:{location:{pathname:B,search:g,hash:v,state:T,key:S},navigationType:a}},[h,p,g,v,T,S,a]);return Yt(N!=null,`<Router basename="${h}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:H.createElement(si.Provider,{value:m},H.createElement(ef.Provider,{children:e,value:N}))}var vh="get",_h="application/x-www-form-urlencoded";function tf(r){return r!=null&&typeof r.tagName=="string"}function XR(r){return tf(r)&&r.tagName.toLowerCase()==="button"}function WR(r){return tf(r)&&r.tagName.toLowerCase()==="form"}function JR(r){return tf(r)&&r.tagName.toLowerCase()==="input"}function ZR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function e1(r,e){return r.button===0&&(!e||e==="_self")&&!ZR(r)}var lh=null;function t1(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var n1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function wm(r){return r!=null&&!n1.has(r)?(Yt(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):r}function r1(r,e){let n,a,o,u,h;if(WR(r)){let m=r.getAttribute("action");a=m?_r(m,e):null,n=r.getAttribute("method")||vh,o=wm(r.getAttribute("enctype"))||_h,u=new FormData(r)}else if(XR(r)||JR(r)&&(r.type==="submit"||r.type==="image")){let m=r.form;if(m==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=r.getAttribute("formaction")||m.getAttribute("action");if(a=p?_r(p,e):null,n=r.getAttribute("formmethod")||m.getAttribute("method")||vh,o=wm(r.getAttribute("formenctype"))||wm(m.getAttribute("enctype"))||_h,u=new FormData(m,r),!t1()){let{name:g,type:v,value:T}=r;if(v==="image"){let S=g?`${g}.`:"";u.append(`${S}x`,"0"),u.append(`${S}y`,"0")}else g&&u.append(g,T)}}else{if(tf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=vh,a=null,o=_h,h=r}return u&&o==="text/plain"&&(h=u,u=void 0),{action:a,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ap(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function i1(r,e,n){let a=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return a.pathname==="/"?a.pathname=`_root.${n}`:e&&_r(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${n}`,a}async function a1(r,e){if(r.id in e)return e[r.id];try{let n=await import(r.module);return e[r.id]=n,n}catch(n){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function s1(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function o1(r,e,n){let a=await Promise.all(r.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await a1(u,n);return h.links?h.links():[]}return[]}));return h1(a.flat(1).filter(s1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function s0(r,e,n,a,o,u){let h=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,m=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return u==="assets"?e.filter((p,g)=>h(p,g)||m(p,g)):u==="data"?e.filter((p,g)=>{let v=a.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,g)||m(p,g))return!0;if(p.route.shouldRevalidate){let T=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function l1(r,e,{includeHydrateFallback:n}={}){return u1(r.map(a=>{let o=e.routes[a.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function u1(r){return[...new Set(r)]}function c1(r){let e={},n=Object.keys(r).sort();for(let a of n)e[a]=r[a];return e}function h1(r,e){let n=new Set;return new Set(e),r.reduce((a,o)=>{let u=JSON.stringify(c1(o));return n.has(u)||(n.add(u),a.push({key:u,link:o})),a},[])}function oT(){let r=H.useContext(Cs);return Ap(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function f1(){let r=H.useContext(Du);return Ap(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Rp=H.createContext(void 0);Rp.displayName="FrameworkContext";function lT(){let r=H.useContext(Rp);return Ap(r,"You must render this element inside a <HydratedRouter> element"),r}function d1(r,e){let n=H.useContext(Rp),[a,o]=H.useState(!1),[u,h]=H.useState(!1),{onFocus:m,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:T}=e,S=H.useRef(null);H.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let J=ne=>{ne.forEach(oe=>{h(oe.isIntersecting)})},Q=new IntersectionObserver(J,{threshold:.5});return S.current&&Q.observe(S.current),()=>{Q.disconnect()}}},[r]),H.useEffect(()=>{if(a){let J=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(J)}}},[a]);let N=()=>{o(!0)},B=()=>{o(!1),h(!1)};return n?r!=="intent"?[u,S,{}]:[u,S,{onFocus:ru(m,N),onBlur:ru(p,B),onMouseEnter:ru(g,N),onMouseLeave:ru(v,B),onTouchStart:ru(T,N)}]:[!1,S,{}]}function ru(r,e){return n=>{r&&r(n),n.defaultPrevented||e(n)}}function m1({page:r,...e}){let{router:n}=oT(),a=H.useMemo(()=>ya(n.routes,r,n.basename),[n.routes,r,n.basename]);return a?H.createElement(g1,{page:r,matches:a,...e}):null}function p1(r){let{manifest:e,routeModules:n}=lT(),[a,o]=H.useState([]);return H.useEffect(()=>{let u=!1;return o1(r,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[r,e,n]),a}function g1({page:r,matches:e,...n}){let a=Ns(),{manifest:o,routeModules:u}=lT(),{basename:h}=oT(),{loaderData:m,matches:p}=f1(),g=H.useMemo(()=>s0(r,e,p,o,a,"data"),[r,e,p,o,a]),v=H.useMemo(()=>s0(r,e,p,o,a,"assets"),[r,e,p,o,a]),T=H.useMemo(()=>{if(r===a.pathname+a.search+a.hash)return[];let B=new Set,J=!1;if(e.forEach(ne=>{let oe=o.routes[ne.route.id];!oe||!oe.hasLoader||(!g.some(ue=>ue.route.id===ne.route.id)&&ne.route.id in m&&u[ne.route.id]?.shouldRevalidate||oe.hasClientLoader?J=!0:B.add(ne.route.id))}),B.size===0)return[];let Q=i1(r,h,"data");return J&&B.size>0&&Q.searchParams.set("_routes",e.filter(ne=>B.has(ne.route.id)).map(ne=>ne.route.id).join(",")),[Q.pathname+Q.search]},[h,m,a,o,g,e,r,u]),S=H.useMemo(()=>l1(v,o),[v,o]),N=p1(v);return H.createElement(H.Fragment,null,T.map(B=>H.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...n})),S.map(B=>H.createElement("link",{key:B,rel:"modulepreload",href:B,...n})),N.map(({key:B,link:J})=>H.createElement("link",{key:B,nonce:n.nonce,...J})))}function y1(...r){return e=>{r.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var uT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uT&&(window.__reactRouterVersion="7.9.3")}catch{}function v1(r,e){return aR({basename:e?.basename,getContext:e?.getContext,future:e?.future,history:SA({window:e?.window}),hydrationData:_1(),routes:r,mapRouteProperties:qR,hydrationRouteProperties:FR,dataStrategy:e?.dataStrategy,patchRoutesOnNavigation:e?.patchRoutesOnNavigation,window:e?.window}).initialize()}function _1(){let r=window?.__staticRouterHydrationData;return r&&r.errors&&(r={...r,errors:E1(r.errors)}),r}function E1(r){if(!r)return null;let e=Object.entries(r),n={};for(let[a,o]of e)if(o&&o.__type==="RouteErrorResponse")n[a]=new Oh(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let u=window[o.__subType];if(typeof u=="function")try{let h=new u(o.message);h.stack="",n[a]=h}catch{}}if(n[a]==null){let u=new Error(o.message);u.stack="",n[a]=u}}else n[a]=o;return n}var cT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ph=H.forwardRef(function({onClick:e,discover:n="render",prefetch:a="none",relative:o,reloadDocument:u,replace:h,state:m,target:p,to:g,preventScrollReset:v,viewTransition:T,...S},N){let{basename:B}=H.useContext(si),J=typeof g=="string"&&cT.test(g),Q,ne=!1;if(typeof g=="string"&&J&&(Q=g,uT))try{let R=new URL(window.location.href),O=g.startsWith("//")?new URL(R.protocol+g):new URL(g),k=_r(O.pathname,B);O.origin===R.origin&&k!=null?g=k+O.search+O.hash:ne=!0}catch{Yt(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let oe=CR(g,{relative:o}),[ue,Re,le]=d1(a,S),V=S1(g,{replace:h,state:m,target:p,preventScrollReset:v,relative:o,viewTransition:T});function x(R){e&&e(R),R.defaultPrevented||V(R)}let w=H.createElement("a",{...S,...le,href:Q||oe,onClick:ne||u?e:x,ref:y1(N,Re),target:p,"data-discover":!J&&n==="render"?"true":void 0});return ue&&!J?H.createElement(H.Fragment,null,w,H.createElement(m1,{page:oe})):w});Ph.displayName="Link";var T1=H.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:a="",end:o=!1,style:u,to:h,viewTransition:m,children:p,...g},v){let T=Mu(h,{relative:g.relative}),S=Ns(),N=H.useContext(Du),{navigator:B,basename:J}=H.useContext(si),Q=N!=null&&C1(T)&&m===!0,ne=B.encodeLocation?B.encodeLocation(T).pathname:T.pathname,oe=S.pathname,ue=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(oe=oe.toLowerCase(),ue=ue?ue.toLowerCase():null,ne=ne.toLowerCase()),ue&&J&&(ue=_r(ue,J)||ue);const Re=ne!=="/"&&ne.endsWith("/")?ne.length-1:ne.length;let le=oe===ne||!o&&oe.startsWith(ne)&&oe.charAt(Re)==="/",V=ue!=null&&(ue===ne||!o&&ue.startsWith(ne)&&ue.charAt(ne.length)==="/"),x={isActive:le,isPending:V,isTransitioning:Q},w=le?e:void 0,R;typeof a=="function"?R=a(x):R=[a,le?"active":null,V?"pending":null,Q?"transitioning":null].filter(Boolean).join(" ");let O=typeof u=="function"?u(x):u;return H.createElement(Ph,{...g,"aria-current":w,className:R,ref:v,style:O,to:h,viewTransition:m},typeof p=="function"?p(x):p)});T1.displayName="NavLink";var b1=H.forwardRef(({discover:r="render",fetcherKey:e,navigate:n,reloadDocument:a,replace:o,state:u,method:h=vh,action:m,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:T,...S},N)=>{let B=x1(),J=I1(m,{relative:g}),Q=h.toLowerCase()==="get"?"get":"post",ne=typeof m=="string"&&cT.test(m),oe=ue=>{if(p&&p(ue),ue.defaultPrevented)return;ue.preventDefault();let Re=ue.nativeEvent.submitter,le=Re?.getAttribute("formmethod")||h;B(Re||ue.currentTarget,{fetcherKey:e,method:le,navigate:n,replace:o,state:u,relative:g,preventScrollReset:v,viewTransition:T})};return H.createElement("form",{ref:N,method:Q,action:J,onSubmit:a?p:oe,...S,"data-discover":!ne&&r==="render"?"true":void 0})});b1.displayName="Form";function w1(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hT(r){let e=H.useContext(Cs);return We(e,w1(r)),e}function S1(r,{target:e,replace:n,state:a,preventScrollReset:o,relative:u,viewTransition:h}={}){let m=qo(),p=Ns(),g=Mu(r,{relative:u});return H.useCallback(v=>{if(e1(v,e)){v.preventDefault();let T=n!==void 0?n:Na(p)===Na(g);m(r,{replace:T,state:a,preventScrollReset:o,relative:u,viewTransition:h})}},[p,m,g,n,a,e,r,o,u,h])}var A1=0,R1=()=>`__${String(++A1)}__`;function x1(){let{router:r}=hT("useSubmit"),{basename:e}=H.useContext(si),n=BR();return H.useCallback(async(a,o={})=>{let{action:u,method:h,encType:m,formData:p,body:g}=r1(a,e);if(o.navigate===!1){let v=o.fetcherKey||R1();await r.fetch(v,n,o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,flushSync:o.flushSync})}else await r.navigate(o.action||u,{preventScrollReset:o.preventScrollReset,formData:p,body:g,formMethod:o.method||h,formEncType:o.encType||m,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,n])}function I1(r,{relative:e}={}){let{basename:n}=H.useContext(si),a=H.useContext(oi);We(a,"useFormAction must be used inside a RouteContext");let[o]=a.matches.slice(-1),u={...Mu(r||".",{relative:e})},h=Ns();if(r==null){u.search=h.search;let m=new URLSearchParams(u.search),p=m.getAll("index");if(p.some(v=>v==="")){m.delete("index"),p.filter(T=>T).forEach(T=>m.append("index",T));let v=m.toString();u.search=v?`?${v}`:""}}return(!r||r===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Zr([n,u.pathname])),Na(u)}function C1(r,{relative:e}={}){let n=H.useContext(Tp);We(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=hT("useViewTransitionState"),o=Mu(r,{relative:e});if(!n.isTransitioning)return!1;let u=_r(n.currentLocation.pathname,a)||n.currentLocation.pathname,h=_r(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Dh(o.pathname,h)!=null||Dh(o.pathname,u)!=null}var N1=zE();function D1(r){return H.createElement(KR,{flushSync:N1.flushSync,...r})}const fT=r=>{const{children:e,title:n,type:a}=r;return I.jsx("div",{className:"flex justify-center  min-h-screen items-center",children:I.jsxs("div",{className:"w-full max-w-xs",children:[I.jsx("h1",{className:"text-3xl font-bold mb-2 text-blue-600",children:n}),I.jsx("p",{className:"font-medium text-slate-500",children:"Welcome,Plese enter your name"}),e,I.jsx(O1,{type:a})]})})},O1=({type:r})=>r=="login"?I.jsxs("p",{className:"text-sm mt-5 text-center",children:["Dont Have An Account?","",I.jsx(Ph,{to:"/Register",className:"font-bold text-blue-600",children:"Register"})]}):I.jsxs("p",{className:"text-sm mt-5 text-center",children:["Already Have an Account?","",I.jsx(Ph,{to:"/Login",className:"font-bold text-blue-600",children:"Login"})]}),kh=({children:r,className:e="bg-blue-600",onClick:n,type:a="button"})=>I.jsx("button",{type:a,className:`h-10 px-6 font-semibold rounded-lg text-white text-center ${e} hover:opacity-90 transition duration-200 shadow-md`,onClick:n,children:r}),Jr=({label:r,name:e,type:n,placeholder:a,onChange:o})=>I.jsxs("div",{className:"mb-3",children:[I.jsx("label",{className:"block mb-1",children:r}),I.jsx("input",{className:"border p-2 w-full",type:n,name:e,placeholder:a,onChange:o})]}),M1=()=>{};var o0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},P1=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[a++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],h=r[n++],m=r[n++],p=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;e[a++]=String.fromCharCode(55296+(p>>10)),e[a++]=String.fromCharCode(56320+(p&1023))}else{const u=r[n++],h=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},mT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const u=r[o],h=o+1<r.length,m=h?r[o+1]:0,p=o+2<r.length,g=p?r[o+2]:0,v=u>>2,T=(u&3)<<4|m>>4;let S=(m&15)<<2|g>>6,N=g&63;p||(N=64,h||(S=64)),a.push(n[v],n[T],n[S],n[N])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(dT(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):P1(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],m=o<r.length?n[r.charAt(o)]:0;++o;const g=o<r.length?n[r.charAt(o)]:64;++o;const T=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||m==null||g==null||T==null)throw new k1;const S=u<<2|m>>4;if(a.push(S),g!==64){const N=m<<4&240|g>>2;if(a.push(N),T!==64){const B=g<<6&192|T;a.push(B)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class k1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const V1=function(r){const e=dT(r);return mT.encodeByteArray(e,!0)},Vh=function(r){return V1(r).replace(/\./g,"")},pT=function(r){try{return mT.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1=()=>L1().__FIREBASE_DEFAULTS__,j1=()=>{if(typeof process>"u"||typeof o0>"u")return;const r=o0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},z1=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&pT(r[1]);return e&&JSON.parse(e)},nf=()=>{try{return M1()||U1()||j1()||z1()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},gT=r=>nf()?.emulatorHosts?.[r],B1=r=>{const e=gT(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},yT=()=>nf()?.config,vT=r=>nf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function _T(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Vh(JSON.stringify(n)),Vh(JSON.stringify(h)),""].join(".")}const hu={};function F1(){const r={prod:[],emulator:[]};for(const e of Object.keys(hu))hu[e]?r.emulator.push(e):r.prod.push(e);return r}function G1(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let l0=!1;function ET(r,e){if(typeof window>"u"||typeof document>"u"||!Fo(window.location.host)||hu[r]===e||hu[r]||l0)return;hu[r]=e;function n(S){return`__firebase__banner__${S}`}const a="__firebase__banner",u=F1().prod.length>0;function h(){const S=document.getElementById(a);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function g(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{l0=!0,h()},S}function v(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=G1(a),N=n("text"),B=document.getElementById(N)||document.createElement("span"),J=n("learnmore"),Q=document.getElementById(J)||document.createElement("a"),ne=n("preprendIcon"),oe=document.getElementById(ne)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const ue=S.element;m(ue),v(Q,J);const Re=g();p(oe,ne),ue.append(oe,B,Q,Re),document.body.appendChild(ue)}u?(B.innerText="Preview backend disconnected.",oe.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(oe.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function K1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function Y1(){const r=nf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Q1(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function X1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function W1(){const r=Rn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function J1(){return!Y1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Z1(){try{return typeof indexedDB=="object"}catch{return!1}}function ex(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="FirebaseError";class Li extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=tx,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pu.prototype.create)}}class Pu{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?nx(u,a):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new Li(o,m,a)}}function nx(r,e){return r.replace(rx,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const rx=/\{\$([^}]+)}/g;function ix(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ws(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const u=r[o],h=e[o];if(u0(u)&&u0(h)){if(!ws(u,h))return!1}else if(u!==h)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function u0(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(r){const e=[];for(const[n,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function su(r){const e={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,u]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function ou(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function ax(r,e){const n=new sx(r,e);return n.subscribe.bind(n)}class sx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");ox(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ox(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Sm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(r){return r&&r._delegate?r._delegate:r}class Ss{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new H1;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),a=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cx(e))try{this.getOrInitializeService({instanceIdentifier:_s})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch{}}}}clearInstance(e=_s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=_s){return this.instances.has(e)}getOptions(e=_s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);a===m&&h.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const u=this.instances.get(a);return u&&e(u,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:ux(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=_s){return this.component?this.component.multipleInstances?e:_s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ux(r){return r===_s?void 0:r}function cx(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new lx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Je||(Je={}));const fx={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},dx=Je.INFO,mx={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},px=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=mx[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xp{constructor(e){this.name=e,this._logLevel=dx,this._logHandler=px,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const gx=(r,e)=>e.some(n=>r instanceof n);let c0,h0;function yx(){return c0||(c0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vx(){return h0||(h0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const TT=new WeakMap,Bm=new WeakMap,bT=new WeakMap,Am=new WeakMap,Ip=new WeakMap;function _x(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",h)},u=()=>{n(Sa(r.result)),o()},h=()=>{a(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&TT.set(n,r)}).catch(()=>{}),Ip.set(e,r),e}function Ex(r){if(Bm.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",h),r.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",h),r.addEventListener("abort",h)});Bm.set(r,e)}let Hm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||bT.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sa(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function Tx(r){Hm=r(Hm)}function bx(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(Rm(this),e,...n);return bT.set(a,e.sort?e.sort():[e]),Sa(a)}:vx().includes(r)?function(...e){return r.apply(Rm(this),e),Sa(TT.get(this))}:function(...e){return Sa(r.apply(Rm(this),e))}}function wx(r){return typeof r=="function"?bx(r):(r instanceof IDBTransaction&&Ex(r),gx(r,yx())?new Proxy(r,Hm):r)}function Sa(r){if(r instanceof IDBRequest)return _x(r);if(Am.has(r))return Am.get(r);const e=wx(r);return e!==r&&(Am.set(r,e),Ip.set(e,r)),e}const Rm=r=>Ip.get(r);function Sx(r,e,{blocked:n,upgrade:a,blocking:o,terminated:u}={}){const h=indexedDB.open(r,e),m=Sa(h);return a&&h.addEventListener("upgradeneeded",p=>{a(Sa(h.result),p.oldVersion,p.newVersion,Sa(h.transaction),p)}),n&&h.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),m.then(p=>{u&&p.addEventListener("close",()=>u()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),m}const Ax=["get","getKey","getAll","getAllKeys","count"],Rx=["put","add","delete","clear"],xm=new Map;function f0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(xm.get(e))return xm.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=Rx.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||Ax.includes(n)))return;const u=async function(h,...m){const p=this.transaction(h,o?"readwrite":"readonly");let g=p.store;return a&&(g=g.index(m.shift())),(await Promise.all([g[n](...m),o&&p.done]))[0]};return xm.set(e,u),u}Tx(r=>({...r,get:(e,n,a)=>f0(e,n)||r.get(e,n,a),has:(e,n)=>!!f0(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ix(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function Ix(r){return r.getComponent()?.type==="VERSION"}const qm="@firebase/app",d0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi=new xp("@firebase/app"),Cx="@firebase/app-compat",Nx="@firebase/analytics-compat",Dx="@firebase/analytics",Ox="@firebase/app-check-compat",Mx="@firebase/app-check",Px="@firebase/auth",kx="@firebase/auth-compat",Vx="@firebase/database",Lx="@firebase/data-connect",Ux="@firebase/database-compat",jx="@firebase/functions",zx="@firebase/functions-compat",Bx="@firebase/installations",Hx="@firebase/installations-compat",qx="@firebase/messaging",Fx="@firebase/messaging-compat",Gx="@firebase/performance",Kx="@firebase/performance-compat",Yx="@firebase/remote-config",$x="@firebase/remote-config-compat",Qx="@firebase/storage",Xx="@firebase/storage-compat",Wx="@firebase/firestore",Jx="@firebase/ai",Zx="@firebase/firestore-compat",eI="firebase",tI="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm="[DEFAULT]",nI={[qm]:"fire-core",[Cx]:"fire-core-compat",[Dx]:"fire-analytics",[Nx]:"fire-analytics-compat",[Mx]:"fire-app-check",[Ox]:"fire-app-check-compat",[Px]:"fire-auth",[kx]:"fire-auth-compat",[Vx]:"fire-rtdb",[Lx]:"fire-data-connect",[Ux]:"fire-rtdb-compat",[jx]:"fire-fn",[zx]:"fire-fn-compat",[Bx]:"fire-iid",[Hx]:"fire-iid-compat",[qx]:"fire-fcm",[Fx]:"fire-fcm-compat",[Gx]:"fire-perf",[Kx]:"fire-perf-compat",[Yx]:"fire-rc",[$x]:"fire-rc-compat",[Qx]:"fire-gcs",[Xx]:"fire-gcs-compat",[Wx]:"fire-fst",[Zx]:"fire-fst-compat",[Jx]:"fire-vertex","fire-js":"fire-js",[eI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh=new Map,rI=new Map,Gm=new Map;function m0(r,e){try{r.container.addComponent(e)}catch(n){Mi.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ko(r){const e=r.name;if(Gm.has(e))return Mi.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,r);for(const n of Lh.values())m0(n,r);for(const n of rI.values())m0(n,r);return!0}function Cp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function ir(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Aa=new Pu("app","Firebase",iI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Ss("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=tI;function wT(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a={name:Fm,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw Aa.create("bad-app-name",{appName:String(o)});if(n||(n=yT()),!n)throw Aa.create("no-options");const u=Lh.get(o);if(u){if(ws(n,u.options)&&ws(a,u.config))return u;throw Aa.create("duplicate-app",{appName:o})}const h=new hx(o);for(const p of Gm.values())h.addComponent(p);const m=new aI(n,a,h);return Lh.set(o,m),m}function ST(r=Fm){const e=Lh.get(r);if(!e&&r===Fm&&yT())return wT();if(!e)throw Aa.create("no-app",{appName:r});return e}function Ra(r,e,n){let a=nI[r]??r;n&&(a+=`-${n}`);const o=a.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${a}" with version "${e}":`];o&&h.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mi.warn(h.join(" "));return}ko(new Ss(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebase-heartbeat-database",oI=1,Eu="firebase-heartbeat-store";let Im=null;function AT(){return Im||(Im=Sx(sI,oI,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Eu)}catch(n){console.warn(n)}}}}).catch(r=>{throw Aa.create("idb-open",{originalErrorMessage:r.message})})),Im}async function lI(r){try{const n=(await AT()).transaction(Eu),a=await n.objectStore(Eu).get(RT(r));return await n.done,a}catch(e){if(e instanceof Li)Mi.warn(e.message);else{const n=Aa.create("idb-get",{originalErrorMessage:e?.message});Mi.warn(n.message)}}}async function p0(r,e){try{const a=(await AT()).transaction(Eu,"readwrite");await a.objectStore(Eu).put(e,RT(r)),await a.done}catch(n){if(n instanceof Li)Mi.warn(n.message);else{const a=Aa.create("idb-set",{originalErrorMessage:n?.message});Mi.warn(a.message)}}}function RT(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=1024,cI=30;class hI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dI(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=g0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:n}),this._heartbeatsCache.heartbeats.length>cI){const o=mI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Mi.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=g0(),{heartbeatsToSend:n,unsentEntries:a}=fI(this._heartbeatsCache.heartbeats),o=Vh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Mi.warn(e),""}}}function g0(){return new Date().toISOString().substring(0,10)}function fI(r,e=uI){const n=[];let a=r.slice();for(const o of r){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),y0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),y0(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class dI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Z1()?ex().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return p0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return p0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function y0(r){return Vh(JSON.stringify({version:2,heartbeats:r})).length}function mI(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let a=1;a<r.length;a++)r[a].date<n&&(n=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(r){ko(new Ss("platform-logger",e=>new xx(e),"PRIVATE")),ko(new Ss("heartbeat",e=>new hI(e),"PRIVATE")),Ra(qm,d0,r),Ra(qm,d0,"esm2020"),Ra("fire-js","")}pI("");function xT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gI=xT,IT=new Pu("auth","Firebase",xT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uh=new xp("@firebase/auth");function yI(r,...e){Uh.logLevel<=Je.WARN&&Uh.warn(`Auth (${Go}): ${r}`,...e)}function Eh(r,...e){Uh.logLevel<=Je.ERROR&&Uh.error(`Auth (${Go}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(r,...e){throw Dp(r,...e)}function jr(r,...e){return Dp(r,...e)}function Np(r,e,n){const a={...gI(),[e]:n};return new Pu("auth","Firebase",a).create(e,{appName:r.name})}function Oi(r){return Np(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vI(r,e,n){const a=n;if(!(e instanceof a))throw a.name!==e.constructor.name&&Er(r,"argument-error"),Np(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Dp(r,...e){if(typeof r!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(n,...a)}return IT.create(r,...e)}function Me(r,e,...n){if(!r)throw Dp(e,...n)}function Ni(r){const e="INTERNAL ASSERTION FAILED: "+r;throw Eh(e),new Error(e)}function Pi(r,e){r||Ni(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Km(){return typeof self<"u"&&self.location?.href||""}function _I(){return v0()==="http:"||v0()==="https:"}function v0(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_I()||Q1()||"connection"in navigator)?navigator.onLine:!0}function TI(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Pi(n>e,"Short delay should be less than long delay!"),this.isMobile=K1()||X1()}get(){return EI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(r,e){Pi(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ni("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ni("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ni("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bI={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SI=new Vu(3e4,6e4);function Ua(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Ui(r,e,n,a,o={}){return NT(r,o,async()=>{let u={},h={};a&&(e==="GET"?h=a:u={body:JSON.stringify(a)});const m=ku({key:r.config.apiKey,...h}).slice(1),p=await r._getAdditionalHeaders();p["Content-Type"]="application/json",r.languageCode&&(p["X-Firebase-Locale"]=r.languageCode);const g={method:e,headers:p,...u};return $1()||(g.referrerPolicy="no-referrer"),r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(g.credentials="include"),CT.fetch()(await DT(r,r.config.apiHost,n,m),g)})}async function NT(r,e,n){r._canInitEmulator=!1;const a={...bI,...e};try{const o=new RI(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw uh(r,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const m=u.ok?h.errorMessage:h.error.message,[p,g]=m.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(r,"credential-already-in-use",h);if(p==="EMAIL_EXISTS")throw uh(r,"email-already-in-use",h);if(p==="USER_DISABLED")throw uh(r,"user-disabled",h);const v=a[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw Np(r,v,g);Er(r,v)}}catch(o){if(o instanceof Li)throw o;Er(r,"network-request-failed",{message:String(o)})}}async function Lu(r,e,n,a,o={}){const u=await Ui(r,e,n,a,o);return"mfaPendingCredential"in u&&Er(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function DT(r,e,n,a){const o=`${e}${n}?${a}`,u=r,h=u.config.emulator?Op(r.config,o):`${r.config.apiScheme}://${o}`;return wI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function AI(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class RI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(jr(this.auth,"network-request-failed")),SI.get())})}}function uh(r,e,n){const a={appName:r.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=jr(r,e,a);return o.customData._tokenResponse=n,o}function _0(r){return r!==void 0&&r.enterprise!==void 0}class xI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function II(r,e){return Ui(r,"GET","/v2/recaptchaConfig",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(r,e){return Ui(r,"POST","/v1/accounts:delete",e)}async function jh(r,e){return Ui(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NI(r,e=!1){const n=Fn(r),a=await n.getIdToken(e),o=Mp(a);Me(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:a,authTime:fu(Cm(o.auth_time)),issuedAtTime:fu(Cm(o.iat)),expirationTime:fu(Cm(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Cm(r){return Number(r)*1e3}function Mp(r){const[e,n,a]=r.split(".");if(e===void 0||n===void 0||a===void 0)return Eh("JWT malformed, contained fewer than 3 sections"),null;try{const o=pT(n);return o?JSON.parse(o):(Eh("Failed to decode base64 JWT payload"),null)}catch(o){return Eh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function E0(r){const e=Mp(r);return Me(e,"internal-error"),Me(typeof e.exp<"u","internal-error"),Me(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vo(r,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof Li&&DI(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function DI({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=fu(this.lastLoginAt),this.creationTime=fu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zh(r){const e=r.auth,n=await r.getIdToken(),a=await Vo(r,jh(e,{idToken:n}));Me(a?.users.length,e,"internal-error");const o=a.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?OT(o.providerUserInfo):[],h=PI(r.providerData,u),m=r.isAnonymous,p=!(r.email&&o.passwordHash)&&!h?.length,g=m?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(r,v)}async function MI(r){const e=Fn(r);await zh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function PI(r,e){return[...r.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function OT(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kI(r,e){const n=await NT(r,{},async()=>{const a=ku({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,h=await DT(r,o,"/v1/token",`key=${u}`),m=await r._getAdditionalHeaders();m["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:m,body:a};return r.emulatorConfig&&Fo(r.emulatorConfig.host)&&(p.credentials="include"),CT.fetch()(h,p)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function VI(r,e){return Ui(r,"POST","/v2/accounts:revokeToken",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Me(e.idToken,"internal-error"),Me(typeof e.idToken<"u","internal-error"),Me(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):E0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Me(e.length!==0,"internal-error");const n=E0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Me(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:u}=await kI(e,n);this.updateTokensAndExpiration(a,o,Number(u))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:u}=n,h=new Io;return a&&(Me(typeof a=="string","internal-error",{appName:e}),h.refreshToken=a),o&&(Me(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(Me(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Io,this.toJSON())}_performRefresh(){return Ni("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(r,e){Me(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Lr{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new OI(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ym(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Vo(this,this.stsTokenManager.getToken(this.auth,e));return Me(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NI(this,e)}reload(){return MI(this)}_assign(e){this!==e&&(Me(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Lr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Me(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await zh(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(Oi(this.auth));const e=await this.getIdToken();return await Vo(this,CI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,m=n.tenantId??void 0,p=n._redirectEventId??void 0,g=n.createdAt??void 0,v=n.lastLoginAt??void 0,{uid:T,emailVerified:S,isAnonymous:N,providerData:B,stsTokenManager:J}=n;Me(T&&J,e,"internal-error");const Q=Io.fromJSON(this.name,J);Me(typeof T=="string",e,"internal-error"),ga(a,e.name),ga(o,e.name),Me(typeof S=="boolean",e,"internal-error"),Me(typeof N=="boolean",e,"internal-error"),ga(u,e.name),ga(h,e.name),ga(m,e.name),ga(p,e.name),ga(g,e.name),ga(v,e.name);const ne=new Lr({uid:T,auth:e,email:o,emailVerified:S,displayName:a,isAnonymous:N,photoURL:h,phoneNumber:u,tenantId:m,stsTokenManager:Q,createdAt:g,lastLoginAt:v});return B&&Array.isArray(B)&&(ne.providerData=B.map(oe=>({...oe}))),p&&(ne._redirectEventId=p),ne}static async _fromIdTokenResponse(e,n,a=!1){const o=new Io;o.updateFromServerResponse(n);const u=new Lr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await zh(u),u}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Me(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?OT(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,m=new Io;m.updateFromIdToken(a);const p=new Lr({uid:o.localId,auth:e,stsTokenManager:m,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0=new Map;function Di(r){Pi(r instanceof Function,"Expected a class definition");let e=T0.get(r);return e?(Pi(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,T0.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}MT.type="NONE";const b0=MT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Th(r,e,n){return`firebase:${r}:${e}:${n}`}class Co{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:u}=this.auth;this.fullUserKey=Th(this.userKey,o.apiKey,u),this.fullPersistenceKey=Th("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await jh(this.auth,{idToken:e}).catch(()=>{});return n?Lr._fromGetAccountInfoResponse(this.auth,n,e):null}return Lr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new Co(Di(b0),e,a);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Di(b0);const h=Th(a,e.config.apiKey,e.name);let m=null;for(const g of n)try{const v=await g._get(h);if(v){let T;if(typeof v=="string"){const S=await jh(e,{idToken:v}).catch(()=>{});if(!S)break;T=await Lr._fromGetAccountInfoResponse(e,S,v)}else T=Lr._fromJSON(e,v);g!==u&&(m=T),u=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!p.length?new Co(u,e,a):(u=p[0],m&&await u._set(h,m.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Co(u,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(LT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(PT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jT(e))return"Blackberry";if(zT(e))return"Webos";if(kT(e))return"Safari";if((e.includes("chrome/")||VT(e))&&!e.includes("edge/"))return"Chrome";if(UT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(n);if(a?.length===2)return a[1]}return"Other"}function PT(r=Rn()){return/firefox\//i.test(r)}function kT(r=Rn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function VT(r=Rn()){return/crios\//i.test(r)}function LT(r=Rn()){return/iemobile/i.test(r)}function UT(r=Rn()){return/android/i.test(r)}function jT(r=Rn()){return/blackberry/i.test(r)}function zT(r=Rn()){return/webos/i.test(r)}function Pp(r=Rn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function LI(r=Rn()){return Pp(r)&&!!window.navigator?.standalone}function UI(){return W1()&&document.documentMode===10}function BT(r=Rn()){return Pp(r)||UT(r)||zT(r)||jT(r)||/windows phone/i.test(r)||LT(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(r,e=[]){let n;switch(r){case"Browser":n=w0(Rn());break;case"Worker":n=`${w0(Rn())}-${r}`;break;default:n=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Go}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=u=>new Promise((h,m)=>{try{const p=e(u);h(p)}catch(p){m(p)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(r,e={}){return Ui(r,"GET","/v2/passwordPolicy",Ua(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=6;class HI{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??BI,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new S0(this),this.idTokenSubscription=new S0(this),this.beforeStateQueue=new jI(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Di(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Co.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await jh(this,{idToken:e}),a=await Lr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ir(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=a?._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===h)&&m?.user&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Me(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await zh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=TI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(Oi(this));const n=e?Fn(e):null;return n&&Me(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Me(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(Oi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(Oi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Di(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await zI(this),n=new HI(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pu("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await VI(this,a)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Di(e)||this._popupRedirectResolver;Me(n,this,"argument-error"),this.redirectPersistenceManager=await Co.create(this,[Di(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const m=this._isInitialized?Promise.resolve():this._initializationPromise;if(Me(m,this,"internal-error"),m.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,a,o);return()=>{h=!0,p()}}else{const p=e.addObserver(n);return()=>{h=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Me(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=HT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){if(ir(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&yI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function ja(r){return Fn(r)}class S0{constructor(e){this.auth=e,this.observer=null,this.addObserver=ax(n=>this.observer=n)}get next(){return Me(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FI(r){rf=r}function qT(r){return rf.loadJS(r)}function GI(){return rf.recaptchaEnterpriseScript}function KI(){return rf.gapiScript}function YI(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class $I{constructor(){this.enterprise=new QI}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class QI{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const XI="recaptcha-enterprise",FT="NO_RECAPTCHA";class WI{constructor(e){this.type=XI,this.auth=ja(e)}async verify(e="verify",n=!1){async function a(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,m)=>{II(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)m(new Error("recaptcha Enterprise site key undefined"));else{const g=new xI(p);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(p=>{m(p)})})}function o(u,h,m){const p=window.grecaptcha;_0(p)?p.enterprise.ready(()=>{p.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(FT)})}):m(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $I().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{a(this.auth).then(m=>{if(!n&&_0(window.grecaptcha))o(m,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let p=GI();p.length!==0&&(p+=m),qT(p).then(()=>{o(m,u,h)}).catch(g=>{h(g)})}}).catch(m=>{h(m)})})}}async function A0(r,e,n,a=!1,o=!1){const u=new WI(r);let h;if(o)h=FT;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const m={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in m){const p=m.phoneEnrollmentInfo.phoneNumber,g=m.phoneEnrollmentInfo.recaptchaToken;Object.assign(m,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in m){const p=m.phoneSignInInfo.recaptchaToken;Object.assign(m,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return m}return a?Object.assign(m,{captchaResp:h}):Object.assign(m,{captchaResponse:h}),Object.assign(m,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(m,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),m}async function $m(r,e,n,a,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await A0(r,e,n,n==="getOobCode");return a(r,u)}else return a(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await A0(r,e,n,n==="getOobCode");return a(r,h)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(r,e){const n=Cp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ws(u,e??{}))return o;Er(o,"already-initialized")}return n.initialize({options:e})}function ZI(r,e){const n=e?.persistence||[],a=(Array.isArray(n)?n:[n]).map(Di);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e?.popupRedirectResolver)}function eC(r,e,n){const a=ja(r);Me(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,u=GT(e),{host:h,port:m}=tC(e),p=m===null?"":`:${m}`,g={url:`${u}//${h}${p}/`},v=Object.freeze({host:h,port:m,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Me(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Me(ws(g,a.config.emulator)&&ws(v,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=g,a.emulatorConfig=v,a.settings.appVerificationDisabledForTesting=!0,Fo(h)?(_T(`${u}//${h}${p}`),ET("Auth",!0)):nC()}function GT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function tC(r){const e=GT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const u=o[1];return{host:u,port:R0(a.substr(u.length+1))}}else{const[u,h]=a.split(":");return{host:u,port:R0(h)}}}function R0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function nC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ni("not implemented")}_getIdTokenResponse(e){return Ni("not implemented")}_linkToIdToken(e,n){return Ni("not implemented")}_getReauthenticationResolver(e){return Ni("not implemented")}}async function rC(r,e){return Ui(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(r,e){return Lu(r,"POST","/v1/accounts:signInWithPassword",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(r,e){return Lu(r,"POST","/v1/accounts:signInWithEmailLink",Ua(r,e))}async function sC(r,e){return Lu(r,"POST","/v1/accounts:signInWithEmailLink",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends kp{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Tu(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new Tu(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,n,"signInWithPassword",iC);case"emailLink":return aC(e,{email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return $m(e,a,"signUpPassword",rC);case"emailLink":return sC(e,{idToken:n,email:this._email,oobCode:this._password});default:Er(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function No(r,e){return Lu(r,"POST","/v1/accounts:signInWithIdp",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC="http://localhost";class As extends kp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new As(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Er("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...u}=n;if(!a||!o)return null;const h=new As(a,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return No(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,No(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,No(e,n)}buildRequest(){const e={requestUri:oC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ku(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uC(r){const e=su(ou(r)).link,n=e?su(ou(e)).deep_link_id:null,a=su(ou(r)).deep_link_id;return(a?su(ou(a)).link:null)||a||n||e||r}class Vp{constructor(e){const n=su(ou(e)),a=n.apiKey??null,o=n.oobCode??null,u=lC(n.mode??null);Me(a&&o&&u,"argument-error"),this.apiKey=a,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=uC(e);try{return new Vp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.providerId=Ko.PROVIDER_ID}static credential(e,n){return Tu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=Vp.parseLink(n);return Me(a,"argument-error"),Tu._fromEmailAndCode(e,a.code,a.tenantId)}}Ko.PROVIDER_ID="password";Ko.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ko.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends Lp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Uu{constructor(){super("facebook.com")}static credential(e){return As._fromParams({providerId:_a.PROVIDER_ID,signInMethod:_a.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _a.credentialFromTaggedObject(e)}static credentialFromError(e){return _a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _a.credential(e.oauthAccessToken)}catch{return null}}}_a.FACEBOOK_SIGN_IN_METHOD="facebook.com";_a.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends Uu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return As._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return Ci.credential(n,a)}catch{return null}}}Ci.GOOGLE_SIGN_IN_METHOD="google.com";Ci.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends Uu{constructor(){super("github.com")}static credential(e){return As._fromParams({providerId:Ea.PROVIDER_ID,signInMethod:Ea.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ea.credentialFromTaggedObject(e)}static credentialFromError(e){return Ea.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ea.credential(e.oauthAccessToken)}catch{return null}}}Ea.GITHUB_SIGN_IN_METHOD="github.com";Ea.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta extends Uu{constructor(){super("twitter.com")}static credential(e,n){return As._fromParams({providerId:Ta.PROVIDER_ID,signInMethod:Ta.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ta.credentialFromTaggedObject(e)}static credentialFromError(e){return Ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return Ta.credential(n,a)}catch{return null}}}Ta.TWITTER_SIGN_IN_METHOD="twitter.com";Ta.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cC(r,e){return Lu(r,"POST","/v1/accounts:signUp",Ua(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const u=await Lr._fromIdTokenResponse(e,a,o),h=x0(a);return new Rs({user:u,providerId:h,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=x0(a);return new Rs({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function x0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bh extends Li{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,Bh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new Bh(e,n,a,o)}}function KT(r,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Bh._fromErrorAndOperation(r,u,e,a):u})}async function hC(r,e,n=!1){const a=await Vo(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Rs._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(r,e,n=!1){const{auth:a}=r;if(ir(a.app))return Promise.reject(Oi(a));const o="reauthenticate";try{const u=await Vo(r,KT(a,o,e,r),n);Me(u.idToken,a,"internal-error");const h=Mp(u.idToken);Me(h,a,"internal-error");const{sub:m}=h;return Me(r.uid===m,a,"user-mismatch"),Rs._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Er(a,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YT(r,e,n=!1){if(ir(r.app))return Promise.reject(Oi(r));const a="signIn",o=await KT(r,a,e),u=await Rs._fromIdTokenResponse(r,a,o);return n||await r._updateCurrentUser(u.user),u}async function dC(r,e){return YT(ja(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $T(r){const e=ja(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mC(r,e,n){if(ir(r.app))return Promise.reject(Oi(r));const a=ja(r),h=await $m(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",cC).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&$T(r),p}),m=await Rs._fromIdTokenResponse(a,"signIn",h);return await a._updateCurrentUser(m.user),m}function pC(r,e,n){return ir(r.app)?Promise.reject(Oi(r)):dC(Fn(r),Ko.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&$T(r),a})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(r,e){return Ui(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const a=Fn(r),u={idToken:await a.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},h=await Vo(a,gC(a.auth,u));a.displayName=h.displayName||null,a.photoURL=h.photoUrl||null;const m=a.providerData.find(({providerId:p})=>p==="password");m&&(m.displayName=a.displayName,m.photoURL=a.photoURL),await a._updateTokensIfNecessary(h)}function vC(r,e,n,a){return Fn(r).onIdTokenChanged(e,n,a)}function _C(r,e,n){return Fn(r).beforeAuthStateChanged(e,n)}const Hh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Hh,"1"),this.storage.removeItem(Hh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=1e3,TC=10;class XT extends QT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,m,p)=>{this.notifyListeners(h,p)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(a);!n&&this.localCache[a]===h||this.notifyListeners(a,h)},u=this.storage.getItem(a);UI()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,TC):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}XT.type="LOCAL";const bC=XT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends QT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}WT.type="SESSION";const JT=WT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new af(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const m=Array.from(h).map(async g=>g(n.origin,u)),p=await wC(m);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}af.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(r="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((m,p)=>{const g=Up("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},a);h={messageChannel:o,onMessage(T){const S=T;if(S.data.eventId===g)switch(S.data.status){case"ack":clearTimeout(v),u=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),m(S.data.response);break;default:clearTimeout(v),clearTimeout(u),p(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function AC(r){ei().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function RC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xC(){return navigator?.serviceWorker?.controller||null}function IC(){return ZT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eb="firebaseLocalStorageDb",CC=1,qh="firebaseLocalStorage",tb="fbase_key";class ju{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sf(r,e){return r.transaction([qh],e?"readwrite":"readonly").objectStore(qh)}function NC(){const r=indexedDB.deleteDatabase(eb);return new ju(r).toPromise()}function Qm(){const r=indexedDB.open(eb,CC);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(qh,{keyPath:tb})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(qh)?e(a):(a.close(),await NC(),e(await Qm()))})})}async function I0(r,e,n){const a=sf(r,!0).put({[tb]:e,value:n});return new ju(a).toPromise()}async function DC(r,e){const n=sf(r,!1).get(e),a=await new ju(n).toPromise();return a===void 0?null:a.value}function C0(r,e){const n=sf(r,!0).delete(e);return new ju(n).toPromise()}const OC=800,MC=3;class nb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>MC)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=af._getInstance(IC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await RC(),!this.activeServiceWorker)return;this.sender=new SC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await I0(e,Hh,"1"),await C0(e,Hh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>I0(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>DC(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>C0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=sf(o,!1).getAll();return new ju(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nb.type="LOCAL";const PC=nb;new Vu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(r,e){return e?Di(e):(Me(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends kp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return No(e,this._buildIdpRequest())}_linkToIdToken(e,n){return No(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return No(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kC(r){return YT(r.auth,new jp(r),r.bypassAuthState)}function VC(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),fC(n,new jp(r),r.bypassAuthState)}async function LC(r){const{auth:e,user:n}=r;return Me(n,e,"internal-error"),hC(n,new jp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ib{constructor(e,n,a,o,u=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:u,error:h,type:m}=e;if(h){this.reject(h);return}const p={auth:this.auth,requestUri:n,sessionId:a,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(m)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kC;case"linkViaPopup":case"linkViaRedirect":return LC;case"reauthViaPopup":case"reauthViaRedirect":return VC;default:Er(this.auth,"internal-error")}}resolve(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=new Vu(2e3,1e4);async function jC(r,e,n){if(ir(r.app))return Promise.reject(jr(r,"operation-not-supported-in-this-environment"));const a=ja(r);vI(r,e,Lp);const o=rb(a,n);return new Ts(a,"signInViaPopup",e,o).executeNotNull()}class Ts extends ib{constructor(e,n,a,o,u){super(e,n,o,u),this.provider=a,this.authWindow=null,this.pollId=null,Ts.currentPopupAction&&Ts.currentPopupAction.cancel(),Ts.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Me(e,this.auth,"internal-error"),e}async onExecution(){Pi(this.filter.length===1,"Popup operations only handle one event");const e=Up();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(jr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ts.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,UC.get())};e()}}Ts.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC="pendingRedirect",bh=new Map;class BC extends ib{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=bh.get(this.auth._key());if(!e){try{const a=await HC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}bh.set(this.auth._key(),e)}return this.bypassAuthState||bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HC(r,e){const n=GC(e),a=FC(r);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function qC(r,e){bh.set(r._key(),e)}function FC(r){return Di(r._redirectPersistence)}function GC(r){return Th(zC,r.config.apiKey,r.name)}async function KC(r,e,n=!1){if(ir(r.app))return Promise.reject(Oi(r));const a=ja(r),o=rb(a,e),h=await new BC(a,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await a._persistUserIfCurrent(h.user),await a._setRedirectUser(null,e)),h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=600*1e3;class $C{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ab(e)){const a=e.error.code?.split("auth/")[1]||"internal-error";n.onError(jr(this.auth,a))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YC&&this.cachedEventUids.clear(),this.cachedEventUids.has(N0(e))}saveEventToCache(e){this.cachedEventUids.add(N0(e)),this.lastProcessedEventTime=Date.now()}}function N0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ab({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function QC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ab(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XC(r,e={}){return Ui(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,JC=/^https?/;async function ZC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await XC(r);for(const n of e)try{if(eN(n))return}catch{}Er(r,"unauthorized-domain")}function eN(r){const e=Km(),{protocol:n,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const h=new URL(r);return h.hostname===""&&a===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===a}if(!JC.test(n))return!1;if(WC.test(r))return a===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new Vu(3e4,6e4);function D0(){const r=ei().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function nN(r){return new Promise((e,n)=>{function a(){D0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{D0(),n(jr(r,"network-request-failed"))},timeout:tN.get()})}if(ei().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ei().gapi?.load)a();else{const o=YI("iframefcb");return ei()[o]=()=>{gapi.load?a():n(jr(r,"network-request-failed"))},qT(`${KI()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw wh=null,e})}let wh=null;function rN(r){return wh=wh||nN(r),wh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iN=new Vu(5e3,15e3),aN="__/auth/iframe",sN="emulator/auth/iframe",oN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uN(r){const e=r.config;Me(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Op(e,sN):`https://${r.config.authDomain}/${aN}`,a={apiKey:e.apiKey,appName:r.name,v:Go},o=lN.get(r.config.apiHost);o&&(a.eid=o);const u=r._getFrameworks();return u.length&&(a.fw=u.join(",")),`${n}?${ku(a).slice(1)}`}async function cN(r){const e=await rN(r),n=ei().gapi;return Me(n,r,"internal-error"),e.open({where:document.body,url:uN(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:oN,dontclear:!0},a=>new Promise(async(o,u)=>{await a.restyle({setHideOnLeave:!1});const h=jr(r,"network-request-failed"),m=ei().setTimeout(()=>{u(h)},iN.get());function p(){ei().clearTimeout(m),o(a)}a.ping(p).then(p,()=>{u(h)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fN=500,dN=600,mN="_blank",pN="http://localhost";class O0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gN(r,e,n,a=fN,o=dN){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-a)/2,0).toString();let m="";const p={...hN,width:a.toString(),height:o.toString(),top:u,left:h},g=Rn().toLowerCase();n&&(m=VT(g)?mN:n),PT(g)&&(e=e||pN,p.scrollbars="yes");const v=Object.entries(p).reduce((S,[N,B])=>`${S}${N}=${B},`,"");if(LI(g)&&m!=="_self")return yN(e||"",m),new O0(null);const T=window.open(e||"",m,v);Me(T,r,"popup-blocked");try{T.focus()}catch{}return new O0(T)}function yN(r,e){const n=document.createElement("a");n.href=r,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__/auth/handler",_N="emulator/auth/handler",EN=encodeURIComponent("fac");async function M0(r,e,n,a,o,u){Me(r.config.authDomain,r,"auth-domain-config-required"),Me(r.config.apiKey,r,"invalid-api-key");const h={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:a,v:Go,eventId:o};if(e instanceof Lp){e.setDefaultLanguage(r.languageCode),h.providerId=e.providerId||"",ix(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))h[v]=T}if(e instanceof Uu){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(h.scopes=v.join(","))}r.tenantId&&(h.tid=r.tenantId);const m=h;for(const v of Object.keys(m))m[v]===void 0&&delete m[v];const p=await r._getAppCheckToken(),g=p?`#${EN}=${encodeURIComponent(p)}`:"";return`${TN(r)}?${ku(m).slice(1)}${g}`}function TN({config:r}){return r.emulator?Op(r,_N):`https://${r.authDomain}/${vN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nm="webStorageSupport";class bN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=JT,this._completeRedirectFn=KC,this._overrideRedirectResult=qC}async _openPopup(e,n,a,o){Pi(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await M0(e,n,a,Km(),o);return gN(e,u,Up())}async _openRedirect(e,n,a,o){await this._originValidation(e);const u=await M0(e,n,a,Km(),o);return AC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Pi(u,"If manager is not set, promise should be"),u)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await cN(e),a=new $C(e);return n.register("authEvent",o=>(Me(o?.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nm,{type:Nm},o=>{const u=o?.[0]?.[Nm];u!==void 0&&n(!!u),Er(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ZC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BT()||kT()||Pp()}}const wN=bN;var P0="@firebase/auth",k0="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e(a?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Me(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RN(r){ko(new Ss("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:m}=a.options;Me(h&&!h.includes(":"),"invalid-api-key",{appName:a.name});const p={apiKey:h,authDomain:m,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:HT(r)},g=new qI(a,o,u,p);return ZI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),ko(new Ss("auth-internal",e=>{const n=ja(e.getProvider("auth").getImmediate());return(a=>new SN(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ra(P0,k0,AN(r)),Ra(P0,k0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN=300,IN=vT("authIdTokenMaxAge")||xN;let V0=null;const CN=r=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>IN)return;const o=n?.token;V0!==o&&(V0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function NN(r=ST()){const e=Cp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=JI(r,{popupRedirectResolver:wN,persistence:[PC,bC,JT]}),a=vT("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(a,location.origin);if(location.origin===u.origin){const h=CN(u.toString());_C(n,h,()=>h(n.currentUser)),vC(n,m=>h(m))}}const o=gT("auth");return o&&eC(n,`http://${o}`),n}function DN(){return document.getElementsByTagName("head")?.[0]??document}FI({loadJS(r){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=o=>{const u=jr("internal-error");u.customData=o,n(u)},a.type="text/javascript",a.charset="UTF-8",DN().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RN("Browser");var ON="firebase",MN="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ra(ON,MN,"app");var L0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xa,sb;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,w){function R(){}R.prototype=w.prototype,x.F=w.prototype,x.prototype=new R,x.prototype.constructor=x,x.D=function(O,k,U){for(var C=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)C[Ve-2]=arguments[Ve];return w.prototype[k].apply(O,C)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,w,R){R||(R=0);const O=Array(16);if(typeof w=="string")for(var k=0;k<16;++k)O[k]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(k=0;k<16;++k)O[k]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=x.g[0],R=x.g[1],k=x.g[2];let U=x.g[3],C;C=w+(U^R&(k^U))+O[0]+3614090360&4294967295,w=R+(C<<7&4294967295|C>>>25),C=U+(k^w&(R^k))+O[1]+3905402710&4294967295,U=w+(C<<12&4294967295|C>>>20),C=k+(R^U&(w^R))+O[2]+606105819&4294967295,k=U+(C<<17&4294967295|C>>>15),C=R+(w^k&(U^w))+O[3]+3250441966&4294967295,R=k+(C<<22&4294967295|C>>>10),C=w+(U^R&(k^U))+O[4]+4118548399&4294967295,w=R+(C<<7&4294967295|C>>>25),C=U+(k^w&(R^k))+O[5]+1200080426&4294967295,U=w+(C<<12&4294967295|C>>>20),C=k+(R^U&(w^R))+O[6]+2821735955&4294967295,k=U+(C<<17&4294967295|C>>>15),C=R+(w^k&(U^w))+O[7]+4249261313&4294967295,R=k+(C<<22&4294967295|C>>>10),C=w+(U^R&(k^U))+O[8]+1770035416&4294967295,w=R+(C<<7&4294967295|C>>>25),C=U+(k^w&(R^k))+O[9]+2336552879&4294967295,U=w+(C<<12&4294967295|C>>>20),C=k+(R^U&(w^R))+O[10]+4294925233&4294967295,k=U+(C<<17&4294967295|C>>>15),C=R+(w^k&(U^w))+O[11]+2304563134&4294967295,R=k+(C<<22&4294967295|C>>>10),C=w+(U^R&(k^U))+O[12]+1804603682&4294967295,w=R+(C<<7&4294967295|C>>>25),C=U+(k^w&(R^k))+O[13]+4254626195&4294967295,U=w+(C<<12&4294967295|C>>>20),C=k+(R^U&(w^R))+O[14]+2792965006&4294967295,k=U+(C<<17&4294967295|C>>>15),C=R+(w^k&(U^w))+O[15]+1236535329&4294967295,R=k+(C<<22&4294967295|C>>>10),C=w+(k^U&(R^k))+O[1]+4129170786&4294967295,w=R+(C<<5&4294967295|C>>>27),C=U+(R^k&(w^R))+O[6]+3225465664&4294967295,U=w+(C<<9&4294967295|C>>>23),C=k+(w^R&(U^w))+O[11]+643717713&4294967295,k=U+(C<<14&4294967295|C>>>18),C=R+(U^w&(k^U))+O[0]+3921069994&4294967295,R=k+(C<<20&4294967295|C>>>12),C=w+(k^U&(R^k))+O[5]+3593408605&4294967295,w=R+(C<<5&4294967295|C>>>27),C=U+(R^k&(w^R))+O[10]+38016083&4294967295,U=w+(C<<9&4294967295|C>>>23),C=k+(w^R&(U^w))+O[15]+3634488961&4294967295,k=U+(C<<14&4294967295|C>>>18),C=R+(U^w&(k^U))+O[4]+3889429448&4294967295,R=k+(C<<20&4294967295|C>>>12),C=w+(k^U&(R^k))+O[9]+568446438&4294967295,w=R+(C<<5&4294967295|C>>>27),C=U+(R^k&(w^R))+O[14]+3275163606&4294967295,U=w+(C<<9&4294967295|C>>>23),C=k+(w^R&(U^w))+O[3]+4107603335&4294967295,k=U+(C<<14&4294967295|C>>>18),C=R+(U^w&(k^U))+O[8]+1163531501&4294967295,R=k+(C<<20&4294967295|C>>>12),C=w+(k^U&(R^k))+O[13]+2850285829&4294967295,w=R+(C<<5&4294967295|C>>>27),C=U+(R^k&(w^R))+O[2]+4243563512&4294967295,U=w+(C<<9&4294967295|C>>>23),C=k+(w^R&(U^w))+O[7]+1735328473&4294967295,k=U+(C<<14&4294967295|C>>>18),C=R+(U^w&(k^U))+O[12]+2368359562&4294967295,R=k+(C<<20&4294967295|C>>>12),C=w+(R^k^U)+O[5]+4294588738&4294967295,w=R+(C<<4&4294967295|C>>>28),C=U+(w^R^k)+O[8]+2272392833&4294967295,U=w+(C<<11&4294967295|C>>>21),C=k+(U^w^R)+O[11]+1839030562&4294967295,k=U+(C<<16&4294967295|C>>>16),C=R+(k^U^w)+O[14]+4259657740&4294967295,R=k+(C<<23&4294967295|C>>>9),C=w+(R^k^U)+O[1]+2763975236&4294967295,w=R+(C<<4&4294967295|C>>>28),C=U+(w^R^k)+O[4]+1272893353&4294967295,U=w+(C<<11&4294967295|C>>>21),C=k+(U^w^R)+O[7]+4139469664&4294967295,k=U+(C<<16&4294967295|C>>>16),C=R+(k^U^w)+O[10]+3200236656&4294967295,R=k+(C<<23&4294967295|C>>>9),C=w+(R^k^U)+O[13]+681279174&4294967295,w=R+(C<<4&4294967295|C>>>28),C=U+(w^R^k)+O[0]+3936430074&4294967295,U=w+(C<<11&4294967295|C>>>21),C=k+(U^w^R)+O[3]+3572445317&4294967295,k=U+(C<<16&4294967295|C>>>16),C=R+(k^U^w)+O[6]+76029189&4294967295,R=k+(C<<23&4294967295|C>>>9),C=w+(R^k^U)+O[9]+3654602809&4294967295,w=R+(C<<4&4294967295|C>>>28),C=U+(w^R^k)+O[12]+3873151461&4294967295,U=w+(C<<11&4294967295|C>>>21),C=k+(U^w^R)+O[15]+530742520&4294967295,k=U+(C<<16&4294967295|C>>>16),C=R+(k^U^w)+O[2]+3299628645&4294967295,R=k+(C<<23&4294967295|C>>>9),C=w+(k^(R|~U))+O[0]+4096336452&4294967295,w=R+(C<<6&4294967295|C>>>26),C=U+(R^(w|~k))+O[7]+1126891415&4294967295,U=w+(C<<10&4294967295|C>>>22),C=k+(w^(U|~R))+O[14]+2878612391&4294967295,k=U+(C<<15&4294967295|C>>>17),C=R+(U^(k|~w))+O[5]+4237533241&4294967295,R=k+(C<<21&4294967295|C>>>11),C=w+(k^(R|~U))+O[12]+1700485571&4294967295,w=R+(C<<6&4294967295|C>>>26),C=U+(R^(w|~k))+O[3]+2399980690&4294967295,U=w+(C<<10&4294967295|C>>>22),C=k+(w^(U|~R))+O[10]+4293915773&4294967295,k=U+(C<<15&4294967295|C>>>17),C=R+(U^(k|~w))+O[1]+2240044497&4294967295,R=k+(C<<21&4294967295|C>>>11),C=w+(k^(R|~U))+O[8]+1873313359&4294967295,w=R+(C<<6&4294967295|C>>>26),C=U+(R^(w|~k))+O[15]+4264355552&4294967295,U=w+(C<<10&4294967295|C>>>22),C=k+(w^(U|~R))+O[6]+2734768916&4294967295,k=U+(C<<15&4294967295|C>>>17),C=R+(U^(k|~w))+O[13]+1309151649&4294967295,R=k+(C<<21&4294967295|C>>>11),C=w+(k^(R|~U))+O[4]+4149444226&4294967295,w=R+(C<<6&4294967295|C>>>26),C=U+(R^(w|~k))+O[11]+3174756917&4294967295,U=w+(C<<10&4294967295|C>>>22),C=k+(w^(U|~R))+O[2]+718787259&4294967295,k=U+(C<<15&4294967295|C>>>17),C=R+(U^(k|~w))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+w&4294967295,x.g[1]=x.g[1]+(k+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+U&4294967295}a.prototype.v=function(x,w){w===void 0&&(w=x.length);const R=w-this.blockSize,O=this.C;let k=this.h,U=0;for(;U<w;){if(k==0)for(;U<=R;)o(this,x,U),U+=this.blockSize;if(typeof x=="string"){for(;U<w;)if(O[k++]=x.charCodeAt(U++),k==this.blockSize){o(this,O),k=0;break}}else for(;U<w;)if(O[k++]=x[U++],k==this.blockSize){o(this,O),k=0;break}}this.h=k,this.o+=w},a.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var w=1;w<x.length-8;++w)x[w]=0;w=this.o*8;for(var R=x.length-8;R<x.length;++R)x[R]=w&255,w/=256;for(this.v(x),x=Array(16),w=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)x[w++]=this.g[R]>>>O&255;return x};function u(x,w){var R=m;return Object.prototype.hasOwnProperty.call(R,x)?R[x]:R[x]=w(x)}function h(x,w){this.h=w;const R=[];let O=!0;for(let k=x.length-1;k>=0;k--){const U=x[k]|0;O&&U==w||(R[k]=U,O=!1)}this.g=R}var m={};function p(x){return-128<=x&&x<128?u(x,function(w){return new h([w|0],w<0?-1:0)}):new h([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return Q(g(-x));const w=[];let R=1;for(let O=0;x>=R;O++)w[O]=x/R|0,R*=4294967296;return new h(w,0)}function v(x,w){if(x.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(x.charAt(0)=="-")return Q(v(x.substring(1),w));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=g(Math.pow(w,8));let O=T;for(let U=0;U<x.length;U+=8){var k=Math.min(8,x.length-U);const C=parseInt(x.substring(U,U+k),w);k<8?(k=g(Math.pow(w,k)),O=O.j(k).add(g(C))):(O=O.j(R),O=O.add(g(C)))}return O}var T=p(0),S=p(1),N=p(16777216);r=h.prototype,r.m=function(){if(J(this))return-Q(this).m();let x=0,w=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);x+=(O>=0?O:4294967296+O)*w,w*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(B(this))return"0";if(J(this))return"-"+Q(this).toString(x);const w=g(Math.pow(x,6));var R=this;let O="";for(;;){const k=Re(R,w).g;R=ne(R,k.j(w));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(x);if(R=k,B(R))return U+O;for(;U.length<6;)U="0"+U;O=U+O}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function B(x){if(x.h!=0)return!1;for(let w=0;w<x.g.length;w++)if(x.g[w]!=0)return!1;return!0}function J(x){return x.h==-1}r.l=function(x){return x=ne(this,x),J(x)?-1:B(x)?0:1};function Q(x){const w=x.g.length,R=[];for(let O=0;O<w;O++)R[O]=~x.g[O];return new h(R,~x.h).add(S)}r.abs=function(){return J(this)?Q(this):this},r.add=function(x){const w=Math.max(this.g.length,x.g.length),R=[];let O=0;for(let k=0;k<=w;k++){let U=O+(this.i(k)&65535)+(x.i(k)&65535),C=(U>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);O=C>>>16,U&=65535,C&=65535,R[k]=C<<16|U}return new h(R,R[R.length-1]&-2147483648?-1:0)};function ne(x,w){return x.add(Q(w))}r.j=function(x){if(B(this)||B(x))return T;if(J(this))return J(x)?Q(this).j(Q(x)):Q(Q(this).j(x));if(J(x))return Q(this.j(Q(x)));if(this.l(N)<0&&x.l(N)<0)return g(this.m()*x.m());const w=this.g.length+x.g.length,R=[];for(var O=0;O<2*w;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let k=0;k<x.g.length;k++){const U=this.i(O)>>>16,C=this.i(O)&65535,Ve=x.i(k)>>>16,Ye=x.i(k)&65535;R[2*O+2*k]+=C*Ye,oe(R,2*O+2*k),R[2*O+2*k+1]+=U*Ye,oe(R,2*O+2*k+1),R[2*O+2*k+1]+=C*Ve,oe(R,2*O+2*k+1),R[2*O+2*k+2]+=U*Ve,oe(R,2*O+2*k+2)}for(x=0;x<w;x++)R[x]=R[2*x+1]<<16|R[2*x];for(x=w;x<2*w;x++)R[x]=0;return new h(R,0)};function oe(x,w){for(;(x[w]&65535)!=x[w];)x[w+1]+=x[w]>>>16,x[w]&=65535,w++}function ue(x,w){this.g=x,this.h=w}function Re(x,w){if(B(w))throw Error("division by zero");if(B(x))return new ue(T,T);if(J(x))return w=Re(Q(x),w),new ue(Q(w.g),Q(w.h));if(J(w))return w=Re(x,Q(w)),new ue(Q(w.g),w.h);if(x.g.length>30){if(J(x)||J(w))throw Error("slowDivide_ only works with positive integers.");for(var R=S,O=w;O.l(x)<=0;)R=le(R),O=le(O);var k=V(R,1),U=V(O,1);for(O=V(O,2),R=V(R,2);!B(O);){var C=U.add(O);C.l(x)<=0&&(k=k.add(R),U=C),O=V(O,1),R=V(R,1)}return w=ne(x,k.j(w)),new ue(k,w)}for(k=T;x.l(w)>=0;){for(R=Math.max(1,Math.floor(x.m()/w.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),U=g(R),C=U.j(w);J(C)||C.l(x)>0;)R-=O,U=g(R),C=U.j(w);B(U)&&(U=S),k=k.add(U),x=ne(x,C)}return new ue(k,x)}r.B=function(x){return Re(this,x).h},r.and=function(x){const w=Math.max(this.g.length,x.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)&x.i(O);return new h(R,this.h&x.h)},r.or=function(x){const w=Math.max(this.g.length,x.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)|x.i(O);return new h(R,this.h|x.h)},r.xor=function(x){const w=Math.max(this.g.length,x.g.length),R=[];for(let O=0;O<w;O++)R[O]=this.i(O)^x.i(O);return new h(R,this.h^x.h)};function le(x){const w=x.g.length+1,R=[];for(let O=0;O<w;O++)R[O]=x.i(O)<<1|x.i(O-1)>>>31;return new h(R,x.h)}function V(x,w){const R=w>>5;w%=32;const O=x.g.length-R,k=[];for(let U=0;U<O;U++)k[U]=w>0?x.i(U+R)>>>w|x.i(U+R+1)<<32-w:x.i(U+R);return new h(k,x.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,sb=a,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=v,xa=h}).apply(typeof L0<"u"?L0:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ob,lu,lb,Sh,Xm,ub,cb,hb;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var y=0;y<c.length;++y){var _=c[y];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var a=n(this);function o(c,y){if(y)e:{var _=a;c=c.split(".");for(var A=0;A<c.length-1;A++){var F=c[A];if(!(F in _))break e;_=_[F]}c=c[c.length-1],A=_[c],y=y(A),y!=A&&y!=null&&e(_,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var _=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&_.push([A,y[A]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function p(c,y,_){return c.call.apply(c.bind,arguments)}function g(c,y,_){return g=p,g.apply(null,arguments)}function v(c,y){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function _(){}_.prototype=y.prototype,c.Z=y.prototype,c.prototype=new _,c.prototype.constructor=c,c.Ob=function(A,F,W){for(var de=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)de[ze-2]=arguments[ze];return y.prototype[F].apply(A,de)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function N(c){const y=c.length;if(y>0){const _=Array(y);for(let A=0;A<y;A++)_[A]=c[A];return _}return[]}function B(c,y){for(let A=1;A<arguments.length;A++){const F=arguments[A];var _=typeof F;if(_=_!="object"?_:F?Array.isArray(F)?"array":_:"null",_=="array"||_=="object"&&typeof F.length=="number"){_=c.length||0;const W=F.length||0;c.length=_+W;for(let de=0;de<W;de++)c[_+de]=F[de]}else c.push(F)}}class J{constructor(y,_){this.i=y,this.j=_,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Q(c){h.setTimeout(()=>{throw c},0)}function ne(){var c=x;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class oe{constructor(){this.h=this.g=null}add(y,_){const A=ue.get();A.set(y,_),this.h?this.h.next=A:this.g=A,this.h=A}}var ue=new J(()=>new Re,c=>c.reset());class Re{constructor(){this.next=this.g=this.h=null}set(y,_){this.h=y,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let le,V=!1,x=new oe,w=()=>{const c=Promise.resolve(void 0);le=()=>{c.then(R)}};function R(){for(var c;c=ne();){try{c.h.call(c.g)}catch(_){Q(_)}var y=ue;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}V=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var U=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const _=()=>{};h.addEventListener("test",_,y),h.removeEventListener("test",_,y)}catch{}return c})();function C(c){return/^[\s\xa0]*$/.test(c)}function Ve(c,y){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Ve,k),Ve.prototype.init=function(c,y){const _=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(_=="mouseover"?y=c.fromElement:_=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ve.Z.h.call(this)},Ve.prototype.h=function(){Ve.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ye="closure_listenable_"+(Math.random()*1e6|0),Y=0;function he(c,y,_,A,F){this.listener=c,this.proxy=null,this.src=y,this.type=_,this.capture=!!A,this.ha=F,this.key=++Y,this.da=this.fa=!1}function ge(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ue(c,y,_){for(const A in c)y.call(_,c[A],A,c)}function M(c,y){for(const _ in c)y.call(void 0,c[_],_,c)}function ee(c){const y={};for(const _ in c)y[_]=c[_];return y}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(c,y){let _,A;for(let F=1;F<arguments.length;F++){A=arguments[F];for(_ in A)c[_]=A[_];for(let W=0;W<me.length;W++)_=me[W],Object.prototype.hasOwnProperty.call(A,_)&&(c[_]=A[_])}}function Ee(c){this.src=c,this.g={},this.h=0}Ee.prototype.add=function(c,y,_,A,F){const W=c.toString();c=this.g[W],c||(c=this.g[W]=[],this.h++);const de=Ne(c,y,A,F);return de>-1?(y=c[de],_||(y.fa=!1)):(y=new he(y,this.src,W,!!A,F),y.fa=_,c.push(y)),y};function He(c,y){const _=y.type;if(_ in c.g){var A=c.g[_],F=Array.prototype.indexOf.call(A,y,void 0),W;(W=F>=0)&&Array.prototype.splice.call(A,F,1),W&&(ge(y),c.g[_].length==0&&(delete c.g[_],c.h--))}}function Ne(c,y,_,A){for(let F=0;F<c.length;++F){const W=c[F];if(!W.da&&W.listener==y&&W.capture==!!_&&W.ha==A)return F}return-1}var $t="closure_lm_"+(Math.random()*1e6|0),ot={};function Gn(c,y,_,A,F){if(Array.isArray(y)){for(let W=0;W<y.length;W++)Gn(c,y[W],_,A,F);return null}return _=Vs(_),c&&c[Ye]?c.J(y,_,m(A)?!!A.capture:!1,F):Ot(c,y,_,!1,A,F)}function Ot(c,y,_,A,F,W){if(!y)throw Error("Invalid event type");const de=m(F)?!!F.capture:!!F;let ze=za(c);if(ze||(c[$t]=ze=new Ee(c)),_=ze.add(y,_,A,de,W),_.proxy)return _;if(A=Kn(),_.proxy=A,A.src=c,A.listener=_,c.addEventListener)U||(F=de),F===void 0&&(F=!1),c.addEventListener(y.toString(),A,F);else if(c.attachEvent)c.attachEvent(Mn(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Kn(){function c(_){return y.call(c.src,c.listener,_)}const y=Jo;return c}function li(c,y,_,A,F){if(Array.isArray(y))for(var W=0;W<y.length;W++)li(c,y[W],_,A,F);else A=m(A)?!!A.capture:!!A,_=Vs(_),c&&c[Ye]?(c=c.i,W=String(y).toString(),W in c.g&&(y=c.g[W],_=Ne(y,_,A,F),_>-1&&(ge(y[_]),Array.prototype.splice.call(y,_,1),y.length==0&&(delete c.g[W],c.h--)))):c&&(c=za(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Ne(y,_,A,F)),(_=c>-1?y[c]:null)&&ui(_))}function ui(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[Ye])He(y.i,c);else{var _=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(_,A,c.capture):y.detachEvent?y.detachEvent(Mn(_),A):y.addListener&&y.removeListener&&y.removeListener(A),(_=za(y))?(He(_,c),_.h==0&&(_.src=null,y[$t]=null)):ge(c)}}}function Mn(c){return c in ot?ot[c]:ot[c]="on"+c}function Jo(c,y){if(c.da)c=!0;else{y=new Ve(y,this);const _=c.listener,A=c.ha||c.src;c.fa&&ui(c),c=_.call(A,y)}return c}function za(c){return c=c[$t],c instanceof Ee?c:null}var ln="__closure_events_fn_"+(Math.random()*1e9>>>0);function Vs(c){return typeof c=="function"?c:(c[ln]||(c[ln]=function(y){return c.handleEvent(y)}),c[ln])}function kt(){O.call(this),this.i=new Ee(this),this.M=this,this.G=null}T(kt,O),kt.prototype[Ye]=!0,kt.prototype.removeEventListener=function(c,y,_,A){li(this,c,y,_,A)};function Bt(c,y){var _,A=c.G;if(A)for(_=[];A;A=A.G)_.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new k(y,c);else if(y instanceof k)y.target=y.target||c;else{var F=y;y=new k(A,c),fe(y,F)}F=!0;let W,de;if(_)for(de=_.length-1;de>=0;de--)W=y.g=_[de],F=Tr(W,A,!0,y)&&F;if(W=y.g=c,F=Tr(W,A,!0,y)&&F,F=Tr(W,A,!1,y)&&F,_)for(de=0;de<_.length;de++)W=y.g=_[de],F=Tr(W,A,!1,y)&&F}kt.prototype.N=function(){if(kt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const _=c.g[y];for(let A=0;A<_.length;A++)ge(_[A]);delete c.g[y],c.h--}}this.G=null},kt.prototype.J=function(c,y,_,A){return this.i.add(String(c),y,!1,_,A)},kt.prototype.K=function(c,y,_,A){return this.i.add(String(c),y,!0,_,A)};function Tr(c,y,_,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let F=!0;for(let W=0;W<y.length;++W){const de=y[W];if(de&&!de.da&&de.capture==_){const ze=de.listener,At=de.ha||de.src;de.fa&&He(c.i,de),F=ze.call(At,A)!==!1&&F}}return F&&!A.defaultPrevented}function br(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function wr(c){c.g=br(()=>{c.g=null,c.i&&(c.i=!1,wr(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Ls extends O{constructor(y,_){super(),this.m=y,this.l=_,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:wr(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(c){O.call(this),this.h=c,this.g={}}T(Sr,O);var Zt=[];function _t(c){Ue(c.g,function(y,_){this.g.hasOwnProperty(_)&&ui(y)},c),c.g={}}Sr.prototype.N=function(){Sr.Z.N.call(this),_t(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xn=h.JSON.stringify,un=h.JSON.parse,Ba=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Us(){}function Pn(){}var Yn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ar(){k.call(this,"d")}T(Ar,k);function kn(){k.call(this,"c")}T(kn,k);var Vn={},Rr=null;function xr(){return Rr=Rr||new kt}Vn.Ia="serverreachability";function ji(c){k.call(this,Vn.Ia,c)}T(ji,k);function ar(c){const y=xr();Bt(y,new ji(y))}Vn.STAT_EVENT="statevent";function zi(c,y){k.call(this,Vn.STAT_EVENT,c),this.stat=y}T(zi,k);function xt(c){const y=xr();Bt(y,new zi(y,c))}Vn.Ja="timingevent";function js(c,y){k.call(this,Vn.Ja,c),this.size=y}T(js,k);function Ir(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function $n(){this.g=!0}$n.prototype.ua=function(){this.g=!1};function Hr(c,y,_,A,F,W){c.info(function(){if(c.g)if(W){var de="",ze=W.split("&");for(let ut=0;ut<ze.length;ut++){var At=ze[ut].split("=");if(At.length>1){const Lt=At[0];At=At[1];const Qn=Lt.split("_");de=Qn.length>=2&&Qn[1]=="type"?de+(Lt+"="+At+"&"):de+(Lt+"=redacted&")}}}else de=null;else de=W;return"XMLHTTP REQ ("+A+") [attempt "+F+"]: "+y+`
`+_+`
`+de})}function Ha(c,y,_,A,F,W,de){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+F+"]: "+y+`
`+_+`
`+W+" "+de})}function Cr(c,y,_,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+z(c,_)+(A?" "+A:"")})}function P(c,y){c.info(function(){return"TIMEOUT: "+y})}$n.prototype.info=function(){};function z(c,y){if(!c.g)return y;if(!y)return null;try{const W=JSON.parse(y);if(W){for(c=0;c<W.length;c++)if(Array.isArray(W[c])){var _=W[c];if(!(_.length<2)){var A=_[1];if(Array.isArray(A)&&!(A.length<1)){var F=A[0];if(F!="noop"&&F!="stop"&&F!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return xn(W)}catch{return y}}var K={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},se={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ce;function Te(){}T(Te,Us),Te.prototype.g=function(){return new XMLHttpRequest},ce=new Te;function we(c){return encodeURIComponent(String(c))}function Se(c){var y=1;c=c.split(":");const _=[];for(;y>0&&c.length;)_.push(c.shift()),y--;return c.length&&_.push(c.join(":")),_}function _e(c,y,_,A){this.j=c,this.i=y,this.l=_,this.S=A||1,this.V=new Sr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xe}function xe(){this.i=null,this.g="",this.h=!1}var Ae={},ve={};function je(c,y,_){c.M=1,c.A=hi(St(y)),c.u=_,c.R=!0,rt(c,null)}function rt(c,y){c.F=Date.now(),it(c),c.B=St(c.A);var _=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),$u(_.i,"t",A),c.C=0,_=c.j.L,c.h=new xe,c.g=Gs(c.j,_?y:null,!c.u),c.P>0&&(c.O=new Ls(g(c.Y,c,c.g),c.P)),y=c.V,_=c.g,A=c.ba;var F="readystatechange";Array.isArray(F)||(F&&(Zt[0]=F.toString()),F=Zt);for(let W=0;W<F.length;W++){const de=Gn(_,F[W],A||y.handleEvent,!1,y.h||y);if(!de)break;y.g[de.key]=de}y=c.J?ee(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),ar(),Hr(c.i,c.v,c.B,c.l,c.S,c.u)}_e.prototype.ba=function(c){c=c.target;const y=this.O;y&&En(c)==3?y.j():this.Y(c)},_e.prototype.Y=function(c){try{if(c==this.g)e:{const ze=En(this.g),At=this.g.ya(),ut=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Qa(this.g)))){this.K||ze!=4||At==7||(At==8||ut<=0?ar(3):ar(2)),yn(this);var y=this.g.ca();this.X=y;var _=yt(this);if(this.o=y==200,Ha(this.i,this.v,this.B,this.l,this.S,ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,F=this.g;if((A=F.g?F.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var W=A;break t}}W=null}if(c=W)Cr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qr(this,c);else{this.o=!1,this.m=3,xt(12),Vt(this),vn(this);break e}}if(this.R){c=!0;let Lt;for(;!this.K&&this.C<_.length;)if(Lt=ft(this,_),Lt==ve){ze==4&&(this.m=4,xt(14),c=!1),Cr(this.i,this.l,null,"[Incomplete Response]");break}else if(Lt==Ae){this.m=4,xt(15),Cr(this.i,this.l,_,"[Invalid Chunk]"),c=!1;break}else Cr(this.i,this.l,Lt,null),qr(this,Lt);if($e(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||_.length!=0||this.h.h||(this.m=1,xt(16),c=!1),this.o=this.o&&c,!c)Cr(this.i,this.l,_,"[Invalid Chunked Response]"),Vt(this),vn(this);else if(_.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),ll(de),de.P=!0,xt(11))}}else Cr(this.i,this.l,_,null),qr(this,_);ze==4&&Vt(this),this.o&&!this.K&&(ze==4?ul(this.j,this):(this.o=!1,it(this)))}else Xa(this.g),y==400&&_.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),Vt(this),vn(this)}}}catch{}finally{}};function yt(c){if(!$e(c))return c.g.la();const y=Qa(c.g);if(y==="")return"";let _="";const A=y.length,F=En(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vt(c),vn(c),"";c.h.i=new h.TextDecoder}for(let W=0;W<A;W++)c.h.h=!0,_+=c.h.i.decode(y[W],{stream:!(F&&W==A-1)});return y.length=0,c.h.g+=_,c.C=0,c.h.g}function $e(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function ft(c,y){var _=c.C,A=y.indexOf(`
`,_);return A==-1?ve:(_=Number(y.substring(_,A)),isNaN(_)?Ae:(A+=1,A+_>y.length?ve:(y=y.slice(A,A+_),c.C=A+_,y)))}_e.prototype.cancel=function(){this.K=!0,Vt(this)};function it(c){c.T=Date.now()+c.H,en(c,c.H)}function en(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ir(g(c.aa,c),y)}function yn(c){c.D&&(h.clearTimeout(c.D),c.D=null)}_e.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(P(this.i,this.B),this.M!=2&&(ar(),xt(17)),Vt(this),this.m=2,vn(this)):en(this,this.T-c)};function vn(c){c.j.I==0||c.K||ul(c.j,c)}function Vt(c){yn(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,_t(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function qr(c,y){try{var _=c.j;if(_.I!=0&&(_.g==c||qe(_.h,c))){if(!c.L&&qe(_.h,c)&&_.I==3){try{var A=_.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var F=A;if(F[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<c.F)Fs(_),Fr(_);else break e;ol(_),xt(18)}}else _.xa=F[1],0<_.xa-_.K&&F[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Ir(g(_.Va,_),6e3));cn(_.h)<=1&&_.ta&&(_.ta=void 0)}else mi(_,11)}else if((c.L||_.g==c)&&Fs(_),!C(y))for(F=_.Ba.g.parse(y),y=0;y<F.length;y++){let ut=F[y];const Lt=ut[0];if(!(Lt<=_.K))if(_.K=Lt,ut=ut[1],_.I==2)if(ut[0]=="c"){_.M=ut[1],_.ba=ut[2];const Qn=ut[3];Qn!=null&&(_.ka=Qn,_.j.info("VER="+_.ka));const Gr=ut[4];Gr!=null&&(_.za=Gr,_.j.info("SVER="+_.za));const Dr=ut[5];Dr!=null&&typeof Dr=="number"&&Dr>0&&(A=1.5*Dr,_.O=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Or=c.g;if(Or){const Mr=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mr){var W=A.h;W.g||Mr.indexOf("spdy")==-1&&Mr.indexOf("quic")==-1&&Mr.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ct(W,W.h),W.h=null))}if(A.G){const hl=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(A.wa=hl,dt(A.J,A.G,hl))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-c.F,_.j.info("Handshake RTT: "+_.T+"ms")),A=_;var de=c;if(A.na=rc(A,A.L?A.ba:null,A.W),de.L){_n(A.h,de);var ze=de,At=A.O;At&&(ze.H=At),ze.D&&(yn(ze),it(ze)),A.g=de}else Zu(A);_.i.length>0&&es(_)}else ut[0]!="stop"&&ut[0]!="close"||mi(_,7);else _.I==3&&(ut[0]=="stop"||ut[0]=="close"?ut[0]=="stop"?mi(_,7):Ja(_):ut[0]!="noop"&&_.l&&_.l.qa(ut),_.A=0)}}ar(4)}catch{}}var ci=class{constructor(c,y){this.g=c,this.map=y}};function In(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function sr(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function cn(c){return c.h?1:c.g?c.g.size:0}function qe(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function Ct(c,y){c.g?c.g.add(y):c.h=y}function _n(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}In.prototype.cancel=function(){if(this.i=Ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Ln(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const _ of c.g.values())y=y.concat(_.G);return y}return N(c.i)}var Et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Bi(c,y){if(c){c=c.split("&");for(let _=0;_<c.length;_++){const A=c[_].indexOf("=");let F,W=null;A>=0?(F=c[_].substring(0,A),W=c[_].substring(A+1)):F=c[_],y(F,W?decodeURIComponent(W.replace(/\+/g," ")):"")}}}function Un(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof Un?(this.l=c.l,Hi(this,c.j),this.o=c.o,this.g=c.g,qa(this,c.u),this.h=c.h,qi(this,Qu(c.i)),this.m=c.m):c&&(y=String(c).match(Et))?(this.l=!1,Hi(this,y[1]||"",!0),this.o=Fa(y[2]||""),this.g=Fa(y[3]||"",!0),qa(this,y[4]),this.h=Fa(y[5]||"",!0),qi(this,y[6]||"",!0),this.m=Fa(y[7]||"")):(this.l=!1,this.i=new or(null,this.l))}Un.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(tn(y,el,!0),":");var _=this.g;return(_||y=="file")&&(c.push("//"),(y=this.o)&&c.push(tn(y,el,!0),"@"),c.push(we(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&c.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&c.push("/"),c.push(tn(_,_.charAt(0)=="/"?Fi:tl,!0))),(_=this.i.toString())&&c.push("?",_),(_=this.m)&&c.push("#",tn(_,Yu)),c.join("")},Un.prototype.resolve=function(c){const y=St(this);let _=!!c.j;_?Hi(y,c.j):_=!!c.o,_?y.o=c.o:_=!!c.g,_?y.g=c.g:_=c.u!=null;var A=c.h;if(_)qa(y,c.u);else if(_=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var F=y.h.lastIndexOf("/");F!=-1&&(A=y.h.slice(0,F+1)+A)}if(F=A,F==".."||F==".")A="";else if(F.indexOf("./")!=-1||F.indexOf("/.")!=-1){A=F.lastIndexOf("/",0)==0,F=F.split("/");const W=[];for(let de=0;de<F.length;){const ze=F[de++];ze=="."?A&&de==F.length&&W.push(""):ze==".."?((W.length>1||W.length==1&&W[0]!="")&&W.pop(),A&&de==F.length&&W.push("")):(W.push(ze),A=!0)}A=W.join("/")}else A=F}return _?y.h=A:_=c.i.toString()!=="",_?qi(y,Qu(c.i)):_=!!c.m,_&&(y.m=c.m),y};function St(c){return new Un(c)}function Hi(c,y,_){c.j=_?Fa(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function qa(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function qi(c,y,_){y instanceof or?(c.i=y,il(c.i,c.l)):(_||(y=tn(y,Ku)),c.i=new or(y,c.l))}function dt(c,y,_){c.i.set(y,_)}function hi(c){return dt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Fa(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function tn(c,y,_){return typeof c=="string"?(c=encodeURI(c).replace(y,Zo),_&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Zo(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var el=/[#\/\?@]/g,tl=/[#\?:]/g,Fi=/[#\?]/g,Ku=/[#\?@]/g,Yu=/#/g;function or(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function fi(c){c.g||(c.g=new Map,c.h=0,c.i&&Bi(c.i,function(y,_){c.add(decodeURIComponent(y.replace(/\+/g," ")),_)}))}r=or.prototype,r.add=function(c,y){fi(this),this.i=null,c=Nr(this,c);let _=this.g.get(c);return _||this.g.set(c,_=[]),_.push(y),this.h+=1,this};function nl(c,y){fi(c),y=Nr(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function rl(c,y){return fi(c),y=Nr(c,y),c.g.has(y)}r.forEach=function(c,y){fi(this),this.g.forEach(function(_,A){_.forEach(function(F){c.call(y,F,A,this)},this)},this)};function zs(c,y){fi(c);let _=[];if(typeof y=="string")rl(c,y)&&(_=_.concat(c.g.get(Nr(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)_=_.concat(c[y]);return _}r.set=function(c,y){return fi(this),this.i=null,c=Nr(this,c),rl(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},r.get=function(c,y){return c?(c=zs(this,c),c.length>0?String(c[0]):y):y};function $u(c,y,_){nl(c,y),_.length>0&&(c.i=null,c.g.set(Nr(c,y),N(_)),c.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var _=y[A];const F=we(_);_=zs(this,_);for(let W=0;W<_.length;W++){let de=F;_[W]!==""&&(de+="="+we(_[W])),c.push(de)}}return this.i=c.join("&")};function Qu(c){const y=new or;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Nr(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function il(c,y){y&&!c.j&&(fi(c),c.i=null,c.g.forEach(function(_,A){const F=A.toLowerCase();A!=F&&(nl(this,A),$u(this,F,_))},c)),c.j=y}function al(c,y){const _=new $n;if(h.Image){const A=new Image;A.onload=v(Cn,_,"TestLoadImage: loaded",!0,y,A),A.onerror=v(Cn,_,"TestLoadImage: error",!1,y,A),A.onabort=v(Cn,_,"TestLoadImage: abort",!1,y,A),A.ontimeout=v(Cn,_,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function Gi(c,y){const _=new $n,A=new AbortController,F=setTimeout(()=>{A.abort(),Cn(_,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(W=>{clearTimeout(F),W.ok?Cn(_,"TestPingServer: ok",!0,y):Cn(_,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(F),Cn(_,"TestPingServer: error",!1,y)})}function Cn(c,y,_,A,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),A(_)}catch{}}function Xu(){this.g=new Ba}function Ga(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Ga,Us),Ga.prototype.g=function(){return new Ka(this.i,this.h)};function Ka(c,y){kt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Ka,kt),r=Ka.prototype,r.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,di(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Nn(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,di(this)),this.g&&(this.readyState=3,di(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ki(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ki(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Nn(this):di(this),this.readyState==3&&Ki(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,Nn(this))},r.Na=function(c){this.g&&(this.response=c,Nn(this))},r.ga=function(){this.g&&Nn(this)};function Nn(c){c.readyState=4,c.l=null,c.j=null,c.B=null,di(c)}r.setRequestHeader=function(c,y){this.A.append(c,y)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var _=y.next();!_.done;)_=_.value,c.push(_[0]+": "+_[1]),_=y.next();return c.join(`\r
`)};function di(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Ka.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Yi(c){let y="";return Ue(c,function(_,A){y+=A,y+=":",y+=_,y+=`\r
`}),y}function lr(c,y,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=Yi(_),typeof c=="string"?_!=null&&we(_):dt(c,y,_))}function Tt(c){kt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(Tt,kt);var Bs=/^https?$/i,Wu=["POST","PUT"];r=Tt.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,y,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ce.g(),this.g.onreadystatechange=S(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(W){Ya(this,W);return}if(c=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var F in A)_.set(F,A[F]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const W of A.keys())_.set(W,A.get(W));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),F=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(Wu,y,void 0)>=0)||A||F||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,de]of _)this.g.setRequestHeader(W,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(W){Ya(this,W)}};function Ya(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,$a(c),Qt(c)}function $a(c){c.A||(c.A=!0,Bt(c,"complete"),Bt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Bt(this,"complete"),Bt(this,"abort"),Qt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qt(this,!0)),Tt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?sl(this):this.Xa())},r.Xa=function(){sl(this)};function sl(c){if(c.h&&typeof u<"u"){if(c.v&&En(c)==4)setTimeout(c.Ca.bind(c),0);else if(Bt(c,"readystatechange"),En(c)==4){c.h=!1;try{const W=c.ca();e:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var _;if(!(_=y)){var A;if(A=W===0){let de=String(c.D).match(Et)[1]||null;!de&&h.self&&h.self.location&&(de=h.self.location.protocol.slice(0,-1)),A=!Bs.test(de?de.toLowerCase():"")}_=A}if(_)Bt(c,"complete"),Bt(c,"success");else{c.o=6;try{var F=En(c)>2?c.g.statusText:""}catch{F=""}c.l=F+" ["+c.ca()+"]",$a(c)}}finally{Qt(c)}}}}function Qt(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const _=c.g;c.g=null,y||Bt(c,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function En(c){return c.g?c.g.readyState:0}r.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),un(y)}};function Qa(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xa(c){const y={};c=(c.g&&En(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(C(c[A]))continue;var _=Se(c[A]);const F=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=y[F]||[];y[F]=W,W.push(_)}M(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wa(c,y,_){return _&&_.internalChannelParams&&_.internalChannelParams[c]||y}function Hs(c){this.za=0,this.i=[],this.j=new $n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wa("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wa("baseRetryDelayMs",5e3,c),this.Za=Wa("retryDelaySeedMs",1e4,c),this.Ta=Wa("forwardChannelMaxRetries",2,c),this.va=Wa("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new In(c&&c.concurrentRequestLimit),this.Ba=new Xu,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Hs.prototype,r.ka=8,r.I=1,r.connect=function(c,y,_,A){xt(0),this.W=c,this.H=y||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.J=rc(this,null,this.W),es(this)};function Ja(c){if(Za(c),c.I==3){var y=c.V++,_=St(c.J);if(dt(_,"SID",c.M),dt(_,"RID",y),dt(_,"TYPE","terminate"),ts(c,_),y=new _e(c,c.j,y),y.M=2,y.A=hi(St(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=y.A,_=!0),_||(y.g=Gs(y.j,null),y.g.ea(y.A)),y.F=Date.now(),it(y)}nc(c)}function Fr(c){c.g&&(ll(c),c.g.cancel(),c.g=null)}function Za(c){Fr(c),c.v&&(h.clearTimeout(c.v),c.v=null),Fs(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function es(c){if(!sr(c.h)&&!c.m){c.m=!0;var y=c.Ea;le||w(),V||(le(),V=!0),x.add(y,c),c.D=0}}function bf(c,y){return cn(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ir(g(c.Ea,c,y),tc(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const F=new _e(this,this.j,c);let W=this.o;if(this.U&&(W?(W=ee(W),fe(W,this.U)):W=this.U),this.u!==null||this.R||(F.J=W,W=null),this.S)e:{for(var y=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=_;break e}if(y===4096||_===this.i.length-1){y=_+1;break e}}y=1e3}else y=1e3;y=qs(this,F,y),_=St(this.J),dt(_,"RID",c),dt(_,"CVER",22),this.G&&dt(_,"X-HTTP-Session-Id",this.G),ts(this,_),W&&(this.R?y="headers="+we(Yi(W))+"&"+y:this.u&&lr(_,this.u,W)),Ct(this.h,F),this.Ra&&dt(_,"TYPE","init"),this.S?(dt(_,"$req",y),dt(_,"SID","null"),F.U=!0,je(F,_,null)):je(F,_,y),this.I=2}}else this.I==3&&(c?Ju(this,c):this.i.length==0||sr(this.h)||Ju(this))};function Ju(c,y){var _;y?_=y.l:_=c.V++;const A=St(c.J);dt(A,"SID",c.M),dt(A,"RID",_),dt(A,"AID",c.K),ts(c,A),c.u&&c.o&&lr(A,c.u,c.o),_=new _e(c,c.j,_,c.D+1),c.u===null&&(_.J=c.o),y&&(c.i=y.G.concat(c.i)),y=qs(c,_,1e3),_.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Ct(c.h,_),je(_,A,y)}function ts(c,y){c.H&&Ue(c.H,function(_,A){dt(y,A,_)}),c.l&&Ue({},function(_,A){dt(y,A,_)})}function qs(c,y,_){_=Math.min(c.i.length,_);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var F=c.i;let ze=-1;for(;;){const At=["count="+_];ze==-1?_>0?(ze=F[0].g,At.push("ofs="+ze)):ze=0:At.push("ofs="+ze);let ut=!0;for(let Lt=0;Lt<_;Lt++){var W=F[Lt].g;const Qn=F[Lt].map;if(W-=ze,W<0)ze=Math.max(0,F[Lt].g-100),ut=!1;else try{W="req"+W+"_"||"";try{var de=Qn instanceof Map?Qn:Object.entries(Qn);for(const[Gr,Dr]of de){let Or=Dr;m(Dr)&&(Or=xn(Dr)),At.push(W+Gr+"="+encodeURIComponent(Or))}}catch(Gr){throw At.push(W+"type="+encodeURIComponent("_badmap")),Gr}}catch{A&&A(Qn)}}if(ut){de=At.join("&");break e}}de=void 0}return c=c.i.splice(0,_),y.G=c,de}function Zu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;le||w(),V||(le(),V=!0),x.add(y,c),c.A=0}}function ol(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ir(g(c.Da,c),tc(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ir(g(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Fr(this),ec(this))};function ll(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ec(c){c.g=new _e(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=St(c.na);dt(y,"RID","rpc"),dt(y,"SID",c.M),dt(y,"AID",c.K),dt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&dt(y,"TO",c.ia),dt(y,"TYPE","xmlhttp"),ts(c,y),c.u&&c.o&&lr(y,c.u,c.o),c.O&&(c.g.H=c.O);var _=c.g;c=c.ba,_.M=1,_.A=hi(St(y)),_.u=null,_.R=!0,rt(_,c)}r.Va=function(){this.C!=null&&(this.C=null,Fr(this),ol(this),xt(19))};function Fs(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function ul(c,y){var _=null;if(c.g==y){Fs(c),ll(c),c.g=null;var A=2}else if(qe(c.h,y))_=y.G,_n(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){_=y.u?y.u.length:0,y=Date.now()-y.F;var F=c.D;A=xr(),Bt(A,new js(A,_)),es(c)}else Zu(c);else if(F=y.m,F==3||F==0&&y.X>0||!(A==1&&bf(c,y)||A==2&&ol(c)))switch(_&&_.length>0&&(y=c.h,y.i=y.i.concat(_)),F){case 1:mi(c,5);break;case 4:mi(c,10);break;case 3:mi(c,6);break;default:mi(c,2)}}}function tc(c,y){let _=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(_*=2),_*y}function mi(c,y){if(c.j.info("Error code "+y),y==2){var _=g(c.bb,c),A=c.Ua;const F=!A;A=new Un(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Hi(A,"https"),hi(A),F?al(A.toString(),_):Gi(A.toString(),_)}else xt(2);c.I=0,c.l&&c.l.pa(y),nc(c),Za(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function nc(c){if(c.I=0,c.ja=[],c.l){const y=Ln(c.h);(y.length!=0||c.i.length!=0)&&(B(c.ja,y),B(c.ja,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.oa()}}function rc(c,y,_){var A=_ instanceof Un?St(_):new Un(_);if(A.g!="")y&&(A.g=y+"."+A.g),qa(A,A.u);else{var F=h.location;A=F.protocol,y=y?y+"."+F.hostname:F.hostname,F=+F.port;const W=new Un(null);A&&Hi(W,A),y&&(W.g=y),F&&qa(W,F),_&&(W.h=_),A=W}return _=c.G,y=c.wa,_&&y&&dt(A,_,y),dt(A,"VER",c.ka),ts(c,A),A}function Gs(c,y,_){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new Tt(new Ga({ab:_})):new Tt(c.ma),y.Fa(c.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function ic(){}r=ic.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ks(){}Ks.prototype.g=function(c,y){return new Dn(c,y)};function Dn(c,y){kt.call(this),this.g=new Hs(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!C(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!C(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new $i(this)}T(Dn,kt),Dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){Ja(this.g)},Dn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var _={};_.__data__=c,c=_}else this.v&&(_={},_.__data__=xn(c),c=_);y.i.push(new ci(y.Ya++,c)),y.I==3&&es(y)},Dn.prototype.N=function(){this.g.l=null,delete this.j,Ja(this.g),delete this.g,Dn.Z.N.call(this)};function cl(c){Ar.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const _ in y){c=_;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(cl,Ar);function ac(){kn.call(this),this.status=1}T(ac,kn);function $i(c){this.g=c}T($i,ic),$i.prototype.ra=function(){Bt(this.g,"a")},$i.prototype.qa=function(c){Bt(this.g,new cl(c))},$i.prototype.pa=function(c){Bt(this.g,new ac)},$i.prototype.oa=function(){Bt(this.g,"b")},Ks.prototype.createWebChannel=Ks.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,hb=function(){return new Ks},cb=function(){return xr()},ub=Vn,Xm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,Sh=K,se.COMPLETE="complete",lb=se,Pn.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",kt.prototype.listen=kt.prototype.J,lu=Pn,Tt.prototype.listenOnce=Tt.prototype.K,Tt.prototype.getLastError=Tt.prototype.Ha,Tt.prototype.getLastErrorCode=Tt.prototype.ya,Tt.prototype.getStatus=Tt.prototype.ca,Tt.prototype.getResponseJson=Tt.prototype.La,Tt.prototype.getResponseText=Tt.prototype.la,Tt.prototype.send=Tt.prototype.ea,Tt.prototype.setWithCredentials=Tt.prototype.Fa,ob=Tt}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yo="12.8.0";function PN(r){Yo=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new xp("@firebase/firestore");function wo(){return xs.logLevel}function ye(r,...e){if(xs.logLevel<=Je.DEBUG){const n=e.map(zp);xs.debug(`Firestore (${Yo}): ${r}`,...n)}}function ki(r,...e){if(xs.logLevel<=Je.ERROR){const n=e.map(zp);xs.error(`Firestore (${Yo}): ${r}`,...n)}}function Lo(r,...e){if(xs.logLevel<=Je.WARN){const n=e.map(zp);xs.warn(`Firestore (${Yo}): ${r}`,...n)}}function zp(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pe(r,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,fb(r,a,n)}function fb(r,e,n){let a=`FIRESTORE (${Yo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw ki(a),new Error(a)}function lt(r,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,r||fb(e,o,a)}function Be(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Li{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Sn.UNAUTHENTICATED)))}shutdown(){}}class VN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class LN{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){lt(this.o===void 0,42304);let a=this.i;const o=p=>this.i!==a?(a=this.i,n(p)):Promise.resolve();let u=new Ia;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Ia,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const p=u;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},m=p=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((p=>m(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?m(p):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Ia)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(lt(typeof a.accessToken=="string",31837,{l:a}),new db(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return lt(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class UN{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class jN{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new UN(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class U0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zN{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ir(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){lt(this.o===void 0,3512);const a=u=>{u.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,ye("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>a(u)))};const o=u=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new U0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(lt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new U0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=BN(40);for(let u=0;u<o.length;++u)a.length<20&&o[u]<n&&(a+=e.charAt(o[u]%62))}return a}}function Ze(r,e){return r<e?-1:r>e?1:0}function Wm(r,e){const n=Math.min(r.length,e.length);for(let a=0;a<n;a++){const o=r.charAt(a),u=e.charAt(a);if(o!==u)return Dm(o)===Dm(u)?Ze(o,u):Dm(o)?1:-1}return Ze(r.length,e.length)}const HN=55296,qN=57343;function Dm(r){const e=r.charCodeAt(0);return e>=HN&&e<=qN}function Uo(r,e,n){return r.length===e.length&&r.every(((a,o)=>n(a,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="__name__";class Wr{constructor(e,n,a){n===void 0?n=0:n>e.length&&Pe(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&Pe(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return Wr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Wr?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const u=Wr.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ze(e.length,n.length)}static compareSegments(e,n){const a=Wr.isNumericId(e),o=Wr.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?Wr.extractNumericId(e).compare(Wr.extractNumericId(n)):Wm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xa.fromString(e.substring(4,e.length-2))}}class wt extends Wr{construct(e,n,a){return new wt(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new pe(re.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new wt(n)}static emptyPath(){return new wt([])}}const FN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class pn extends Wr{construct(e,n,a){return new pn(e,n,a)}static isValidIdentifier(e){return FN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),pn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new pn([j0])}static fromServerFormat(e){const n=[];let a="",o=0;const u=()=>{if(a.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let h=!1;for(;o<e.length;){const m=e[o];if(m==="\\"){if(o+1===e.length)throw new pe(re.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(re.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=p,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(a+=m,o++):(u(),o++)}if(u(),h)throw new pe(re.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new pn(n)}static emptyPath(){return new pn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(wt.fromString(e))}static fromName(e){return new Ce(wt.fromString(e).popFirst(5))}static empty(){return new Ce(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return wt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new wt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(r,e,n){if(!n)throw new pe(re.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function GN(r,e,n,a){if(e===!0&&a===!0)throw new pe(re.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function z0(r){if(!Ce.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function B0(r){if(Ce.isDocumentKey(r))throw new pe(re.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function pb(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function of(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Pe(12329,{type:typeof r})}function bu(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new pe(re.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=of(r);throw new pe(re.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(r,e){const n={typeString:r};return e&&(n.value=e),n}function zu(r,e){if(!pb(r))throw new pe(re.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,u="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){n=`JSON missing required field: '${a}'`;break}const h=r[a];if(o&&typeof h!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${a}' field to equal '${u.value}'`;break}}if(n)throw new pe(re.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=-62135596800,q0=1e6;class Rt{static now(){return Rt.fromMillis(Date.now())}static fromDate(e){return Rt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*q0);return new Rt(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(re.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<H0)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(re.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/q0}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zu(e,Rt._jsonSchema))return new Rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Rt._jsonSchemaVersion="firestore/timestamp/1.0",Rt._jsonSchema={type:Kt("string",Rt._jsonSchemaVersion),seconds:Kt("number"),nanoseconds:Kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Rt(0,0))}static max(){return new Le(new Rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=-1;function KN(r,e){const n=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(a===1e9?new Rt(n+1,0):new Rt(n,a));return new Da(o,Ce.empty(),e)}function YN(r){return new Da(r.readTime,r.key,wu)}class Da{constructor(e,n,a){this.readTime=e,this.documentKey=n,this.largestBatchId=a}static min(){return new Da(Le.min(),Ce.empty(),wu)}static max(){return new Da(Le.max(),Ce.empty(),wu)}}function $N(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ce.comparator(r.documentKey,e.documentKey),n!==0?n:Ze(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(r){if(r.code!==re.FAILED_PRECONDITION||r.message!==QN)throw r;ye("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Pe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ae(((a,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(a,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(a,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ae?n:ae.resolve(n)}catch(n){return ae.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ae.reject(n)}static resolve(e){return new ae(((n,a)=>{n(e)}))}static reject(e){return new ae(((n,a)=>{a(e)}))}static waitFor(e){return new ae(((n,a)=>{let o=0,u=0,h=!1;e.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(p=>a(p)))})),h=!0,u===o&&n()}))}static or(e){let n=ae.resolve(!1);for(const a of e)n=n.next((o=>o?ae.resolve(o):a()));return n}static forEach(e,n){const a=[];return e.forEach(((o,u)=>{a.push(n.call(this,o,u))})),this.waitFor(a)}static mapArray(e,n){return new ae(((a,o)=>{const u=e.length,h=new Array(u);let m=0;for(let p=0;p<u;p++){const g=p;n(e[g]).next((v=>{h[g]=v,++m,m===u&&a(h)}),(v=>o(v)))}}))}static doWhile(e,n){return new ae(((a,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):a()};u()}))}}function WN(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Qo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=a=>this.ae(a),this.ue=a=>n.writeSequenceNumber(a))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp=-1;function uf(r){return r==null}function Fh(r){return r===0&&1/r==-1/0}function JN(r){return typeof r=="number"&&Number.isInteger(r)&&!Fh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb="";function ZN(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=F0(e)),e=eD(r.get(n),e);return F0(e)}function eD(r,e){let n=e;const a=r.length;for(let o=0;o<a;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case gb:n+="";break;default:n+=u}}return n}function F0(r){return r+gb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G0(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ds(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function yb(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n){this.comparator=e,this.root=n||mn.EMPTY}insert(e,n){return new Dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new Dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const a=this.comparator(e,n.key);if(a===0)return n.value;a<0?n=n.left:a>0&&(n=n.right)}return null}indexOf(e){let n=0,a=this.root;for(;!a.isEmpty();){const o=this.comparator(e,a.key);if(o===0)return n+a.left.size;o<0?a=a.left:(n+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,a)=>(e(n,a),!1)))}toString(){const e=[];return this.inorderTraversal(((n,a)=>(e.push(`${n}:${a}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,n,a,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?a(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,n,a,o,u){this.key=e,this.value=n,this.color=a??mn.RED,this.left=o??mn.EMPTY,this.right=u??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,a,o,u){return new mn(e??this.key,n??this.value,a??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,a){let o=this;const u=a(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,a),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,a)),o.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let a,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return mn.EMPTY;a=o.right.min(),o=o.copy(a.key,a.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Pe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Pe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Pe(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw Pe(57766)}get value(){throw Pe(16141)}get color(){throw Pe(16727)}get left(){throw Pe(29726)}get right(){throw Pe(36894)}copy(e,n,a,o,u){return this}insert(e,n,a){return new mn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.comparator=e,this.data=new Dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,a)=>(e(n),!1)))}forEachInRange(e,n){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const o=a.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let a;for(a=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new K0(this.data.getIterator())}getIteratorFrom(e){return new K0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((a=>{n=n.add(a)})),n}isEqual(e){if(!(e instanceof Jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),a=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Jt(this.comparator);return n.data=e,n}}class K0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e){this.fields=e,e.sort(pn.comparator)}static empty(){return new Ur([])}unionWith(e){let n=new Jt(pn.comparator);for(const a of this.fields)n=n.add(a);for(const a of e)n=n.add(a);return new Ur(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Uo(this.fields,e.fields,((n,a)=>n.isEqual(a)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new vb("Invalid base64 string: "+u):u}})(e);return new gn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new gn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const tD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(r){if(lt(!!r,39018),typeof r=="string"){let e=0;const n=tD.exec(r);if(lt(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:zt(r.seconds),nanos:zt(r.nanos)}}function zt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ma(r){return typeof r=="string"?gn.fromBase64String(r):gn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b="server_timestamp",Eb="__type__",Tb="__previous_value__",bb="__local_write_time__";function qp(r){return(r?.mapValue?.fields||{})[Eb]?.stringValue===_b}function cf(r){const e=r.mapValue.fields[Tb];return qp(e)?cf(e):e}function Su(r){const e=Oa(r.mapValue.fields[bb].timestampValue);return new Rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nD{constructor(e,n,a,o,u,h,m,p,g,v,T){this.databaseId=e,this.appId=n,this.persistenceKey=a,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=v,this.apiKey=T}}const Gh="(default)";class Au{constructor(e,n){this.projectId=e,this.database=n||Gh}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===Gh}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}function rD(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new pe(re.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(r.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb="__type__",iD="__max__",fh={mapValue:{}},Sb="__vector__",Kh="value";function Pa(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?qp(r)?4:sD(r)?9007199254740991:aD(r)?10:11:Pe(28295,{value:r})}function ai(r,e){if(r===e)return!0;const n=Pa(r);if(n!==Pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Su(r).isEqual(Su(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Oa(o.timestampValue),m=Oa(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return Ma(o.bytesValue).isEqual(Ma(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return zt(o.geoPointValue.latitude)===zt(u.geoPointValue.latitude)&&zt(o.geoPointValue.longitude)===zt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return zt(o.integerValue)===zt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=zt(o.doubleValue),m=zt(u.doubleValue);return h===m?Fh(h)===Fh(m):isNaN(h)&&isNaN(m)}return!1})(r,e);case 9:return Uo(r.arrayValue.values||[],e.arrayValue.values||[],ai);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(G0(h)!==G0(m))return!1;for(const p in h)if(h.hasOwnProperty(p)&&(m[p]===void 0||!ai(h[p],m[p])))return!1;return!0})(r,e);default:return Pe(52216,{left:r})}}function Ru(r,e){return(r.values||[]).find((n=>ai(n,e)))!==void 0}function jo(r,e){if(r===e)return 0;const n=Pa(r),a=Pa(e);if(n!==a)return Ze(n,a);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ze(r.booleanValue,e.booleanValue);case 2:return(function(u,h){const m=zt(u.integerValue||u.doubleValue),p=zt(h.integerValue||h.doubleValue);return m<p?-1:m>p?1:m===p?0:isNaN(m)?isNaN(p)?0:-1:1})(r,e);case 3:return Y0(r.timestampValue,e.timestampValue);case 4:return Y0(Su(r),Su(e));case 5:return Wm(r.stringValue,e.stringValue);case 6:return(function(u,h){const m=Ma(u),p=Ma(h);return m.compareTo(p)})(r.bytesValue,e.bytesValue);case 7:return(function(u,h){const m=u.split("/"),p=h.split("/");for(let g=0;g<m.length&&g<p.length;g++){const v=Ze(m[g],p[g]);if(v!==0)return v}return Ze(m.length,p.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,h){const m=Ze(zt(u.latitude),zt(h.latitude));return m!==0?m:Ze(zt(u.longitude),zt(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return $0(r.arrayValue,e.arrayValue);case 10:return(function(u,h){const m=u.fields||{},p=h.fields||{},g=m[Kh]?.arrayValue,v=p[Kh]?.arrayValue,T=Ze(g?.values?.length||0,v?.values?.length||0);return T!==0?T:$0(g,v)})(r.mapValue,e.mapValue);case 11:return(function(u,h){if(u===fh.mapValue&&h===fh.mapValue)return 0;if(u===fh.mapValue)return 1;if(h===fh.mapValue)return-1;const m=u.fields||{},p=Object.keys(m),g=h.fields||{},v=Object.keys(g);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const S=Wm(p[T],v[T]);if(S!==0)return S;const N=jo(m[p[T]],g[v[T]]);if(N!==0)return N}return Ze(p.length,v.length)})(r.mapValue,e.mapValue);default:throw Pe(23264,{he:n})}}function Y0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ze(r,e);const n=Oa(r),a=Oa(e),o=Ze(n.seconds,a.seconds);return o!==0?o:Ze(n.nanos,a.nanos)}function $0(r,e){const n=r.values||[],a=e.values||[];for(let o=0;o<n.length&&o<a.length;++o){const u=jo(n[o],a[o]);if(u)return u}return Ze(n.length,a.length)}function zo(r){return Jm(r)}function Jm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const a=Oa(n);return`time(${a.seconds},${a.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ma(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ce.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let a="[",o=!0;for(const u of n.values||[])o?o=!1:a+=",",a+=Jm(u);return a+"]"})(r.arrayValue):"mapValue"in r?(function(n){const a=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of a)u?u=!1:o+=",",o+=`${h}:${Jm(n.fields[h])}`;return o+"}"})(r.mapValue):Pe(61005,{value:r})}function Ah(r){switch(Pa(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cf(r);return e?16+Ah(e):16;case 5:return 2*r.stringValue.length;case 6:return Ma(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(a){return(a.values||[]).reduce(((o,u)=>o+Ah(u)),0)})(r.arrayValue);case 10:case 11:return(function(a){let o=0;return Ds(a.fields,((u,h)=>{o+=u.length+Ah(h)})),o})(r.mapValue);default:throw Pe(13486,{value:r})}}function Q0(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zm(r){return!!r&&"integerValue"in r}function Fp(r){return!!r&&"arrayValue"in r}function X0(r){return!!r&&"nullValue"in r}function W0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Rh(r){return!!r&&"mapValue"in r}function aD(r){return(r?.mapValue?.fields||{})[wb]?.stringValue===Sb}function du(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ds(r.mapValue.fields,((n,a)=>e.mapValue.fields[n]=du(a))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=du(r.arrayValue.values[n]);return e}return{...r}}function sD(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iD}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.value=e}static empty(){return new yr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let a=0;a<e.length-1;++a)if(n=(n.mapValue.fields||{})[e.get(a)],!Rh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=du(n)}setAll(e){let n=pn.emptyPath(),a={},o=[];e.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const p=this.getFieldsMap(n);this.applyChanges(p,a,o),a={},o=[],n=m.popLast()}h?a[m.lastSegment()]=du(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,a,o)}delete(e){const n=this.field(e.popLast());Rh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ai(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let a=0;a<e.length;++a){let o=n.mapValue.fields[e.get(a)];Rh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(a)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,a){Ds(n,((o,u)=>e[o]=u));for(const o of a)delete e[o]}clone(){return new yr(du(this.value))}}function Ab(r){const e=[];return Ds(r.fields,((n,a)=>{const o=new pn([n]);if(Rh(a)){const u=Ab(a.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Ur(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n,a,o,u,h,m){this.key=e,this.documentType=n,this.version=a,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(e){return new An(e,0,Le.min(),Le.min(),Le.min(),yr.empty(),0)}static newFoundDocument(e,n,a,o){return new An(e,1,n,Le.min(),a,o,0)}static newNoDocument(e,n){return new An(e,2,n,Le.min(),Le.min(),yr.empty(),0)}static newUnknownDocument(e,n){return new An(e,3,n,Le.min(),Le.min(),yr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n){this.position=e,this.inclusive=n}}function J0(r,e,n){let a=0;for(let o=0;o<r.position.length;o++){const u=e[o],h=r.position[o];if(u.field.isKeyField()?a=Ce.comparator(Ce.fromName(h.referenceValue),n.key):a=jo(h,n.data.field(u.field)),u.dir==="desc"&&(a*=-1),a!==0)break}return a}function Z0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ai(r.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n="asc"){this.field=e,this.dir=n}}function oD(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rb{}class Gt extends Rb{constructor(e,n,a){super(),this.field=e,this.op=n,this.value=a}static create(e,n,a){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,a):new uD(e,n,a):n==="array-contains"?new fD(e,a):n==="in"?new dD(e,a):n==="not-in"?new mD(e,a):n==="array-contains-any"?new pD(e,a):new Gt(e,n,a)}static createKeyFieldInFilter(e,n,a){return n==="in"?new cD(e,a):new hD(e,a)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&Pa(this.value)===Pa(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Pe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Br extends Rb{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Br(e,n)}matches(e){return xb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function xb(r){return r.op==="and"}function Ib(r){return lD(r)&&xb(r)}function lD(r){for(const e of r.filters)if(e instanceof Br)return!1;return!0}function ep(r){if(r instanceof Gt)return r.field.canonicalString()+r.op.toString()+zo(r.value);if(Ib(r))return r.filters.map((e=>ep(e))).join(",");{const e=r.filters.map((n=>ep(n))).join(",");return`${r.op}(${e})`}}function Cb(r,e){return r instanceof Gt?(function(a,o){return o instanceof Gt&&a.op===o.op&&a.field.isEqual(o.field)&&ai(a.value,o.value)})(r,e):r instanceof Br?(function(a,o){return o instanceof Br&&a.op===o.op&&a.filters.length===o.filters.length?a.filters.reduce(((u,h,m)=>u&&Cb(h,o.filters[m])),!0):!1})(r,e):void Pe(19439)}function Nb(r){return r instanceof Gt?(function(n){return`${n.field.canonicalString()} ${n.op} ${zo(n.value)}`})(r):r instanceof Br?(function(n){return n.op.toString()+" {"+n.getFilters().map(Nb).join(" ,")+"}"})(r):"Filter"}class uD extends Gt{constructor(e,n,a){super(e,n,a),this.key=Ce.fromName(a.referenceValue)}matches(e){const n=Ce.comparator(e.key,this.key);return this.matchesComparison(n)}}class cD extends Gt{constructor(e,n){super(e,"in",n),this.keys=Db("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class hD extends Gt{constructor(e,n){super(e,"not-in",n),this.keys=Db("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Db(r,e){return(e.arrayValue?.values||[]).map((n=>Ce.fromName(n.referenceValue)))}class fD extends Gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Fp(n)&&Ru(n.arrayValue,this.value)}}class dD extends Gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ru(this.value.arrayValue,n)}}class mD extends Gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ru(this.value.arrayValue,n)}}class pD extends Gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Fp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((a=>Ru(this.value.arrayValue,a)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,n=null,a=[],o=[],u=null,h=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=a,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function eE(r,e=null,n=[],a=[],o=null,u=null,h=null){return new gD(r,e,n,a,o,u,h)}function Gp(r){const e=Be(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((a=>ep(a))).join(","),n+="|ob:",n+=e.orderBy.map((a=>(function(u){return u.field.canonicalString()+u.dir})(a))).join(","),uf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((a=>zo(a))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((a=>zo(a))).join(",")),e.Te=n}return e.Te}function Kp(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!oD(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!Cb(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Z0(r.startAt,e.startAt)&&Z0(r.endAt,e.endAt)}function tp(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,n=null,a=[],o=[],u=null,h="F",m=null,p=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function yD(r,e,n,a,o,u,h,m){return new Xo(r,e,n,a,o,u,h,m)}function Ob(r){return new Xo(r)}function tE(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function vD(r){return Ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Mb(r){return r.collectionGroup!==null}function mu(r){const e=Be(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new Jt(pn.comparator);return h.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(m=m.add(g.field))}))})),m})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new xu(u,a))})),n.has(pn.keyField().canonicalString())||e.Ie.push(new xu(pn.keyField(),a))}return e.Ie}function ti(r){const e=Be(r);return e.Ee||(e.Ee=_D(e,mu(r))),e.Ee}function _D(r,e){if(r.limitType==="F")return eE(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new xu(o.field,u)}));const n=r.endAt?new Yh(r.endAt.position,r.endAt.inclusive):null,a=r.startAt?new Yh(r.startAt.position,r.startAt.inclusive):null;return eE(r.path,r.collectionGroup,e,r.filters,r.limit,n,a)}}function np(r,e){const n=r.filters.concat([e]);return new Xo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function ED(r,e){const n=r.explicitOrderBy.concat([e]);return new Xo(r.path,r.collectionGroup,n,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function rp(r,e,n){return new Xo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function hf(r,e){return Kp(ti(r),ti(e))&&r.limitType===e.limitType}function Pb(r){return`${Gp(ti(r))}|lt:${r.limitType}`}function So(r){return`Query(target=${(function(n){let a=n.path.canonicalString();return n.collectionGroup!==null&&(a+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(a+=`, filters: [${n.filters.map((o=>Nb(o))).join(", ")}]`),uf(n.limit)||(a+=", limit: "+n.limit),n.orderBy.length>0&&(a+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(a+=", startAt: ",a+=n.startAt.inclusive?"b:":"a:",a+=n.startAt.position.map((o=>zo(o))).join(",")),n.endAt&&(a+=", endAt: ",a+=n.endAt.inclusive?"a:":"b:",a+=n.endAt.position.map((o=>zo(o))).join(",")),`Target(${a})`})(ti(r))}; limitType=${r.limitType})`}function ff(r,e){return e.isFoundDocument()&&(function(a,o){const u=o.key.path;return a.collectionGroup!==null?o.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(u):Ce.isDocumentKey(a.path)?a.path.isEqual(u):a.path.isImmediateParentOf(u)})(r,e)&&(function(a,o){for(const u of mu(a))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(a,o){for(const u of a.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(a,o){return!(a.startAt&&!(function(h,m,p){const g=J0(h,m,p);return h.inclusive?g<=0:g<0})(a.startAt,mu(a),o)||a.endAt&&!(function(h,m,p){const g=J0(h,m,p);return h.inclusive?g>=0:g>0})(a.endAt,mu(a),o))})(r,e)}function TD(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function kb(r){return(e,n)=>{let a=!1;for(const o of mu(r)){const u=bD(o,e,n);if(u!==0)return u;a=a||o.field.isKeyField()}return 0}}function bD(r,e,n){const a=r.field.isKeyField()?Ce.comparator(e.key,n.key):(function(u,h,m){const p=h.data.field(u),g=m.data.field(u);return p!==null&&g!==null?jo(p,g):Pe(42886)})(r.field,e,n);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Pe(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a!==void 0){for(const[o,u]of a)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const a=this.mapKeyFn(e),o=this.inner[a];if(o===void 0)return this.inner[a]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),a=this.inner[n];if(a===void 0)return!1;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return a.length===1?delete this.inner[n]:a.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((n,a)=>{for(const[o,u]of a)e(o,u)}))}isEmpty(){return yb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=new Dt(Ce.comparator);function Vi(){return wD}const Vb=new Dt(Ce.comparator);function uu(...r){let e=Vb;for(const n of r)e=e.insert(n.key,n);return e}function Lb(r){let e=Vb;return r.forEach(((n,a)=>e=e.insert(n,a.overlayedDocument))),e}function bs(){return pu()}function Ub(){return pu()}function pu(){return new Os((r=>r.toString()),((r,e)=>r.isEqual(e)))}const SD=new Dt(Ce.comparator),AD=new Jt(Ce.comparator);function et(...r){let e=AD;for(const n of r)e=e.add(n);return e}const RD=new Jt(Ze);function xD(){return RD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(e)?"-0":e}}function jb(r){return{integerValue:""+r}}function ID(r,e){return JN(e)?jb(e):Yp(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this._=void 0}}function CD(r,e,n){return r instanceof Iu?(function(o,u){const h={fields:{[Eb]:{stringValue:_b},[bb]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&qp(u)&&(u=cf(u)),u&&(h.fields[Tb]=u),{mapValue:h}})(n,e):r instanceof Cu?Bb(r,e):r instanceof Nu?Hb(r,e):(function(o,u){const h=zb(o,u),m=nE(h)+nE(o.Ae);return Zm(h)&&Zm(o.Ae)?jb(m):Yp(o.serializer,m)})(r,e)}function ND(r,e,n){return r instanceof Cu?Bb(r,e):r instanceof Nu?Hb(r,e):n}function zb(r,e){return r instanceof $h?(function(a){return Zm(a)||(function(u){return!!u&&"doubleValue"in u})(a)})(e)?e:{integerValue:0}:null}class Iu extends df{}class Cu extends df{constructor(e){super(),this.elements=e}}function Bb(r,e){const n=qb(e);for(const a of r.elements)n.some((o=>ai(o,a)))||n.push(a);return{arrayValue:{values:n}}}class Nu extends df{constructor(e){super(),this.elements=e}}function Hb(r,e){let n=qb(e);for(const a of r.elements)n=n.filter((o=>!ai(o,a)));return{arrayValue:{values:n}}}class $h extends df{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function nE(r){return zt(r.integerValue||r.doubleValue)}function qb(r){return Fp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e,n){this.field=e,this.transform=n}}function OD(r,e){return r.field.isEqual(e.field)&&(function(a,o){return a instanceof Cu&&o instanceof Cu||a instanceof Nu&&o instanceof Nu?Uo(a.elements,o.elements,ai):a instanceof $h&&o instanceof $h?ai(a.Ae,o.Ae):a instanceof Iu&&o instanceof Iu})(r.transform,e.transform)}class MD{constructor(e,n){this.version=e,this.transformResults=n}}class ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class mf{}function Fb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new $p(r.key,ni.none()):new Bu(r.key,r.data,ni.none());{const n=r.data,a=yr.empty();let o=new Jt(pn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?a.delete(u):a.set(u,h),o=o.add(u)}return new Ms(r.key,a,new Ur(o.toArray()),ni.none())}}function PD(r,e,n){r instanceof Bu?(function(o,u,h){const m=o.value.clone(),p=iE(o.fieldTransforms,u,h.transformResults);m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(r,e,n):r instanceof Ms?(function(o,u,h){if(!xh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=iE(o.fieldTransforms,u,h.transformResults),p=u.data;p.setAll(Gb(o)),p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(r,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function gu(r,e,n,a){return r instanceof Bu?(function(u,h,m,p){if(!xh(u.precondition,h))return m;const g=u.value.clone(),v=aE(u.fieldTransforms,p,h);return g.setAll(v),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(r,e,n,a):r instanceof Ms?(function(u,h,m,p){if(!xh(u.precondition,h))return m;const g=aE(u.fieldTransforms,p,h),v=h.data;return v.setAll(Gb(u)),v.setAll(g),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(r,e,n,a):(function(u,h,m){return xh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(r,e,n)}function kD(r,e){let n=null;for(const a of r.fieldTransforms){const o=e.data.field(a.field),u=zb(a.transform,o||null);u!=null&&(n===null&&(n=yr.empty()),n.set(a.field,u))}return n||null}function rE(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(a,o){return a===void 0&&o===void 0||!(!a||!o)&&Uo(a,o,((u,h)=>OD(u,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Bu extends mf{constructor(e,n,a,o=[]){super(),this.key=e,this.value=n,this.precondition=a,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ms extends mf{constructor(e,n,a,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=a,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Gb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const a=r.data.field(n);e.set(n,a)}})),e}function iE(r,e,n){const a=new Map;lt(r.length===n.length,32656,{Ve:n.length,de:r.length});for(let o=0;o<n.length;o++){const u=r[o],h=u.transform,m=e.data.field(u.field);a.set(u.field,ND(h,m,n[o]))}return a}function aE(r,e,n){const a=new Map;for(const o of r){const u=o.transform,h=n.data.field(o.field);a.set(o.field,CD(u,h,e))}return a}class $p extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VD extends mf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n,a,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=a,this.mutations=o}applyToRemoteDocument(e,n){const a=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&PD(u,e,a[o])}}applyToLocalView(e,n){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(n=gu(a,e,n,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(n=gu(a,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const a=Ub();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const p=Fb(h,m);p!==null&&a.set(o.key,p),h.isValidDocument()||h.convertToNoDocument(Le.min())})),a}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),et())}isEqual(e){return this.batchId===e.batchId&&Uo(this.mutations,e.mutations,((n,a)=>rE(n,a)))&&Uo(this.baseMutations,e.baseMutations,((n,a)=>rE(n,a)))}}class Qp{constructor(e,n,a,o){this.batch=e,this.commitVersion=n,this.mutationResults=a,this.docVersions=o}static from(e,n,a){lt(e.mutations.length===a.length,58842,{me:e.mutations.length,fe:a.length});let o=(function(){return SD})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,a[h].version);return new Qp(e,n,a,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,nt;function zD(r){switch(r){case re.OK:return Pe(64938);case re.CANCELLED:case re.UNKNOWN:case re.DEADLINE_EXCEEDED:case re.RESOURCE_EXHAUSTED:case re.INTERNAL:case re.UNAVAILABLE:case re.UNAUTHENTICATED:return!1;case re.INVALID_ARGUMENT:case re.NOT_FOUND:case re.ALREADY_EXISTS:case re.PERMISSION_DENIED:case re.FAILED_PRECONDITION:case re.ABORTED:case re.OUT_OF_RANGE:case re.UNIMPLEMENTED:case re.DATA_LOSS:return!0;default:return Pe(15467,{code:r})}}function Kb(r){if(r===void 0)return ki("GRPC error has no .code"),re.UNKNOWN;switch(r){case Ft.OK:return re.OK;case Ft.CANCELLED:return re.CANCELLED;case Ft.UNKNOWN:return re.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return re.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return re.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return re.INTERNAL;case Ft.UNAVAILABLE:return re.UNAVAILABLE;case Ft.UNAUTHENTICATED:return re.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return re.INVALID_ARGUMENT;case Ft.NOT_FOUND:return re.NOT_FOUND;case Ft.ALREADY_EXISTS:return re.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return re.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return re.FAILED_PRECONDITION;case Ft.ABORTED:return re.ABORTED;case Ft.OUT_OF_RANGE:return re.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return re.UNIMPLEMENTED;case Ft.DATA_LOSS:return re.DATA_LOSS;default:return Pe(39323,{code:r})}}(nt=Ft||(Ft={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=new xa([4294967295,4294967295],0);function sE(r){const e=BD().encode(r),n=new sb;return n.update(e),new Uint8Array(n.digest())}function oE(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),a=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new xa([n,a],0),new xa([o,u],0)]}class Xp{constructor(e,n,a){if(this.bitmap=e,this.padding=n,this.hashCount=a,n<0||n>=8)throw new cu(`Invalid padding: ${n}`);if(a<0)throw new cu(`Invalid hash count: ${a}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${a}`);if(e.length===0&&n!==0)throw new cu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xa.fromNumber(this.ge)}ye(e,n,a){let o=e.add(n.multiply(xa.fromNumber(a)));return o.compare(HD)===1&&(o=new xa([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=sE(e),[a,o]=oE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);if(!this.we(h))return!1}return!0}static create(e,n,a){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new Xp(u,o,n);return a.forEach((m=>h.insert(m))),h}insert(e){if(this.ge===0)return;const n=sE(e),[a,o]=oE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(a,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),a=e%8;this.bitmap[n]|=1<<a}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,a,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=a,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,a){const o=new Map;return o.set(e,Hu.createSynthesizedTargetChangeForCurrentChange(e,n,a)),new pf(Le.min(),o,new Dt(Ze),Vi(),et())}}class Hu{constructor(e,n,a,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=a,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,a){return new Hu(a,n,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n,a,o){this.Se=e,this.removedTargetIds=n,this.key=a,this.De=o}}class Yb{constructor(e,n){this.targetId=e,this.Ce=n}}class $b{constructor(e,n,a=gn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=a,this.cause=o}}class lE{constructor(){this.ve=0,this.Fe=uE(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),n=et(),a=et();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:a=a.add(o);break;default:Pe(38017,{changeType:u})}})),new Hu(this.Me,this.xe,e,n,a)}Ke(){this.Oe=!1,this.Fe=uE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,lt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Vi(),this.He=dh(),this.Je=dh(),this.Ze=new Dt(Ze)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const a=this.nt(n);switch(e.state){case 0:this.rt(n)&&a.Le(e.resumeToken);break;case 1:a.We(),a.Ne||a.Ke(),a.Le(e.resumeToken);break;case 2:a.We(),a.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(a.Qe(),a.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),a.Le(e.resumeToken));break;default:Pe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((a,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,a=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(tp(u))if(a===0){const h=new Ce(u.path);this.et(n,h,An.newNoDocument(h,Le.min()))}else lt(a===1,20013,{expectedCount:a});else{const h=this._t(n);if(h!==a){const m=this.ut(e),p=m?this.ct(m,e,h):1;if(p!==0){this.it(n);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:a="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=Ma(a).toUint8Array()}catch(p){if(p instanceof vb)return Lo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{m=new Xp(h,o,u)}catch(p){return Lo(p instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return m.ge===0?null:m}ct(e,n,a){return n.Ce.count===a-this.Pt(e,n.targetId)?0:2}Pt(e,n){const a=this.Ge.getRemoteKeysForTarget(n);let o=0;return a.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&tp(m.target)){const p=new Ce(m.target.path);this.It(p).has(h)||this.Et(h,p)||this.et(h,p,An.newNoDocument(p,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let a=et();this.Je.forEach(((u,h)=>{let m=!0;h.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(a=a.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new pf(e,n,this.Ze,this.je,a);return this.je=Vi(),this.He=dh(),this.Je=dh(),this.Ze=new Dt(Ze),o}Ye(e,n){if(!this.rt(e))return;const a=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,a),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,a){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),a&&(this.je=this.je.insert(n,a))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new lE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Jt(Ze),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Jt(Ze),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new lE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dh(){return new Dt(Ce.comparator)}function uE(){return new Dt(Ce.comparator)}const FD={asc:"ASCENDING",desc:"DESCENDING"},GD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KD={and:"AND",or:"OR"};class YD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ip(r,e){return r.useProto3Json||uf(e)?e:{value:e}}function Qh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Qb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $D(r,e){return Qh(r,e.toTimestamp())}function ri(r){return lt(!!r,49232),Le.fromTimestamp((function(n){const a=Oa(n);return new Rt(a.seconds,a.nanos)})(r))}function Wp(r,e){return ap(r,e).canonicalString()}function ap(r,e){const n=(function(o){return new wt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Xb(r){const e=wt.fromString(r);return lt(tw(e),10190,{key:e.toString()}),e}function sp(r,e){return Wp(r.databaseId,e.path)}function Om(r,e){const n=Xb(e);if(n.get(1)!==r.databaseId.projectId)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new pe(re.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ce(Jb(n))}function Wb(r,e){return Wp(r.databaseId,e)}function QD(r){const e=Xb(r);return e.length===4?wt.emptyPath():Jb(e)}function op(r){return new wt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Jb(r){return lt(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function cE(r,e,n){return{name:sp(r,e),fields:n.value.mapValue.fields}}function XD(r,e){let n;if("targetChange"in e){e.targetChange;const a=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Pe(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,v){return g.useProto3Json?(lt(v===void 0||typeof v=="string",58123),gn.fromBase64String(v||"")):(lt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),gn.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,m=h&&(function(g){const v=g.code===void 0?re.UNKNOWN:Kb(g.code);return new pe(v,g.message||"")})(h);n=new $b(a,o,u,m||null)}else if("documentChange"in e){e.documentChange;const a=e.documentChange;a.document,a.document.name,a.document.updateTime;const o=Om(r,a.document.name),u=ri(a.document.updateTime),h=a.document.createTime?ri(a.document.createTime):Le.min(),m=new yr({mapValue:{fields:a.document.fields}}),p=An.newFoundDocument(o,u,h,m),g=a.targetIds||[],v=a.removedTargetIds||[];n=new Ih(g,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const a=e.documentDelete;a.document;const o=Om(r,a.document),u=a.readTime?ri(a.readTime):Le.min(),h=An.newNoDocument(o,u),m=a.removedTargetIds||[];n=new Ih([],m,h.key,h)}else if("documentRemove"in e){e.documentRemove;const a=e.documentRemove;a.document;const o=Om(r,a.document),u=a.removedTargetIds||[];n=new Ih([],u,o,null)}else{if(!("filter"in e))return Pe(11601,{Vt:e});{e.filter;const a=e.filter;a.targetId;const{count:o=0,unchangedNames:u}=a,h=new jD(o,u),m=a.targetId;n=new Yb(m,h)}}return n}function WD(r,e){let n;if(e instanceof Bu)n={update:cE(r,e.key,e.value)};else if(e instanceof $p)n={delete:sp(r,e.key)};else if(e instanceof Ms)n={update:cE(r,e.key,e.data),updateMask:s2(e.fieldMask)};else{if(!(e instanceof VD))return Pe(16599,{dt:e.type});n={verify:sp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((a=>(function(u,h){const m=h.transform;if(m instanceof Iu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Cu)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Nu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof $h)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw Pe(20930,{transform:h.transform})})(0,a)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:$D(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Pe(27497)})(r,e.precondition)),n}function JD(r,e){return r&&r.length>0?(lt(e!==void 0,14353),r.map((n=>(function(o,u){let h=o.updateTime?ri(o.updateTime):ri(u);return h.isEqual(Le.min())&&(h=ri(u)),new MD(h,o.transformResults||[])})(n,e)))):[]}function ZD(r,e){return{documents:[Wb(r,e.path)]}}function e2(r,e){const n={structuredQuery:{}},a=e.path;let o;e.collectionGroup!==null?(o=a,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=a.popLast(),n.structuredQuery.from=[{collectionId:a.lastSegment()}]),n.parent=Wb(r,o);const u=(function(g){if(g.length!==0)return ew(Br.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((v=>(function(S){return{field:Ao(S.field),direction:r2(S.dir)}})(v)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const m=ip(r,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function t2(r){let e=QD(r.parent);const n=r.structuredQuery,a=n.from?n.from.length:0;let o=null;if(a>0){lt(a===1,65062);const v=n.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let u=[];n.where&&(u=(function(T){const S=Zb(T);return S instanceof Br&&Ib(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((S=>(function(B){return new xu(Ro(B.field),(function(Q){switch(Q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(T){let S;return S=typeof T=="object"?T.value:T,uf(S)?null:S})(n.limit));let p=null;n.startAt&&(p=(function(T){const S=!!T.before,N=T.values||[];return new Yh(N,S)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const S=!T.before,N=T.values||[];return new Yh(N,S)})(n.endAt)),yD(e,o,h,u,m,"F",p,g)}function n2(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Pe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Zb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const a=Ro(n.unaryFilter.field);return Gt.create(a,"==",{doubleValue:NaN});case"IS_NULL":const o=Ro(n.unaryFilter.field);return Gt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Ro(n.unaryFilter.field);return Gt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Ro(n.unaryFilter.field);return Gt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Pe(61313);default:return Pe(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Gt.create(Ro(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Pe(58110);default:return Pe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Br.create(n.compositeFilter.filters.map((a=>Zb(a))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Pe(1026)}})(n.compositeFilter.op))})(r):Pe(30097,{filter:r})}function r2(r){return FD[r]}function i2(r){return GD[r]}function a2(r){return KD[r]}function Ao(r){return{fieldPath:r.canonicalString()}}function Ro(r){return pn.fromServerFormat(r.fieldPath)}function ew(r){return r instanceof Gt?(function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NAN"}};if(X0(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NAN"}};if(X0(n.value))return{unaryFilter:{field:Ao(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ao(n.field),op:i2(n.op),value:n.value}}})(r):r instanceof Br?(function(n){const a=n.getFilters().map((o=>ew(o)));return a.length===1?a[0]:{compositeFilter:{op:a2(n.op),filters:a}}})(r):Pe(54877,{filter:r})}function s2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function tw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function nw(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n,a,o,u=Le.min(),h=Le.min(),m=gn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=n,this.purpose=a,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=p}withSequenceNumber(e){return new wa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e){this.yt=e}}function l2(r){const e=t2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(){this.Sn=new c2}addToCollectionParentIndex(e,n){return this.Sn.add(n),ae.resolve()}getCollectionParents(e,n){return ae.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ae.resolve()}deleteFieldIndex(e,n){return ae.resolve()}deleteAllFieldIndexes(e){return ae.resolve()}createTargetIndexes(e,n){return ae.resolve()}getDocumentsMatchingTarget(e,n){return ae.resolve(null)}getIndexType(e,n){return ae.resolve(0)}getFieldIndexes(e,n){return ae.resolve([])}getNextCollectionGroupToUpdate(e){return ae.resolve(null)}getMinOffset(e,n){return ae.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,n){return ae.resolve(Da.min())}updateCollectionGroup(e,n,a){return ae.resolve()}updateIndexEntries(e,n){return ae.resolve()}}class c2{constructor(){this.index={}}add(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n]||new Jt(wt.comparator),u=!o.has(a);return this.index[n]=o.add(a),u}has(e){const n=e.lastSegment(),a=e.popLast(),o=this.index[n];return o&&o.has(a)}getEntries(e){return(this.index[e]||new Jt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rw=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(rw,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Bo(0)}static ar(){return new Bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="LruGarbageCollector",h2=1048576;function dE([r,e],[n,a]){const o=Ze(r,n);return o===0?Ze(e,a):o}class f2{constructor(e){this.Pr=e,this.buffer=new Jt(dE),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const a=this.buffer.last();dE(n,a)<0&&(this.buffer=this.buffer.delete(a).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d2{constructor(e,n,a){this.garbageCollector=e,this.asyncQueue=n,this.localStore=a,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ye(fE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qo(n)?ye(fE,"Ignoring IndexedDB error during garbage collection: ",n):await $o(n)}await this.Ar(3e5)}))}}class m2{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((a=>Math.floor(n/100*a)))}nthSequenceNumber(e,n){if(n===0)return ae.resolve(lf.ce);const a=new f2(n);return this.Vr.forEachTarget(e,(o=>a.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>a.Er(o))))).next((()=>a.maxValue))}removeTargets(e,n,a){return this.Vr.removeTargets(e,n,a)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(hE)):this.getCacheSize(e).next((a=>a<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),hE):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let a,o,u,h,m,p,g;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(a=T,m=Date.now(),this.removeTargets(e,a,n)))).next((T=>(u=T,p=Date.now(),this.removeOrphanedDocuments(e,a)))).next((T=>(g=Date.now(),wo()<=Je.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(p-m)+`ms
	Removed ${T} documents in `+(g-p)+`ms
Total Duration: ${g-v}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function p2(r,e){return new m2(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(){this.changes=new Os((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const a=this.changes.get(n);return a!==void 0?ae.resolve(a):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n,a,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=a,this.indexManager=o}getDocument(e,n){let a=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(a=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(a!==null&&gu(a.mutation,o,Ur.empty(),Rt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.getLocalViewOfDocuments(e,a,et()).next((()=>a))))}getLocalViewOfDocuments(e,n,a=et()){const o=bs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,a).next((u=>{let h=uu();return u.forEach(((m,p)=>{h=h.insert(m,p.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const a=bs();return this.populateOverlays(e,a,n).next((()=>this.computeViews(e,n,a,et())))}populateOverlays(e,n,a){const o=[];return a.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(e,n,a,o){let u=Vi();const h=pu(),m=(function(){return pu()})();return n.forEach(((p,g)=>{const v=a.get(g.key);o.has(g.key)&&(v===void 0||v.mutation instanceof Ms)?u=u.insert(g.key,g):v!==void 0?(h.set(g.key,v.mutation.getFieldMask()),gu(v.mutation,g,v.mutation.getFieldMask(),Rt.now())):h.set(g.key,Ur.empty())})),this.recalculateAndSaveOverlays(e,u).next((p=>(p.forEach(((g,v)=>h.set(g,v))),n.forEach(((g,v)=>m.set(g,new y2(v,h.get(g)??null)))),m)))}recalculateAndSaveOverlays(e,n){const a=pu();let o=new Dt(((h,m)=>h-m)),u=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const m of h)m.keys().forEach((p=>{const g=n.get(p);if(g===null)return;let v=a.get(p)||Ur.empty();v=m.applyToLocalView(g,v),a.set(p,v);const T=(o.get(m.batchId)||et()).add(p);o=o.insert(m.batchId,T)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const p=m.getNext(),g=p.key,v=p.value,T=Ub();v.forEach((S=>{if(!u.has(S)){const N=Fb(n.get(S),a.get(S));N!==null&&T.set(S,N),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ae.waitFor(h)})).next((()=>a))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((a=>this.recalculateAndSaveOverlays(e,a)))}getDocumentsMatchingQuery(e,n,a,o){return vD(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Mb(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,a,o):this.getDocumentsMatchingCollectionQuery(e,n,a,o)}getNextDocuments(e,n,a,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,a,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,a.largestBatchId,o-u.size):ae.resolve(bs());let m=wu,p=u;return h.next((g=>ae.forEach(g,((v,T)=>(m<T.largestBatchId&&(m=T.largestBatchId),u.get(v)?ae.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{p=p.insert(v,S)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,p,g,et()))).next((v=>({batchId:m,changes:Lb(v)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ce(n)).next((a=>{let o=uu();return a.isFoundDocument()&&(o=o.insert(a.key,a)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,a,o){const u=n.collectionGroup;let h=uu();return this.indexManager.getCollectionParents(e,u).next((m=>ae.forEach(m,(p=>{const g=(function(T,S){return new Xo(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,p.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,a,o).next((v=>{v.forEach(((T,S)=>{h=h.insert(T,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,a,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,a.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,a,u,o)))).next((h=>{u.forEach(((p,g)=>{const v=g.getKey();h.get(v)===null&&(h=h.insert(v,An.newInvalidDocument(v)))}));let m=uu();return h.forEach(((p,g)=>{const v=u.get(p);v!==void 0&&gu(v.mutation,g,Ur.empty(),Rt.now()),ff(n,g)&&(m=m.insert(p,g))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ae.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:ri(o.createTime)}})(n)),ae.resolve()}getNamedQuery(e,n){return ae.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:l2(o.bundledQuery),readTime:ri(o.readTime)}})(n)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.overlays=new Dt(Ce.comparator),this.Lr=new Map}getOverlay(e,n){return ae.resolve(this.overlays.get(n))}getOverlays(e,n){const a=bs();return ae.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&a.set(o,u)})))).next((()=>a))}saveOverlays(e,n,a){return a.forEach(((o,u)=>{this.bt(e,n,u)})),ae.resolve()}removeOverlaysForBatchId(e,n,a){const o=this.Lr.get(a);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(a)),ae.resolve()}getOverlaysForCollection(e,n,a){const o=bs(),u=n.length+1,h=new Ce(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const p=m.getNext().value,g=p.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&p.largestBatchId>a&&o.set(p.getKey(),p)}return ae.resolve(o)}getOverlaysForCollectionGroup(e,n,a,o){let u=new Dt(((g,v)=>g-v));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>a){let v=u.get(g.largestBatchId);v===null&&(v=bs(),u=u.insert(g.largestBatchId,v)),v.set(g.getKey(),g)}}const m=bs(),p=u.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,v)=>m.set(g,v))),!(m.size()>=o)););return ae.resolve(m)}bt(e,n,a){const o=this.overlays.get(a.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(a.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(a.key,new UD(n,a));let u=this.Lr.get(n);u===void 0&&(u=et(),this.Lr.set(n,u)),this.Lr.set(n,u.add(a.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return ae.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.kr=new Jt(sn.Kr),this.qr=new Jt(sn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const a=new sn(e,n);this.kr=this.kr.add(a),this.qr=this.qr.add(a)}$r(e,n){e.forEach((a=>this.addReference(a,n)))}removeReference(e,n){this.Wr(new sn(e,n))}Qr(e,n){e.forEach((a=>this.removeReference(a,n)))}Gr(e){const n=new Ce(new wt([])),a=new sn(n,e),o=new sn(n,e+1),u=[];return this.qr.forEachInRange([a,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Ce(new wt([])),a=new sn(n,e),o=new sn(n,e+1);let u=et();return this.qr.forEachInRange([a,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new sn(e,0),a=this.kr.firstAfterOrEqual(n);return a!==null&&e.isEqual(a.key)}}class sn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Ce.comparator(e.key,n.key)||Ze(e.Hr,n.Hr)}static Ur(e,n){return Ze(e.Hr,n.Hr)||Ce.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Jt(sn.Kr)}checkEmpty(e){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,a,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new LD(u,n,a,o);this.mutationQueue.push(h);for(const m of o)this.Jr=this.Jr.add(new sn(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ae.resolve(h)}lookupMutationBatch(e,n){return ae.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const a=n+1,o=this.Xr(a),u=o<0?0:o;return ae.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?Hp:this.Yn-1)}getAllMutationBatches(e){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const a=new sn(n,0),o=new sn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([a,o],(h=>{const m=this.Zr(h.Hr);u.push(m)})),ae.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let a=new Jt(Ze);return n.forEach((o=>{const u=new sn(o,0),h=new sn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(m=>{a=a.add(m.Hr)}))})),ae.resolve(this.Yr(a))}getAllMutationBatchesAffectingQuery(e,n){const a=n.path,o=a.length+1;let u=a;Ce.isDocumentKey(u)||(u=u.child(""));const h=new sn(new Ce(u),0);let m=new Jt(Ze);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!a.isPrefixOf(g)&&(g.length===o&&(m=m.add(p.Hr)),!0)}),h),ae.resolve(this.Yr(m))}Yr(e){const n=[];return e.forEach((a=>{const o=this.Zr(a);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){lt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let a=this.Jr;return ae.forEach(n.mutations,(o=>{const u=new sn(o.key,n.batchId);return a=a.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=a}))}nr(e){}containsKey(e,n){const a=new sn(n,0),o=this.Jr.firstAfterOrEqual(a);return ae.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ae.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(e){this.ti=e,this.docs=(function(){return new Dt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const a=n.key,o=this.docs.get(a),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(a,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const a=this.docs.get(n);return ae.resolve(a?a.document.mutableCopy():An.newInvalidDocument(n))}getEntries(e,n){let a=Vi();return n.forEach((o=>{const u=this.docs.get(o);a=a.insert(o,u?u.document.mutableCopy():An.newInvalidDocument(o))})),ae.resolve(a)}getDocumentsMatchingQuery(e,n,a,o){let u=Vi();const h=n.path,m=new Ce(h.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(m);for(;p.hasNext();){const{key:g,value:{document:v}}=p.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||$N(YN(v),a)<=0||(o.has(v.key)||ff(n,v))&&(u=u.insert(v.key,v.mutableCopy()))}return ae.resolve(u)}getAllFromCollectionGroup(e,n,a,o){Pe(9500)}ni(e,n){return ae.forEach(this.docs,(a=>n(a)))}newChangeBuffer(e){return new S2(this)}getSize(e){return ae.resolve(this.size)}}class S2 extends g2{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((a,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(a)})),ae.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e){this.persistence=e,this.ri=new Os((n=>Gp(n)),Kp),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new Jp,this.targetCount=0,this.oi=Bo._r()}forEachTarget(e,n){return this.ri.forEach(((a,o)=>n(o))),ae.resolve()}getLastRemoteSnapshotVersion(e){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ae.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(e,n,a){return a&&(this.lastRemoteSnapshotVersion=a),n>this.ii&&(this.ii=n),ae.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Bo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ae.resolve()}updateTargetData(e,n){return this.lr(n),ae.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ae.resolve()}removeTargets(e,n,a){let o=0;const u=[];return this.ri.forEach(((h,m)=>{m.sequenceNumber<=n&&a.get(m.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)})),ae.waitFor(u).next((()=>o))}getTargetCount(e){return ae.resolve(this.targetCount)}getTargetData(e,n){const a=this.ri.get(n)||null;return ae.resolve(a)}addMatchingKeys(e,n,a){return this.si.$r(n,a),ae.resolve()}removeMatchingKeys(e,n,a){this.si.Qr(n,a);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ae.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ae.resolve()}getMatchingKeysForTargetId(e,n){const a=this.si.jr(n);return ae.resolve(a)}containsKey(e,n){return ae.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n){this._i={},this.overlays={},this.ai=new lf(0),this.ui=!1,this.ui=!0,this.ci=new T2,this.referenceDelegate=e(this),this.li=new A2(this),this.indexManager=new u2,this.remoteDocumentCache=(function(o){return new w2(o)})((a=>this.referenceDelegate.hi(a))),this.serializer=new o2(n),this.Pi=new _2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new E2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let a=this._i[e.toKey()];return a||(a=new b2(n,this.referenceDelegate),this._i[e.toKey()]=a),a}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,a){ye("MemoryPersistence","Starting transaction:",e);const o=new R2(this.ai.next());return this.referenceDelegate.Ti(),a(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ae.or(Object.values(this._i).map((a=>()=>a.containsKey(e,n))))}}class R2 extends XN{constructor(e){super(),this.currentSequenceNumber=e}}class Zp{constructor(e){this.persistence=e,this.Ri=new Jp,this.Ai=null}static Vi(e){return new Zp(e)}get di(){if(this.Ai)return this.Ai;throw Pe(60996)}addReference(e,n,a){return this.Ri.addReference(a,n),this.di.delete(a.toString()),ae.resolve()}removeReference(e,n,a){return this.Ri.removeReference(a,n),this.di.add(a.toString()),ae.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ae.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>a.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.di,(a=>{const o=Ce.fromPath(a);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Le.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((a=>{a?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ae.or([()=>ae.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Xh{constructor(e,n){this.persistence=e,this.fi=new Os((a=>ZN(a.path)),((a,o)=>a.isEqual(o))),this.garbageCollector=p2(this,n)}static Vi(e,n){return new Xh(e,n)}Ti(){}Ii(e){return ae.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((a=>n.next((o=>a+o))))}pr(e){let n=0;return this.mr(e,(a=>{n++})).next((()=>n))}mr(e,n){return ae.forEach(this.fi,((a,o)=>this.wr(e,a,o).next((u=>u?ae.resolve():n(o)))))}removeTargets(e,n,a){return this.persistence.getTargetCache().removeTargets(e,n,a)}removeOrphanedDocuments(e,n){let a=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((m=>{m||(a++,u.removeEntry(h,Le.min()))})))).next((()=>u.apply(e))).next((()=>a))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ae.resolve()}removeTarget(e,n){const a=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,a)}addReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ae.resolve()}removeReference(e,n,a){return this.fi.set(a,e.currentSequenceNumber),ae.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ae.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}wr(e,n,a){return ae.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ae.resolve(o!==void 0&&o>a)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e,n,a,o){this.targetId=e,this.fromCache=n,this.Ts=a,this.Is=o}static Es(e,n){let a=et(),o=et();for(const u of n.docChanges)switch(u.type){case 0:a=a.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new eg(e,n.fromCache,a,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return J1()?8:WN(Rn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,a,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,a).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new x2;return this.ys(e,n,h).next((m=>{if(u.result=m,this.As)return this.ws(e,n,h,m.size)}))})).next((()=>u.result))}ws(e,n,a,o){return a.documentReadCount<this.Vs?(wo()<=Je.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ae.resolve()):(wo()<=Je.DEBUG&&ye("QueryEngine","Query:",So(n),"scans",a.documentReadCount,"local documents and returns",o,"documents as results."),a.documentReadCount>this.ds*o?(wo()<=Je.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(n))):ae.resolve())}gs(e,n){if(tE(n))return ae.resolve(null);let a=ti(n);return this.indexManager.getIndexType(e,a).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=rp(n,null,"F"),a=ti(n)),this.indexManager.getDocumentsMatchingTarget(e,a).next((u=>{const h=et(...u);return this.fs.getDocuments(e,h).next((m=>this.indexManager.getMinOffset(e,a).next((p=>{const g=this.bs(n,m);return this.Ss(n,g,h,p.readTime)?this.gs(e,rp(n,null,"F")):this.Ds(e,g,n,p)}))))})))))}ps(e,n,a,o){return tE(n)||o.isEqual(Le.min())?ae.resolve(null):this.fs.getDocuments(e,a).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,a,o)?ae.resolve(null):(wo()<=Je.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(n)),this.Ds(e,h,n,KN(o,wu)).next((m=>m)))}))}bs(e,n){let a=new Jt(kb(e));return n.forEach(((o,u)=>{ff(e,u)&&(a=a.add(u))})),a}Ss(e,n,a,o){if(e.limit===null)return!1;if(a.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,a){return wo()<=Je.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",So(n)),this.fs.getDocumentsMatchingQuery(e,n,Da.min(),a)}Ds(e,n,a,o){return this.fs.getDocumentsMatchingQuery(e,a,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="LocalStore",C2=3e8;class N2{constructor(e,n,a,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new Dt(Ze),this.Fs=new Os((u=>Gp(u)),Kp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(a)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new v2(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function D2(r,e,n,a){return new N2(r,e,n,a)}async function aw(r,e){const n=Be(r);return await n.persistence.runTransaction("Handle user change","readonly",(a=>{let o;return n.mutationQueue.getAllMutationBatches(a).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(a)))).next((u=>{const h=[],m=[];let p=et();for(const g of o){h.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}for(const g of u){m.push(g.batchId);for(const v of g.mutations)p=p.add(v.key)}return n.localDocuments.getDocuments(a,p).next((g=>({Ns:g,removedBatchIds:h,addedBatchIds:m})))}))}))}function O2(r,e){const n=Be(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(a=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(m,p,g,v){const T=g.batch,S=T.keys();let N=ae.resolve();return S.forEach((B=>{N=N.next((()=>v.getEntry(p,B))).next((J=>{const Q=g.docVersions.get(B);lt(Q!==null,48541),J.version.compareTo(Q)<0&&(T.applyToRemoteDocument(J,g),J.isValidDocument()&&(J.setReadTime(g.commitVersion),v.addEntry(J)))}))})),N.next((()=>m.mutationQueue.removeMutationBatch(p,T)))})(n,a,e,u).next((()=>u.apply(a))).next((()=>n.mutationQueue.performConsistencyCheck(a))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(a,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,(function(m){let p=et();for(let g=0;g<m.mutationResults.length;++g)m.mutationResults[g].transformResults.length>0&&(p=p.add(m.batch.mutations[g].key));return p})(e)))).next((()=>n.localDocuments.getDocuments(a,o)))}))}function sw(r){const e=Be(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function M2(r,e){const n=Be(r),a=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const m=[];e.targetChanges.forEach(((v,T)=>{const S=o.get(T);if(!S)return;m.push(n.li.removeMatchingKeys(u,v.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,v.addedDocuments,T))));let N=S.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(gn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,a)),o=o.insert(T,N),(function(J,Q,ne){return J.resumeToken.approximateByteSize()===0||Q.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=C2?!0:ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0})(S,N,v)&&m.push(n.li.updateTargetData(u,N))}));let p=Vi(),g=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,v))})),m.push(P2(u,h,e.documentUpdates).next((v=>{p=v.Bs,g=v.Ls}))),!a.isEqual(Le.min())){const v=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,a)));m.push(v)}return ae.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,p,g))).next((()=>p))})).then((u=>(n.vs=o,u)))}function P2(r,e,n){let a=et(),o=et();return n.forEach((u=>a=a.add(u))),e.getEntries(r,a).next((u=>{let h=Vi();return n.forEach(((m,p)=>{const g=u.get(m);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(m)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(m,p.readTime),h=h.insert(m,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),h=h.insert(m,p)):ye(tg,"Ignoring outdated watch update for ",m,". Current version:",g.version," Watch version:",p.version)})),{Bs:h,Ls:o}}))}function k2(r,e){const n=Be(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(a=>(e===void 0&&(e=Hp),n.mutationQueue.getNextMutationBatchAfterBatchId(a,e))))}function V2(r,e){const n=Be(r);return n.persistence.runTransaction("Allocate target","readwrite",(a=>{let o;return n.li.getTargetData(a,e).next((u=>u?(o=u,ae.resolve(o)):n.li.allocateTargetId(a).next((h=>(o=new wa(e,h,"TargetPurposeListen",a.currentSequenceNumber),n.li.addTargetData(a,o).next((()=>o)))))))})).then((a=>{const o=n.vs.get(a.targetId);return(o===null||a.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(a.targetId,a),n.Fs.set(e,a.targetId)),a}))}async function lp(r,e,n){const a=Be(r),o=a.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await a.persistence.runTransaction("Release target",u,(h=>a.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Qo(h))throw h;ye(tg,`Failed to update sequence numbers for target ${e}: ${h}`)}a.vs=a.vs.remove(e),a.Fs.delete(o.target)}function mE(r,e,n){const a=Be(r);let o=Le.min(),u=et();return a.persistence.runTransaction("Execute query","readwrite",(h=>(function(p,g,v){const T=Be(p),S=T.Fs.get(v);return S!==void 0?ae.resolve(T.vs.get(S)):T.li.getTargetData(g,v)})(a,h,ti(e)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,a.li.getMatchingKeysForTargetId(h,m.targetId).next((p=>{u=p}))})).next((()=>a.Cs.getDocumentsMatchingQuery(h,e,n?o:Le.min(),n?u:et()))).next((m=>(L2(a,TD(e),m),{documents:m,ks:u})))))}function L2(r,e,n){let a=r.Ms.get(e)||Le.min();n.forEach(((o,u)=>{u.readTime.compareTo(a)>0&&(a=u.readTime)})),r.Ms.set(e,a)}class pE{constructor(){this.activeTargetIds=xD()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class U2{constructor(){this.vo=new pE,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,a){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,a){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new pE,Promise.resolve()}handleUserChange(e,n,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="ConnectivityMonitor";class yE{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ye(gE,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ye(gE,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mh=null;function up(){return mh===null?mh=(function(){return 268435456+Math.round(2147483648*Math.random())})():mh++,"0x"+mh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="RestConnection",z2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class B2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${a}/databases/${o}`,this.$o=this.databaseId.database===Gh?`project_id=${a}`:`project_id=${a}&database_id=${o}`}Wo(e,n,a,o,u){const h=up(),m=this.Qo(e,n.toUriEncodedString());ye(Mm,`Sending RPC '${e}' ${h}:`,m,a);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,u);const{host:g}=new URL(m),v=Fo(g);return this.zo(e,m,p,a,v).then((T=>(ye(Mm,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw Lo(Mm,`RPC '${e}' ${h} failed with error: `,T,"url: ",m,"request:",a),T}))}jo(e,n,a,o,u,h){return this.Wo(e,n,a,o,u)}Go(e,n,a){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Yo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),a&&a.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const a=z2[e];let o=`${this.qo}/v1/${n}:${a}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn="WebChannelConnection",iu=(r,e,n)=>{r.listen(e,(a=>{try{n(a)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Do extends B2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Do.c_){const e=cb();iu(e,ub.STAT_EVENT,(n=>{n.stat===Xm.PROXY?ye(wn,"STAT_EVENT: detected buffering proxy"):n.stat===Xm.NOPROXY&&ye(wn,"STAT_EVENT: detected no buffering proxy")})),Do.c_=!0}}zo(e,n,a,o,u){const h=up();return new Promise(((m,p)=>{const g=new ob;g.setWithCredentials(!0),g.listenOnce(lb.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Sh.NO_ERROR:const T=g.getResponseJson();ye(wn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),m(T);break;case Sh.TIMEOUT:ye(wn,`RPC '${e}' ${h} timed out`),p(new pe(re.DEADLINE_EXCEEDED,"Request time out"));break;case Sh.HTTP_ERROR:const S=g.getStatus();if(ye(wn,`RPC '${e}' ${h} failed with status:`,S,"response text:",g.getResponseText()),S>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const B=N?.error;if(B&&B.status&&B.message){const J=(function(ne){const oe=ne.toLowerCase().replace(/_/g,"-");return Object.values(re).indexOf(oe)>=0?oe:re.UNKNOWN})(B.status);p(new pe(J,B.message))}else p(new pe(re.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new pe(re.UNAVAILABLE,"Connection failed."));break;default:Pe(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{ye(wn,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ye(wn,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",v,a,15)}))}T_(e,n,a){const o=up(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.Go(m.initMessageHeaders,n,a),m.encodeInitMessageHeaders=!0;const g=u.join("");ye(wn,`Creating RPC '${e}' stream ${o}: ${g}`,m);const v=h.createWebChannel(g,m);this.I_(v);let T=!1,S=!1;const N=new H2({Ho:B=>{S?ye(wn,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(T||(ye(wn,`Opening RPC '${e}' stream ${o} transport.`),v.open(),T=!0),ye(wn,`RPC '${e}' stream ${o} sending:`,B),v.send(B))},Jo:()=>v.close()});return iu(v,lu.EventType.OPEN,(()=>{S||(ye(wn,`RPC '${e}' stream ${o} transport opened.`),N.i_())})),iu(v,lu.EventType.CLOSE,(()=>{S||(S=!0,ye(wn,`RPC '${e}' stream ${o} transport closed`),N.o_(),this.E_(v))})),iu(v,lu.EventType.ERROR,(B=>{S||(S=!0,Lo(wn,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),N.o_(new pe(re.UNAVAILABLE,"The operation could not be completed")))})),iu(v,lu.EventType.MESSAGE,(B=>{if(!S){const J=B.data[0];lt(!!J,16349);const Q=J,ne=Q?.error||Q[0]?.error;if(ne){ye(wn,`RPC '${e}' stream ${o} received error:`,ne);const oe=ne.status;let ue=(function(V){const x=Ft[V];if(x!==void 0)return Kb(x)})(oe),Re=ne.message;ue===void 0&&(ue=re.INTERNAL,Re="Unknown error status: "+oe+" with message "+ne.message),S=!0,N.o_(new pe(ue,Re)),v.close()}else ye(wn,`RPC '${e}' stream ${o} received:`,J),N.__(J)}})),Do.u_(),setTimeout((()=>{N.s_()}),0),N}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,a){super.Go(e,n,a),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return hb()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(r){return new Do(r)}function Pm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(r){return new YD(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Do.c_=!1;class ow{constructor(e,n,a=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="PersistentStream";class lw{constructor(e,n,a,o,u,h,m,p){this.Ci=e,this.b_=a,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ow(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===re.RESOURCE_EXHAUSTED?(ki(n.toString()),ki("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===re.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([a,o])=>{this.D_===n&&this.G_(a,o)}),(a=>{e((()=>{const o=new pe(re.UNKNOWN,"Fetching auth token failed: "+a.message);return this.z_(o)}))}))}G_(e,n){const a=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{a((()=>this.listener.Zo()))})),this.stream.Yo((()=>{a((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{a((()=>this.z_(o)))})),this.stream.onMessage((o=>{a((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(vE,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(ye(vE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class F2 extends lw{constructor(e,n,a,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=XD(this.serializer,e),a=(function(u){if(!("targetChange"in u))return Le.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Le.min():h.readTime?ri(h.readTime):Le.min()})(e);return this.listener.J_(n,a)}Z_(e){const n={};n.database=op(this.serializer),n.addTarget=(function(u,h){let m;const p=h.target;if(m=tp(p)?{documents:ZD(u,p)}:{query:e2(u,p).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=Qb(u,h.resumeToken);const g=ip(u,h.expectedCount);g!==null&&(m.expectedCount=g)}else if(h.snapshotVersion.compareTo(Le.min())>0){m.readTime=Qh(u,h.snapshotVersion.toTimestamp());const g=ip(u,h.expectedCount);g!==null&&(m.expectedCount=g)}return m})(this.serializer,e);const a=n2(this.serializer,e);a&&(n.labels=a),this.K_(n)}X_(e){const n={};n.database=op(this.serializer),n.removeTarget=e,this.K_(n)}}class G2 extends lw{constructor(e,n,a,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,a,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return lt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,lt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){lt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=JD(e.writeResults,e.commitTime),a=ri(e.commitTime);return this.listener.na(a,n)}ra(){const e={};e.database=op(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((a=>WD(this.serializer,a)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{}class Y2 extends K2{constructor(e,n,a,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=a,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,a,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,ap(n,a),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(re.UNKNOWN,u.toString())}))}jo(e,n,a,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.jo(e,ap(n,a),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===re.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new pe(re.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function $2(r,e,n,a){return new Y2(r,e,n,a)}class Q2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ki(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="RemoteStore";class X2{constructor(e,n,a,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=a,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{a.enqueueAndForget((async()=>{Ps(this)&&(ye(Is,"Restarting streams for network reachability change."),await(async function(p){const g=Be(p);g.Ea.add(4),await qu(g),g.Va.set("Unknown"),g.Ea.delete(4),await yf(g)})(this))}))})),this.Va=new Q2(a,o)}}async function yf(r){if(Ps(r))for(const e of r.Ra)await e(!0)}async function qu(r){for(const e of r.Ra)await e(!1)}function uw(r,e){const n=Be(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ag(n)?ig(n):Wo(n).O_()&&rg(n,e))}function ng(r,e){const n=Be(r),a=Wo(n);n.Ia.delete(e),a.O_()&&cw(n,e),n.Ia.size===0&&(a.O_()?a.L_():Ps(n)&&n.Va.set("Unknown"))}function rg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Wo(r).Z_(e)}function cw(r,e){r.da.$e(e),Wo(r).X_(e)}function ig(r){r.da=new qD({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Wo(r).start(),r.Va.ua()}function ag(r){return Ps(r)&&!Wo(r).x_()&&r.Ia.size>0}function Ps(r){return Be(r).Ea.size===0}function hw(r){r.da=void 0}async function W2(r){r.Va.set("Online")}async function J2(r){r.Ia.forEach(((e,n)=>{rg(r,e)}))}async function Z2(r,e){hw(r),ag(r)?(r.Va.ha(e),ig(r)):r.Va.set("Unknown")}async function eO(r,e,n){if(r.Va.set("Online"),e instanceof $b&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.da.removeTarget(m))})(r,e)}catch(a){ye(Is,"Failed to remove targets %s: %s ",e.targetIds.join(","),a),await Wh(r,a)}else if(e instanceof Ih?r.da.Xe(e):e instanceof Yb?r.da.st(e):r.da.tt(e),!n.isEqual(Le.min()))try{const a=await sw(r.localStore);n.compareTo(a)>=0&&await(function(u,h){const m=u.da.Tt(h);return m.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const v=u.Ia.get(g);v&&u.Ia.set(g,v.withResumeToken(p.resumeToken,h))}})),m.targetMismatches.forEach(((p,g)=>{const v=u.Ia.get(p);if(!v)return;u.Ia.set(p,v.withResumeToken(gn.EMPTY_BYTE_STRING,v.snapshotVersion)),cw(u,p);const T=new wa(v.target,p,g,v.sequenceNumber);rg(u,T)})),u.remoteSyncer.applyRemoteEvent(m)})(r,n)}catch(a){ye(Is,"Failed to raise snapshot:",a),await Wh(r,a)}}async function Wh(r,e,n){if(!Qo(e))throw e;r.Ea.add(1),await qu(r),r.Va.set("Offline"),n||(n=()=>sw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(Is,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await yf(r)}))}function fw(r,e){return e().catch((n=>Wh(r,n,e)))}async function vf(r){const e=Be(r),n=ka(e);let a=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Hp;for(;tO(e);)try{const o=await k2(e.localStore,a);if(o===null){e.Ta.length===0&&n.L_();break}a=o.batchId,nO(e,o)}catch(o){await Wh(e,o)}dw(e)&&mw(e)}function tO(r){return Ps(r)&&r.Ta.length<10}function nO(r,e){r.Ta.push(e);const n=ka(r);n.O_()&&n.Y_&&n.ea(e.mutations)}function dw(r){return Ps(r)&&!ka(r).x_()&&r.Ta.length>0}function mw(r){ka(r).start()}async function rO(r){ka(r).ra()}async function iO(r){const e=ka(r);for(const n of r.Ta)e.ea(n.mutations)}async function aO(r,e,n){const a=r.Ta.shift(),o=Qp.from(a,e,n);await fw(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await vf(r)}async function sO(r,e){e&&ka(r).Y_&&await(async function(a,o){if((function(h){return zD(h)&&h!==re.ABORTED})(o.code)){const u=a.Ta.shift();ka(a).B_(),await fw(a,(()=>a.remoteSyncer.rejectFailedWrite(u.batchId,o))),await vf(a)}})(r,e),dw(r)&&mw(r)}async function _E(r,e){const n=Be(r);n.asyncQueue.verifyOperationInProgress(),ye(Is,"RemoteStore received new credentials");const a=Ps(n);n.Ea.add(3),await qu(n),a&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await yf(n)}async function oO(r,e){const n=Be(r);e?(n.Ea.delete(2),await yf(n)):e||(n.Ea.add(2),await qu(n),n.Va.set("Unknown"))}function Wo(r){return r.ma||(r.ma=(function(n,a,o){const u=Be(n);return u.sa(),new F2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:W2.bind(null,r),Yo:J2.bind(null,r),t_:Z2.bind(null,r),J_:eO.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),ag(r)?ig(r):r.Va.set("Unknown")):(await r.ma.stop(),hw(r))}))),r.ma}function ka(r){return r.fa||(r.fa=(function(n,a,o){const u=Be(n);return u.sa(),new G2(a,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:rO.bind(null,r),t_:sO.bind(null,r),ta:iO.bind(null,r),na:aO.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await vf(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(Is,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e,n,a,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=u,this.deferred=new Ia,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,u){const h=Date.now()+a,m=new sg(e,n,h,o,u);return m.start(a),m}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(re.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function og(r,e){if(ki("AsyncQueue",`${e}: ${r}`),Qo(r))return new pe(re.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{static emptySet(e){return new Oo(e.comparator)}constructor(e){this.comparator=e?(n,a)=>e(n,a)||Ce.comparator(n.key,a.key):(n,a)=>Ce.comparator(n.key,a.key),this.keyedMap=uu(),this.sortedSet=new Dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,a)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=a.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const a=new Oo;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=n,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(){this.ga=new Dt(Ce.comparator)}track(e){const n=e.doc.key,a=this.ga.get(n);a?e.type!==0&&a.type===3?this.ga=this.ga.insert(n,e):e.type===3&&a.type!==1?this.ga=this.ga.insert(n,{type:a.type,doc:e.doc}):e.type===2&&a.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&a.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&a.type===0?this.ga=this.ga.remove(n):e.type===1&&a.type===2?this.ga=this.ga.insert(n,{type:1,doc:a.doc}):e.type===0&&a.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Pe(63341,{Vt:e,pa:a}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,a)=>{e.push(a)})),e}}class Ho{constructor(e,n,a,o,u,h,m,p,g){this.query=e,this.docs=n,this.oldDocs=a,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,n,a,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new Ho(e,n,Oo.emptySet(n),h,a,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,a=e.docChanges;if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==a[o].type||!n[o].doc.isEqual(a[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class uO{constructor(){this.queries=TE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,a){const o=Be(n),u=o.queries;o.queries=TE(),u.forEach(((h,m)=>{for(const p of m.ba)p.onError(a)}))})(this,new pe(re.ABORTED,"Firestore shutting down"))}}function TE(){return new Os((r=>Pb(r)),hf)}async function cO(r,e){const n=Be(r);let a=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(a=2):(u=new lO,a=e.Da()?0:1);try{switch(a){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=og(h,`Initialization of query '${So(e.query)}' failed`);return void e.onError(m)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&lg(n)}async function hO(r,e){const n=Be(r),a=e.query;let o=3;const u=n.queries.get(a);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(a),n.onUnlisten(a,!0);case 1:return n.queries.delete(a),n.onUnlisten(a,!1);case 2:return n.onLastRemoteStoreUnlisten(a);default:return}}function fO(r,e){const n=Be(r);let a=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.ba)m.Fa(o)&&(a=!0);h.wa=o}}a&&lg(n)}function dO(r,e,n){const a=Be(r),o=a.queries.get(e);if(o)for(const u of o.ba)u.onError(n);a.queries.delete(e)}function lg(r){r.Ca.forEach((e=>{e.next()}))}var cp,bE;(bE=cp||(cp={})).Ma="default",bE.Cache="cache";class mO{constructor(e,n,a){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=a||{}}Fa(e){if(!this.options.includeMetadataChanges){const a=[];for(const o of e.docChanges)o.type!==3&&a.push(o);e=new Ho(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const a=n!=="Offline";return(!this.options.Ka||!a)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw{constructor(e){this.key=e}}class gw{constructor(e){this.key=e}}class pO{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=et(),this.mutatedKeys=et(),this.eu=kb(e),this.tu=new Oo(this.eu)}get nu(){return this.Za}ru(e,n){const a=n?n.iu:new EE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const S=o.get(v),N=ff(this.query,T)?T:null,B=!!S&&this.mutatedKeys.has(S.key),J=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let Q=!1;S&&N?S.data.isEqual(N.data)?B!==J&&(a.track({type:3,doc:N}),Q=!0):this.su(S,N)||(a.track({type:2,doc:N}),Q=!0,(p&&this.eu(N,p)>0||g&&this.eu(N,g)<0)&&(m=!0)):!S&&N?(a.track({type:0,doc:N}),Q=!0):S&&!N&&(a.track({type:1,doc:S}),Q=!0,(p||g)&&(m=!0)),Q&&(N?(h=h.add(N),u=J?u.add(v):u.delete(v)):(h=h.delete(v),u=u.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),u=u.delete(v.key),a.track({type:1,doc:v})}return{tu:h,iu:a,Ss:m,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,a,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,T)=>(function(N,B){const J=Q=>{switch(Q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Pe(20277,{Vt:Q})}};return J(N)-J(B)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(a),o=o??!1;const m=n&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Xa;return this.Xa=p,h.length!==0||g?{snapshot:new Ho(this.query,e.tu,u,h,e.mutatedKeys,p===0,g,!1,!!a&&a.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new EE,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=et(),this.tu.forEach((a=>{this.uu(a.key)&&(this.Ya=this.Ya.add(a.key))}));const n=[];return e.forEach((a=>{this.Ya.has(a)||n.push(new gw(a))})),this.Ya.forEach((a=>{e.has(a)||n.push(new pw(a))})),n}cu(e){this.Za=e.ks,this.Ya=et();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ug="SyncEngine";class gO{constructor(e,n,a){this.query=e,this.targetId=n,this.view=a}}class yO{constructor(e){this.key=e,this.hu=!1}}class vO{constructor(e,n,a,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=a,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new Os((m=>Pb(m)),hf),this.Iu=new Map,this.Eu=new Set,this.Ru=new Dt(Ce.comparator),this.Au=new Map,this.Vu=new Jp,this.du={},this.mu=new Map,this.fu=Bo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _O(r,e,n=!0){const a=bw(r);let o;const u=a.Tu.get(e);return u?(a.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await yw(a,e,n,!0),o}async function EO(r,e){const n=bw(r);await yw(n,e,!0,!1)}async function yw(r,e,n,a){const o=await V2(r.localStore,ti(e)),u=o.targetId,h=r.sharedClientState.addLocalQueryTarget(u,n);let m;return a&&(m=await TO(r,e,u,h==="current",o.resumeToken)),r.isPrimaryClient&&n&&uw(r.remoteStore,o),m}async function TO(r,e,n,a,o){r.pu=(T,S,N)=>(async function(J,Q,ne,oe){let ue=Q.view.ru(ne);ue.Ss&&(ue=await mE(J.localStore,Q.query,!1).then((({documents:x})=>Q.view.ru(x,ue))));const Re=oe&&oe.targetChanges.get(Q.targetId),le=oe&&oe.targetMismatches.get(Q.targetId)!=null,V=Q.view.applyChanges(ue,J.isPrimaryClient,Re,le);return SE(J,Q.targetId,V.au),V.snapshot})(r,T,S,N);const u=await mE(r.localStore,e,!0),h=new pO(e,u.ks),m=h.ru(u.documents),p=Hu.createSynthesizedTargetChangeForCurrentChange(n,a&&r.onlineState!=="Offline",o),g=h.applyChanges(m,r.isPrimaryClient,p);SE(r,n,g.au);const v=new gO(e,n,h);return r.Tu.set(e,v),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),g.snapshot}async function bO(r,e,n){const a=Be(r),o=a.Tu.get(e),u=a.Iu.get(o.targetId);if(u.length>1)return a.Iu.set(o.targetId,u.filter((h=>!hf(h,e)))),void a.Tu.delete(e);a.isPrimaryClient?(a.sharedClientState.removeLocalQueryTarget(o.targetId),a.sharedClientState.isActiveQueryTarget(o.targetId)||await lp(a.localStore,o.targetId,!1).then((()=>{a.sharedClientState.clearQueryState(o.targetId),n&&ng(a.remoteStore,o.targetId),hp(a,o.targetId)})).catch($o)):(hp(a,o.targetId),await lp(a.localStore,o.targetId,!0))}async function wO(r,e){const n=Be(r),a=n.Tu.get(e),o=n.Iu.get(a.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(a.targetId),ng(n.remoteStore,a.targetId))}async function SO(r,e,n){const a=DO(r);try{const o=await(function(h,m){const p=Be(h),g=Rt.now(),v=m.reduce(((N,B)=>N.add(B.key)),et());let T,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let B=Vi(),J=et();return p.xs.getEntries(N,v).next((Q=>{B=Q,B.forEach(((ne,oe)=>{oe.isValidDocument()||(J=J.add(ne))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,B))).next((Q=>{T=Q;const ne=[];for(const oe of m){const ue=kD(oe,T.get(oe.key).overlayedDocument);ue!=null&&ne.push(new Ms(oe.key,ue,Ab(ue.value.mapValue),ni.exists(!0)))}return p.mutationQueue.addMutationBatch(N,g,ne,m)})).next((Q=>{S=Q;const ne=Q.applyToLocalDocumentSet(T,J);return p.documentOverlayCache.saveOverlays(N,Q.batchId,ne)}))})).then((()=>({batchId:S.batchId,changes:Lb(T)})))})(a.localStore,e);a.sharedClientState.addPendingMutation(o.batchId),(function(h,m,p){let g=h.du[h.currentUser.toKey()];g||(g=new Dt(Ze)),g=g.insert(m,p),h.du[h.currentUser.toKey()]=g})(a,o.batchId,n),await Fu(a,o.changes),await vf(a.remoteStore)}catch(o){const u=og(o,"Failed to persist write");n.reject(u)}}async function vw(r,e){const n=Be(r);try{const a=await M2(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(lt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?lt(h.hu,14607):o.removedDocuments.size>0&&(lt(h.hu,42227),h.hu=!1))})),await Fu(n,a,e)}catch(a){await $o(a)}}function wE(r,e,n){const a=Be(r);if(a.isPrimaryClient&&n===0||!a.isPrimaryClient&&n===1){const o=[];a.Tu.forEach(((u,h)=>{const m=h.view.va(e);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const p=Be(h);p.onlineState=m;let g=!1;p.queries.forEach(((v,T)=>{for(const S of T.ba)S.va(m)&&(g=!0)})),g&&lg(p)})(a.eventManager,e),o.length&&a.Pu.J_(o),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}async function AO(r,e,n){const a=Be(r);a.sharedClientState.updateQueryState(e,"rejected",n);const o=a.Au.get(e),u=o&&o.key;if(u){let h=new Dt(Ce.comparator);h=h.insert(u,An.newNoDocument(u,Le.min()));const m=et().add(u),p=new pf(Le.min(),new Map,new Dt(Ze),h,m);await vw(a,p),a.Ru=a.Ru.remove(u),a.Au.delete(e),cg(a)}else await lp(a.localStore,e,!1).then((()=>hp(a,e,n))).catch($o)}async function RO(r,e){const n=Be(r),a=e.batch.batchId;try{const o=await O2(n.localStore,e);Ew(n,a,null),_w(n,a),n.sharedClientState.updateMutationState(a,"acknowledged"),await Fu(n,o)}catch(o){await $o(o)}}async function xO(r,e,n){const a=Be(r);try{const o=await(function(h,m){const p=Be(h);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let v;return p.mutationQueue.lookupMutationBatch(g,m).next((T=>(lt(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(g,T)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,v,m))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,v))).next((()=>p.localDocuments.getDocuments(g,v)))}))})(a.localStore,e);Ew(a,e,n),_w(a,e),a.sharedClientState.updateMutationState(e,"rejected",n),await Fu(a,o)}catch(o){await $o(o)}}function _w(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Ew(r,e,n){const a=Be(r);let o=a.du[a.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),a.du[a.currentUser.toKey()]=o}}function hp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r.Iu.get(e))r.Tu.delete(a),n&&r.Pu.yu(a,n);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((a=>{r.Vu.containsKey(a)||Tw(r,a)}))}function Tw(r,e){r.Eu.delete(e.path.canonicalString());const n=r.Ru.get(e);n!==null&&(ng(r.remoteStore,n),r.Ru=r.Ru.remove(e),r.Au.delete(n),cg(r))}function SE(r,e,n){for(const a of n)a instanceof pw?(r.Vu.addReference(a.key,e),IO(r,a)):a instanceof gw?(ye(ug,"Document no longer in limbo: "+a.key),r.Vu.removeReference(a.key,e),r.Vu.containsKey(a.key)||Tw(r,a.key)):Pe(19791,{wu:a})}function IO(r,e){const n=e.key,a=n.path.canonicalString();r.Ru.get(n)||r.Eu.has(a)||(ye(ug,"New document in limbo: "+n),r.Eu.add(a),cg(r))}function cg(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ce(wt.fromString(e)),a=r.fu.next();r.Au.set(a,new yO(n)),r.Ru=r.Ru.insert(n,a),uw(r.remoteStore,new wa(ti(Ob(n.path)),a,"TargetPurposeLimboResolution",lf.ce))}}async function Fu(r,e,n){const a=Be(r),o=[],u=[],h=[];a.Tu.isEmpty()||(a.Tu.forEach(((m,p)=>{h.push(a.pu(p,e,n).then((g=>{if((g||n)&&a.isPrimaryClient){const v=g?!g.fromCache:n?.targetChanges.get(p.targetId)?.current;a.sharedClientState.updateQueryState(p.targetId,v?"current":"not-current")}if(g){o.push(g);const v=eg.Es(p.targetId,g);u.push(v)}})))})),await Promise.all(h),a.Pu.J_(o),await(async function(p,g){const v=Be(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ae.forEach(g,(S=>ae.forEach(S.Ts,(N=>v.persistence.referenceDelegate.addReference(T,S.targetId,N))).next((()=>ae.forEach(S.Is,(N=>v.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))))))}catch(T){if(!Qo(T))throw T;ye(tg,"Failed to update sequence numbers: "+T)}for(const T of g){const S=T.targetId;if(!T.fromCache){const N=v.vs.get(S),B=N.snapshotVersion,J=N.withLastLimboFreeSnapshotVersion(B);v.vs=v.vs.insert(S,J)}}})(a.localStore,u))}async function CO(r,e){const n=Be(r);if(!n.currentUser.isEqual(e)){ye(ug,"User change. New user:",e.toKey());const a=await aw(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((m=>{m.forEach((p=>{p.reject(new pe(re.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),await Fu(n,a.Ns)}}function NO(r,e){const n=Be(r),a=n.Au.get(e);if(a&&a.hu)return et().add(a.key);{let o=et();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function bw(r){const e=Be(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=vw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=AO.bind(null,e),e.Pu.J_=fO.bind(null,e.eventManager),e.Pu.yu=dO.bind(null,e.eventManager),e}function DO(r){const e=Be(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=xO.bind(null,e),e}class Jh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return D2(this.persistence,new I2,e.initialUser,this.serializer)}Cu(e){return new iw(Zp.Vi,this.serializer)}Du(e){return new U2}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jh.provider={build:()=>new Jh};class OO extends Jh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){lt(this.persistence.referenceDelegate instanceof Xh,46915);const a=this.persistence.referenceDelegate.garbageCollector;return new d2(a,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new iw((a=>Xh.Vi(a,n)),this.serializer)}}class fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>wE(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=CO.bind(null,this.syncEngine),await oO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new uO})()}createDatastore(e){const n=gf(e.databaseInfo.databaseId),a=q2(e.databaseInfo);return $2(e.authCredentials,e.appCheckCredentials,a,n)}createRemoteStore(e){return(function(a,o,u,h,m){return new X2(a,o,u,h,m)})(this.localStore,this.datastore,e.asyncQueue,(n=>wE(this.syncEngine,n,0)),(function(){return yE.v()?new yE:new j2})())}createSyncEngine(e,n){return(function(o,u,h,m,p,g,v){const T=new vO(o,u,h,m,p,g);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const a=Be(n);ye(Is,"RemoteStore shutting down."),a.Ea.add(5),await qu(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ki("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class PO{constructor(e,n,a,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=a,this._databaseInfo=o,this.user=Sn.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(a,(async h=>{ye(Va,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(a,(h=>(ye(Va,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ia;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const a=og(n,"Failed to shutdown persistence");e.reject(a)}})),e.promise}}async function km(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Va,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let a=n.initialUser;r.setCredentialChangeListener((async o=>{a.isEqual(o)||(await aw(e.localStore,o),a=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function AE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await kO(r);ye(Va,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((a=>_E(e.remoteStore,a))),r.setAppCheckTokenChangeListener(((a,o)=>_E(e.remoteStore,o))),r._onlineComponents=e}async function kO(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Va,"Using user provided OfflineComponentProvider");try{await km(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===re.FAILED_PRECONDITION||o.code===re.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Lo("Error using user provided cache. Falling back to memory cache: "+n),await km(r,new Jh)}}else ye(Va,"Using default OfflineComponentProvider"),await km(r,new OO(void 0));return r._offlineComponents}async function ww(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Va,"Using user provided OnlineComponentProvider"),await AE(r,r._uninitializedComponentsProvider._online)):(ye(Va,"Using default OnlineComponentProvider"),await AE(r,new fp))),r._onlineComponents}function VO(r){return ww(r).then((e=>e.syncEngine))}async function LO(r){const e=await ww(r),n=e.eventManager;return n.onListen=_O.bind(null,e.syncEngine),n.onUnlisten=bO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=EO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wO.bind(null,e.syncEngine),n}function UO(r,e,n={}){const a=new Ia;return r.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,p,g){const v=new MO({next:S=>{v.Nu(),h.enqueueAndForget((()=>hO(u,T))),S.fromCache&&p.source==="server"?g.reject(new pe(re.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(S)},error:S=>g.reject(S)}),T=new mO(m,v,{includeMetadataChanges:!0,Ka:!0});return cO(u,T)})(await LO(r),r.asyncQueue,e,n,a))),a.promise}function jO(r,e){const n=new Ia;return r.asyncQueue.enqueueAndForget((async()=>SO(await VO(r),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="ComponentProvider",RE=new Map;function BO(r,e,n,a,o){return new nD(r,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Sw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,a)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw="firestore.googleapis.com",xE=!0;class IE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new pe(re.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Aw,this.ssl=xE}else this.host=e.host,this.ssl=e.ssl??xE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<h2)throw new pe(re.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sw(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new pe(re.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class _f{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new IE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(re.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(re.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new IE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new kN;switch(a.type){case"firstParty":return new jN(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new pe(re.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=RE.get(n);a&&(ye(zO,"Removing Datastore"),RE.delete(n),a.terminate())})(this),Promise.resolve()}}function HO(r,e,n,a={}){r=bu(r,_f);const o=Fo(e),u=r._getSettings(),h={...u,emulatorOptions:r._getEmulatorOptions()},m=`${e}:${n}`;o&&(_T(`https://${m}`),ET("Firestore",!0)),u.host!==Aw&&u.host!==m&&Lo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...u,host:m,ssl:o,emulatorOptions:a};if(!ws(p,h)&&(r._setSettings(p),a.mockUserToken)){let g,v;if(typeof a.mockUserToken=="string")g=a.mockUserToken,v=Sn.MOCK_USER;else{g=q1(a.mockUserToken,r._app?.options.projectId);const T=a.mockUserToken.sub||a.mockUserToken.user_id;if(!T)throw new pe(re.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Sn(T)}r._authCredentials=new VN(new db(g,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new ks(this.firestore,e,this._query)}}class on{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ca(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}toJSON(){return{type:on._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(zu(n,on._jsonSchema))return new on(e,a||null,new Ce(wt.fromString(n.referencePath)))}}on._jsonSchemaVersion="firestore/documentReference/1.0",on._jsonSchema={type:Kt("string",on._jsonSchemaVersion),referencePath:Kt("string")};class Ca extends ks{constructor(e,n,a){super(e,n,Ob(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new Ce(e))}withConverter(e){return new Ca(this.firestore,e,this._path)}}function dp(r,e,...n){if(r=Fn(r),mb("collection","path",e),r instanceof _f){const a=wt.fromString(e,...n);return B0(a),new Ca(r,null,a)}{if(!(r instanceof on||r instanceof Ca))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(wt.fromString(e,...n));return B0(a),new Ca(r.firestore,null,a)}}function Rw(r,e,...n){if(r=Fn(r),arguments.length===1&&(e=Bp.newId()),mb("doc","path",e),r instanceof _f){const a=wt.fromString(e,...n);return z0(a),new on(r,null,new Ce(a))}{if(!(r instanceof on||r instanceof Ca))throw new pe(re.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child(wt.fromString(e,...n));return z0(a),new on(r.firestore,r instanceof Ca?r.converter:null,new Ce(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE="AsyncQueue";class NE{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ow(this,"async_queue_retry"),this._c=()=>{const a=Pm();a&&ye(CE,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Pm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Ia;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Qo(e))throw e;ye(CE,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,ki("INTERNAL UNHANDLED ERROR: ",DE(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=sg.createAndSchedule(this,e,n,a,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&Pe(47125,{Pc:DE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class Ef extends _f{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new NE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NE(e),this._firestoreClient=void 0,await e}}}function qO(r,e){const n=typeof r=="object"?r:ST(),a=typeof r=="string"?r:Gh,o=Cp(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const u=B1("firestore");u&&HO(o,...u)}return o}function xw(r){if(r._terminated)throw new pe(re.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||FO(r),r._firestoreClient}function FO(r){const e=r._freezeSettings(),n=BO(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new PO(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vr(gn.fromBase64String(e))}catch(n){throw new pe(re.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new vr(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zu(e,vr._jsonSchema))return vr.fromBase64String(e.bytes)}}vr._jsonSchemaVersion="firestore/bytes/1.0",vr._jsonSchema={type:Kt("string",vr._jsonSchemaVersion),bytes:Kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(re.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new pn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(re.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(re.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ii._jsonSchemaVersion}}static fromJSON(e){if(zu(e,ii._jsonSchema))return new ii(e.latitude,e.longitude)}}ii._jsonSchemaVersion="firestore/geoPoint/1.0",ii._jsonSchema={type:Kt("string",ii._jsonSchemaVersion),latitude:Kt("number"),longitude:Kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let u=0;u<a.length;++u)if(a[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:zr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zu(e,zr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new zr(e.vectorValues);throw new pe(re.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}zr._jsonSchemaVersion="firestore/vectorValue/1.0",zr._jsonSchema={type:Kt("string",zr._jsonSchemaVersion),vectorValues:Kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=/^__.*__$/;class KO{constructor(e,n,a){this.data=e,this.fieldMask=n,this.fieldTransforms=a}toMutation(e,n){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,n,this.fieldTransforms):new Bu(e,this.data,n,this.fieldTransforms)}}function Cw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Pe(40011,{dataSource:r})}}class fg{constructor(e,n,a,o,u,h){this.settings=e,this.databaseId=n,this.serializer=a,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new fg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePathSegment(e),a}childContextForFieldPath(e){const n=this.path?.child(e),a=this.contextWith({path:n,arrayElement:!1});return a.validatePath(),a}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Zh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Cw(this.dataSource)&&GO.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class YO{constructor(e,n,a){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=a||gf(e)}createContext(e,n,a,o=!1){return new fg({dataSource:e,methodName:n,targetDoc:a,path:pn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nw(r){const e=r._freezeSettings(),n=gf(r._databaseId);return new YO(r._databaseId,!!e.ignoreUndefinedProperties,n)}function $O(r,e,n,a,o,u={}){const h=r.createContext(u.merge||u.mergeFields?2:0,e,n,o);Mw("Data must be an object, but it was:",h,a);const m=Dw(a,h);let p,g;if(u.merge)p=new Ur(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const v=[];for(const T of u.mergeFields){const S=Gu(e,T,n);if(!h.contains(S))throw new pe(re.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);JO(v,S)||v.push(S)}p=new Ur(v),g=h.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,g=h.fieldTransforms;return new KO(new yr(m),p,g)}class dg extends hg{_toFieldTransform(e){return new DD(e.path,new Iu)}isEqual(e){return e instanceof dg}}function QO(r,e,n,a=!1){return mg(n,r.createContext(a?4:3,e))}function mg(r,e){if(Ow(r=Fn(r)))return Mw("Unsupported field value:",e,r),Dw(r,e);if(r instanceof hg)return(function(a,o){if(!Cw(o.dataSource))throw o.createError(`${a._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${a._methodName}() is not currently supported inside arrays`);const u=a._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(a,o){const u=[];let h=0;for(const m of a){let p=mg(m,o.childContextForArray(h));p==null&&(p={nullValue:"NULL_VALUE"}),u.push(p),h++}return{arrayValue:{values:u}}})(r,e)}return(function(a,o){if((a=Fn(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return ID(o.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const u=Rt.fromDate(a);return{timestampValue:Qh(o.serializer,u)}}if(a instanceof Rt){const u=new Rt(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:Qh(o.serializer,u)}}if(a instanceof ii)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof vr)return{bytesValue:Qb(o.serializer,a._byteString)};if(a instanceof on){const u=o.databaseId,h=a.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Wp(a.firestore._databaseId||o.databaseId,a._key.path)}}if(a instanceof zr)return(function(h,m){const p=h instanceof zr?h.toArray():h;return{mapValue:{fields:{[wb]:{stringValue:Sb},[Kh]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw m.createError("VectorValues must only contain numeric values.");return Yp(m.serializer,v)}))}}}}}})(a,o);if(nw(a))return a._toProto(o.serializer);throw o.createError(`Unsupported field value: ${of(a)}`)})(r,e)}function Dw(r,e){const n={};return yb(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(r,((a,o)=>{const u=mg(o,e.childContextForField(a));u!=null&&(n[a]=u)})),{mapValue:{fields:n}}}function Ow(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Rt||r instanceof ii||r instanceof vr||r instanceof on||r instanceof hg||r instanceof zr||nw(r))}function Mw(r,e,n){if(!Ow(n)||!pb(n)){const a=of(n);throw a==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+a)}}function Gu(r,e,n){if((e=Fn(e))instanceof Iw)return e._internalPath;if(typeof e=="string")return WO(r,e);throw Zh("Field path arguments must be of type string or ",r,!1,void 0,n)}const XO=new RegExp("[~\\*/\\[\\]]");function WO(r,e,n){if(e.search(XO)>=0)throw Zh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Iw(...e.split("."))._internalPath}catch{throw Zh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Zh(r,e,n,a,o){const u=a&&!a.isEmpty(),h=o!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let p="";return(u||h)&&(p+=" (found",u&&(p+=` in field ${a}`),h&&(p+=` in document ${o}`),p+=")"),new pe(re.INVALID_ARGUMENT,m+r+p)}function JO(r,e){return r.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{convertValue(e,n="none"){switch(Pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ma(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Pe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const a={};return Ds(e,((o,u)=>{a[o]=this.convertValue(u,n)})),a}convertVectorValue(e){const n=e.fields?.[Kh].arrayValue?.values?.map((a=>zt(a.doubleValue)));return new zr(n)}convertGeoPoint(e){return new ii(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map((a=>this.convertValue(a,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const a=cf(e);return a==null?null:this.convertValue(a,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=Oa(e);return new Rt(n.seconds,n.nanos)}convertDocumentKey(e,n){const a=wt.fromString(e);lt(tw(a),9688,{name:e});const o=new Au(a.get(1),a.get(3)),u=new Ce(a.popFirst(5));return o.isEqual(n)||ki(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM extends ZO{constructor(e){super(),this.firestore=e}convertBytes(e){return new vr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function tM(){return new dg("serverTimestamp")}const OE="@firebase/firestore",ME="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(e,n,a,o,u){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Gu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class nM extends Pw{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new pe(re.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class pg{}class kw extends pg{}function iM(r,e,...n){let a=[];e instanceof pg&&a.push(e),a=a.concat(n),(function(u){const h=u.filter((p=>p instanceof gg)).length,m=u.filter((p=>p instanceof Tf)).length;if(h>1||h>0&&m>0)throw new pe(re.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(a);for(const o of a)r=o._apply(r);return r}class Tf extends kw{constructor(e,n,a){super(),this._field=e,this._op=n,this._value=a,this.type="where"}static _create(e,n,a){return new Tf(e,n,a)}_apply(e){const n=this._parse(e);return Vw(e._query,n),new ks(e.firestore,e.converter,np(e._query,n))}_parse(e){const n=Nw(e.firestore);return(function(u,h,m,p,g,v,T){let S;if(g.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new pe(re.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){kE(T,v);const B=[];for(const J of T)B.push(PE(p,u,J));S={arrayValue:{values:B}}}else S=PE(p,u,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||kE(T,v),S=QO(m,h,T,v==="in"||v==="not-in");return Gt.create(g,v,S)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function aM(r,e,n){const a=e,o=Gu("where",r);return Tf._create(o,a,n)}class gg extends pg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new gg(e,n)}_parse(e){const n=this._queryConstraints.map((a=>a._parse(e))).filter((a=>a.getFilters().length>0));return n.length===1?n[0]:Br.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const p of m)Vw(h,p),h=np(h,p)})(e._query,n),new ks(e.firestore,e.converter,np(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yg extends kw{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new yg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new pe(re.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xu(u,h)})(e._query,this._field,this._direction);return new ks(e.firestore,e.converter,ED(e._query,n))}}function sM(r,e="asc"){const n=e,a=Gu("orderBy",r);return yg._create(a,n)}function PE(r,e,n){if(typeof(n=Fn(n))=="string"){if(n==="")throw new pe(re.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Mb(e)&&n.indexOf("/")!==-1)throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const a=e.path.child(wt.fromString(n));if(!Ce.isDocumentKey(a))throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return Q0(r,new Ce(a))}if(n instanceof on)return Q0(r,n._key);throw new pe(re.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${of(n)}.`)}function kE(r,e){if(!Array.isArray(r)||r.length===0)throw new pe(re.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vw(r,e){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(re.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function oM(r,e,n){let a;return a=r?r.toFirestore(e):e,a}class ph{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mo extends Pw{constructor(e,n,a,o,u,h){super(e,n,a,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(Gu("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Mo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:Kt("string",Mo._jsonSchemaVersion),bundleSource:Kt("string","DocumentSnapshot"),bundleName:Kt("string"),bundle:Kt("string")};class Ch extends Mo{data(e={}){return super.data(e)}}class Po{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ph(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new Ch(this._firestore,this._userDataWriter,a.key,a,new ph(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(re.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const p=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ph(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:p,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const p=new Ch(o._firestore,o._userDataWriter,m.doc.key,m.doc,new ph(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,v=-1;return m.type!==0&&(g=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),v=h.indexOf(m.doc.key)),{type:lM(m.type),doc:p,oldIndex:g,newIndex:v}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(re.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Po._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),a.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Pe(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Po._jsonSchemaVersion="firestore/querySnapshot/1.0",Po._jsonSchema={type:Kt("string",Po._jsonSchemaVersion),bundleSource:Kt("string","QuerySnapshot"),bundleName:Kt("string"),bundle:Kt("string")};function Lw(r){r=bu(r,ks);const e=bu(r.firestore,Ef),n=xw(e),a=new eM(e);return rM(r._query),UO(n,r._query).then((o=>new Po(e,a,r,o)))}function uM(r){return Uw(bu(r.firestore,Ef),[new $p(r._key,ni.none())])}function cM(r,e){const n=bu(r.firestore,Ef),a=Rw(r),o=oM(r.converter,e),u=Nw(r.firestore);return Uw(n,[$O(u,"addDoc",a._key,o,r.converter!==null,{}).toMutation(a._key,ni.exists(!1))]).then((()=>a))}function Uw(r,e){const n=xw(r);return jO(n,e)}(function(e,n=!0){PN(Go),ko(new Ss("firestore",((a,{instanceIdentifier:o,options:u})=>{const h=a.getProvider("app").getImmediate(),m=new Ef(new LN(a.getProvider("auth-internal")),new zN(h,a.getProvider("app-check-internal")),rD(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),Ra(OE,ME,e),Ra(OE,ME,"esm2020")})();const hM={apiKey:"AIzaSyAJaqFcglzv-TgxJF5uFpktjf8AOw6gmXQ",authDomain:"gate-id.firebaseapp.com",projectId:"gate-id",storageBucket:"gate-id.firebasestorage.app",messagingSenderId:"447898068887",appId:"1:447898068887:web:b541a4e103e0495af906d2",measurementId:"G-JK74N4R6WJ"},jw=wT(hM),mp=NN(jw),fM=new Ci,Nh=qO(jw),dM=()=>{const[r,e]=H.useState({email:"",password:""}),n=u=>{e({...r,[u.target.name]:u.target.value})},a=async u=>{u.preventDefault();try{const m=(await pC(mp,r.email,r.password)).user;localStorage.setItem("email",m.email),localStorage.setItem("uid",m.uid),alert("Login berhasil!"),window.location.href="/productUser"}catch(h){alert("Login gagal: "+h.message)}},o=async()=>{try{const h=(await jC(mp,fM)).user;localStorage.setItem("email",h.email),localStorage.setItem("uid",h.uid),alert("Login Google berhasil!"),window.location.href="/productUser"}catch(u){alert("Login Google gagal: "+u.message)}};return I.jsxs("form",{onSubmit:a,children:[I.jsx(Jr,{label:"Email",name:"email",type:"email",placeholder:"Masukkan Email",onChange:n}),I.jsx(Jr,{label:"Password",name:"password",type:"password",placeholder:"Masukkan Password",onChange:n}),I.jsx(kh,{variant:"bg-blue-600 w-full",type:"submit",children:"Login"}),I.jsx(kh,{type:"button",variant:"bg-red-600 w-full mt-3",onClick:o,children:"Login dengan Google"})]})},VE=()=>I.jsx(fT,{title:"Login",type:"login",children:I.jsx(dM,{})}),mM=()=>{const r=aT();return I.jsxs("div",{className:"flex justify-center  min-h-screen items-center flex-col",children:[I.jsx("h1",{className:"text-3xl font-bold",children:"Oops!"}),I.jsx("p",{className:"my-5 text-xl",children:"Sorry,an unexpected error has occured"}),I.jsx("p",{children:r.statusText||r.message})]})},pM=()=>{const[r,e]=H.useState({fullName:"",email:"",password:"",confirmPassword:""}),n=o=>{e({...r,[o.target.name]:o.target.value})},a=async o=>{o.preventDefault();const{fullName:u,email:h,password:m,confirmPassword:p}=r;if(m!==p){alert("Password dan konfirmasi password tidak cocok!");return}try{const g=await mC(mp,h,m);await yC(g.user,{displayName:u}),alert("Registrasi berhasil!"),window.location.href="/login"}catch(g){alert("Registrasi gagal: "+g.message)}};return I.jsxs("form",{onSubmit:a,children:[I.jsx(Jr,{label:"Full Name",name:"fullName",type:"text",placeholder:"Masukkan Nama Anda",onChange:n}),I.jsx(Jr,{label:"Email",name:"email",type:"email",placeholder:"Masukkan Email Anda",onChange:n}),I.jsx(Jr,{label:"Password",name:"password",type:"password",placeholder:"Masukkan Password Anda",onChange:n}),I.jsx(Jr,{label:"Confirm Password",name:"confirmPassword",type:"password",placeholder:"Konfirmasi Password Anda",onChange:n}),I.jsx(kh,{variant:"bg-blue-600 w-full",type:"submit",children:"Register"})]})},gM=r=>I.jsx(fT,{title:"Register",type:"register",children:I.jsx(pM,{})}),ys=({children:r,className:e="bg-blue-600",onClick:n,type:a="button",disabled:o=!1})=>I.jsx("button",{type:a,className:`px-4 py-2 font-semibold rounded-lg text-white ${e} hover:opacity-90 transition duration-200 shadow-md ${o?"opacity-50 cursor-not-allowed":""} text-sm md:text-base`,onClick:n,disabled:o,children:r}),ba=r=>{const{children:e,isAddButton:n=!1}=r;return n?I.jsx("div",{className:"w-full bg-gray-100 border-2 border-dashed border-gray-400 rounded-xl shadow-inner flex flex-col items-center justify-center p-4 sm:p-6 cursor-pointer hover:bg-gray-200 transition duration-300 h-[300px] sm:h-[350px]",onClick:r.onClick,children:e}):I.jsx("div",{className:"w-full bg-white border border-gray-200 rounded-xl shadow-lg flex flex-col justify-between transform transition duration-300 hover:scale-[1.02]",children:e})},yM=({images:r})=>I.jsx("a",{href:"#",children:I.jsx("img",{src:r,alt:"product",className:"p-3 sm:p-4 rounded-t-xl object-cover w-full h-40 sm:h-48",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/400x300/e0e7ff/3730a3?text=No+Image"}})}),vM=({children:r,title:e})=>I.jsxs("div",{className:"px-4 sm:px-5 pb-3 sm:pb-5 flex flex-col justify-between flex-grow",children:[I.jsx("a",{href:"#",children:I.jsx("h5",{className:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 mb-2 line-clamp-2",children:e})}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-700 line-clamp-3",children:r})]}),_M=({price:r,handleAddToCart:e,id:n,handleDeleteProduct:a})=>{const o=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u);return I.jsxs("div",{className:"flex flex-col gap-3 px-4 sm:px-5 pb-4 sm:pb-5 pt-2 sm:pt-3",children:[I.jsx("span",{className:"text-lg sm:text-xl font-bold text-gray-900 text-center sm:text-left",children:o(r)}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("button",{className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg text-xs sm:text-sm py-2 px-3 transition duration-200 shadow-md border-2 border-red-600 hover:border-red-700",onClick:()=>a(n),children:"Hapus"}),I.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg text-xs sm:text-sm py-2 px-3 transition duration-200 shadow-md border-2 border-blue-700 hover:border-blue-800",onClick:()=>e(n),children:"+ Keranjang"})]})]})};ba.Header=yM;ba.Body=vM;ba.Footer=_M;const EM=()=>{const r=localStorage.getItem("user_id");return r?parseInt(r):1},TM=()=>{const[r,e]=H.useState(localStorage.getItem("email")||"Guest"),[n,a]=H.useState([]),[o,u]=H.useState([]),[h,m]=H.useState(!0),[p,g]=H.useState(null),[v,T]=H.useState(!1),[S,N]=H.useState(!1),B=qo();H.useEffect(()=>{m(!0),g(null),fetch("http://localhost:5000/api/products").then(x=>{if(!x.ok)throw new Error(`Server error: ${x.status}`);return x.json()}).then(x=>{a(x),m(!1)}).catch(x=>{console.error("Error fetching products:",x),g("Gagal memuat produk. Pastikan server (port 5000) berjalan dan database terkoneksi."),m(!1)})},[]);const J=()=>{localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.removeItem("user_id"),e("Guest"),window.location.replace("/login")},Q=x=>{const w=o.find(R=>R.id===x);u(w?o.map(R=>R.id===x?{...R,qty:R.qty+1}:R):[...o,{id:x,qty:1}])},ne=()=>{B("/products/add")},oe=async x=>{try{const w=window.prompt("Ketik 'HAPUS' untuk mengonfirmasi penghapusan produk ID: "+x);if(w&&w.toUpperCase()==="HAPUS"){const R=await fetch(`http://localhost:5000/api/products/${x}`,{method:"DELETE"});if(!R.ok)throw new Error(`Error ${R.status}: ${R.statusText}`);a(O=>O.filter(k=>k.id!==x)),window.alert("Produk berhasil dihapus!")}else w!==null&&window.alert("Penghapusan dibatalkan.")}catch(w){console.error("Error hapus:",w),window.alert("Gagal menghapus produk: "+w.message)}},ue=()=>{if(o.length>0){const x=window.prompt("Ketik 'HAPUS' untuk mengonfirmasi penghapusan semua item di keranjang:");x&&x.toUpperCase()==="HAPUS"?u([]):x!==null&&window.alert("Penghapusan dibatalkan.")}else window.alert("Keranjang sudah kosong.")},Re=async()=>{if(o.length===0){window.alert("Keranjang belanja Anda kosong.");return}T(!0);const x=o.map(R=>{const O=n.find(k=>k.id===R.id);return{product_id:R.id,title:O?O.title:"Produk tidak ditemukan",quantity:R.qty,price_at_order:O?O.price:0}}),w={userId:EM(),itemsSnapshot:x,total:V};try{const R=await fetch("http://localhost:5000/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)}),O=await R.json();R.ok?(window.alert(`Pesanan berhasil dibuat! ID Transaksi: ${O.transactionId}. Lanjutkan ke pembayaran.`),u([]),B(`/payment/${O.transactionId}`)):window.alert(`Checkout Gagal: ${O.error||"Terjadi kesalahan server."}`)}catch(R){console.error("Checkout fetch error:",R),window.alert("Terjadi error koneksi saat checkout. Pastikan server berjalan!")}finally{T(!1)}},le=x=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(x),V=H.useMemo(()=>o.reduce((x,w)=>{const R=n.find(O=>O.id===w.id);return R?x+R.price*w.qty:x},0),[o,n]);return I.jsxs(H.Fragment,{children:[I.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center bg-blue-700 text-white px-4 py-3 sm:px-6 md:px-10 shadow-lg gap-3 sm:gap-4",children:[I.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Toko Produk"}),I.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3 w-full sm:w-auto",children:[I.jsx(ys,{className:"bg-purple-600 hover:bg-purple-700 text-xs sm:text-sm whitespace-nowrap",onClick:()=>B("/transactions"),children:"Riwayat Transaksi"}),I.jsxs(ys,{className:"bg-green-600 hover:bg-green-700 text-xs sm:text-sm lg:hidden relative",onClick:()=>N(!S),children:["Keranjang (",o.length,")",o.length>0&&I.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:o.length})]}),I.jsx("span",{className:"font-medium text-sm sm:text-base truncate max-w-[120px] sm:max-w-[150px] md:max-w-xs",children:r}),I.jsx(ys,{className:"bg-red-500 hover:bg-red-600 text-xs sm:text-sm",onClick:J,children:"Logout"})]})]}),I.jsxs("div",{className:"flex flex-col lg:flex-row justify-center py-3 sm:py-5 px-3 sm:px-4 gap-4",children:[I.jsx("div",{className:"w-full lg:w-3/4",children:I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[I.jsxs(ba,{isAddButton:!0,onClick:ne,children:[I.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-gray-600 mb-3",children:[I.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),I.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),I.jsx("p",{className:"text-base sm:text-lg font-semibold text-gray-700 text-center",children:"Tambah Produk Baru"}),I.jsx("span",{className:"text-xs sm:text-sm text-gray-500 mt-1 text-center",children:"(Klik untuk membuka form)"})]}),h&&I.jsx("div",{className:"col-span-full",children:I.jsx("p",{className:"text-blue-600 text-lg sm:text-2xl mt-10 text-center",children:"Memuat produk dari server..."})}),p&&I.jsx("div",{className:"col-span-full",children:I.jsx("p",{className:"text-red-500 text-base sm:text-xl mt-10 text-center p-4 border border-red-300 bg-red-50 rounded-lg",children:p})}),!h&&!p&&n.length>0&&n.map(x=>I.jsxs(ba,{children:[I.jsx(ba.Header,{images:x.image}),I.jsx(ba.Body,{title:x.title,children:x.description}),I.jsx(ba.Footer,{price:x.price,handleAddToCart:Q,handleDeleteProduct:oe,id:x.id})]},x.id)),!h&&!p&&n.length===0&&I.jsx("div",{className:"col-span-full",children:I.jsx("p",{className:"text-gray-500 text-base sm:text-xl mt-10 text-center",children:"Database Anda kosong atau tidak ada produk."})})]})}),I.jsxs("div",{className:"hidden lg:block w-full lg:w-1/4 lg:sticky lg:top-8 lg:self-start px-3 sm:px-5",children:[I.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-blue-600 border-b-2 pb-2 mb-4",children:"Keranjang Belanja"}),I.jsxs("div",{className:"bg-gray-50 p-3 sm:p-4 rounded-lg shadow-inner",children:[I.jsx("ul",{className:"divide-y divide-gray-200 max-h-[400px] overflow-y-auto",children:o.length>0?o.map(x=>{const w=n.find(R=>R.id===x.id);return w?I.jsxs("li",{className:"py-2 flex justify-between items-center",children:[I.jsxs("span",{className:"font-medium text-gray-800 text-sm sm:text-base",children:[w.title,I.jsxs("span",{className:"text-xs sm:text-sm text-gray-500 block",children:["(",le(w.price),")"]})]}),I.jsxs("span",{className:"font-semibold text-blue-600 text-sm sm:text-base",children:[x.qty,"x"]})]},x.id):null}):I.jsx("li",{className:"text-gray-500 text-center py-4 text-sm sm:text-base",children:"Keranjang kosong. Tambahkan produk!"})}),I.jsxs("div",{className:"pt-3 sm:pt-4 mt-3 sm:mt-4 border-t-2 border-blue-200",children:[I.jsxs("div",{className:"flex justify-between font-bold text-base sm:text-lg text-gray-900 mb-3 sm:mb-4",children:[I.jsx("span",{children:"Total:"}),I.jsx("span",{children:le(V)})]}),I.jsx(ys,{className:"bg-green-500 hover:bg-green-600 w-full mb-2",onClick:Re,disabled:o.length===0||v,children:v?"Memproses...":"Checkout & Bayar"}),I.jsxs(ys,{className:"bg-red-500 hover:bg-red-600 w-full",onClick:ue,disabled:o.length===0||v,children:["Hapus Pesanan (",o.length,")"]})]})]})]}),S&&I.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-50",onClick:()=>N(!1),children:I.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-96 bg-white shadow-2xl overflow-y-auto",onClick:x=>x.stopPropagation(),children:[I.jsxs("div",{className:"sticky top-0 bg-blue-600 text-white p-4 flex justify-between items-center",children:[I.jsx("h2",{className:"text-xl font-bold",children:"Keranjang Belanja"}),I.jsx("button",{onClick:()=>N(!1),className:"text-2xl font-bold hover:text-gray-200",children:""})]}),I.jsxs("div",{className:"p-4",children:[I.jsx("ul",{className:"divide-y divide-gray-200 mb-4",children:o.length>0?o.map(x=>{const w=n.find(R=>R.id===x.id);return w?I.jsxs("li",{className:"py-3 flex justify-between items-center",children:[I.jsxs("span",{className:"font-medium text-gray-800",children:[w.title,I.jsxs("span",{className:"text-sm text-gray-500 block",children:["(",le(w.price),")"]})]}),I.jsxs("span",{className:"font-semibold text-blue-600",children:[x.qty,"x"]})]},x.id):null}):I.jsx("li",{className:"text-gray-500 text-center py-8",children:"Keranjang kosong. Tambahkan produk!"})}),I.jsxs("div",{className:"pt-4 border-t-2 border-blue-200",children:[I.jsxs("div",{className:"flex justify-between font-bold text-lg text-gray-900 mb-4",children:[I.jsx("span",{children:"Total:"}),I.jsx("span",{children:le(V)})]}),I.jsx(ys,{className:"bg-green-500 hover:bg-green-600 w-full mb-2",onClick:()=>{Re(),N(!1)},disabled:o.length===0||v,children:v?"Memproses...":"Checkout & Bayar"}),I.jsxs(ys,{className:"bg-red-500 hover:bg-red-600 w-full",onClick:ue,disabled:o.length===0||v,children:["Hapus Pesanan (",o.length,")"]})]})]})]})})]})]})},bM="/assets/shoes-1-D9RrHlgT.jpg",vs=({children:r,className:e="bg-blue-600",onClick:n,type:a="button",disabled:o=!1})=>I.jsx("button",{type:a,className:`px-4 py-2 font-semibold rounded-lg text-white ${e} hover:opacity-90 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 ${o?"opacity-50 cursor-not-allowed hover:transform-none":""} text-sm md:text-base`,onClick:n,disabled:o,children:r}),wM=({images:r})=>I.jsx("a",{href:"#",className:"group block overflow-hidden rounded-t-xl",children:I.jsx("img",{src:r,alt:"product",className:"p-3 sm:p-4 rounded-t-xl object-cover w-full h-40 sm:h-48 transition-transform duration-500 group-hover:scale-110",onError:e=>{e.target.onerror=null,e.target.src="https://placehold.co/400x300/e0e7ff/3730a3?text=No+Image"}})}),SM=({children:r,title:e})=>I.jsxs("div",{className:"px-4 sm:px-5 pb-3 sm:pb-5 flex flex-col justify-between flex-grow",children:[I.jsx("a",{href:"#",className:"group",children:I.jsx("h5",{className:"text-lg sm:text-xl font-bold tracking-tight text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition-colors duration-300",children:e})}),I.jsx("p",{className:"text-xs sm:text-sm text-gray-700 line-clamp-3 leading-relaxed",children:r})]}),AM=({price:r,handleAddToCart:e,id:n,handleDeleteProduct:a})=>{const o=u=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(u);return I.jsxs("div",{className:"flex flex-col gap-3 px-4 sm:px-5 pb-4 sm:pb-5 pt-2 sm:pt-3",children:[I.jsx("span",{className:"text-lg sm:text-2xl font-bold text-gray-900 text-center sm:text-left bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:o(r)}),I.jsxs("div",{className:"flex gap-2",children:[I.jsx("button",{className:"flex-1 bg-red-500 hover:bg-red-600 text-white font-semibold rounded-lg text-xs sm:text-sm py-2.5 px-3 transition-all duration-300 shadow-md hover:shadow-lg border-2 border-red-600 hover:border-red-700 transform hover:-translate-y-0.5",onClick:()=>a(n),children:" Hapus"}),I.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg text-xs sm:text-sm py-2.5 px-3 transition-all duration-300 shadow-md hover:shadow-lg border-2 border-blue-700 hover:border-blue-800 transform hover:-translate-y-0.5",onClick:()=>e(n),children:" Keranjang"})]})]})},LE=()=>{const r=localStorage.getItem("user_id");return r?parseInt(r):1},RM=()=>{const[r,e]=H.useState(localStorage.getItem("email")||"Guest"),[n,a]=H.useState([]),[o,u]=H.useState([]),[h,m]=H.useState(!0),[p,g]=H.useState(null),[v,T]=H.useState(!1),[S,N]=H.useState(!1),B=qo();H.useEffect(()=>{(async()=>{try{m(!0);const w=(await Lw(dp(Nh,"barang"))).docs.map(R=>({id:R.id,...R.data()}));a(w)}catch(x){console.error(x),g("Gagal mengambil data dari Firebase")}finally{m(!1)}})()},[]);const J=()=>{localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.removeItem("user_id"),e("Guest"),window.location.replace("/login")},Q=V=>{const x=o.find(w=>w.id===V);u(x?o.map(w=>w.id===V?{...w,qty:w.qty+1}:w):[...o,{id:V,qty:1}])},ne=async V=>{try{const x=window.prompt("Ketik 'HAPUS' untuk mengonfirmasi penghapusan produk ID: "+V);if(!x||x.toUpperCase()!=="HAPUS")return;await uM(Rw(Nh,"barang",V)),a(w=>w.filter(R=>R.id!==V)),alert("Produk berhasil dihapus dari Firestore!")}catch(x){console.error(x),alert("Gagal menghapus produk: "+x.message)}},oe=()=>{if(o.length>0){const V=window.prompt("Ketik 'HAPUS' untuk mengonfirmasi penghapusan semua item di keranjang:");V&&V.toUpperCase()==="HAPUS"?u([]):V!==null&&window.alert("Penghapusan dibatalkan.")}else window.alert("Keranjang sudah kosong.")},ue=async()=>{if(o.length===0){window.alert("Keranjang belanja Anda kosong.");return}T(!0);const V=o.map(w=>{const R=n.find(O=>O.id===w.id);return{product_id:w.id,title:R?R.title:"Produk tidak ditemukan",quantity:w.qty,price_at_order:R?R.price:0}}),x={userId:LE(),itemsSnapshot:V,total:le};try{const w=await fetch("http://localhost:5000/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),R=await w.json();w.ok?(await cM(dp(Nh,"riwayat"),{userEmail:r,userId:LE(),transactionId:R.transactionId,items:V,total:le,createdAt:tM(),status:"Menunggu Pembayaran"}),window.alert(`Pesanan berhasil dibuat! ID Transaksi: ${R.transactionId}. Lanjutkan ke pembayaran.`),u([]),B(`/payment/${R.transactionId}`)):window.alert(`Checkout Gagal: ${R.error||"Terjadi kesalahan server."}`)}catch(w){console.error("Checkout fetch error:",w),window.alert("Terjadi error koneksi saat checkout. Pastikan server berjalan!")}finally{T(!1)}},Re=V=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(V),le=H.useMemo(()=>o.reduce((V,x)=>{const w=n.find(R=>R.id===x.id);return w?V+w.price*x.qty:V},0),[o,n]);return I.jsxs(H.Fragment,{children:[I.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-center bg-gradient-to-r from-blue-600 via-blue-700 to-blue-800 text-white px-4 py-4 sm:px-6 md:px-10 shadow-2xl gap-3 sm:gap-4 sticky top-0 z-40 backdrop-blur-sm",children:[I.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold tracking-tight drop-shadow-lg",children:" Toko Produk"}),I.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 sm:gap-3 w-full sm:w-auto",children:[I.jsx(vs,{className:"bg-purple-600 hover:bg-purple-700 text-xs sm:text-sm whitespace-nowrap",onClick:()=>B("/transactions"),children:" Riwayat Transaksi"}),I.jsxs(vs,{className:"bg-green-600 hover:bg-green-700 text-xs sm:text-sm lg:hidden relative",onClick:()=>N(!S),children:[" Keranjang (",o.length,")",o.length>0&&I.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center font-bold animate-pulse shadow-lg",children:o.length})]}),I.jsx("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-lg backdrop-blur-sm",children:I.jsxs("span",{className:"font-medium text-sm sm:text-base truncate max-w-[120px] sm:max-w-[150px] md:max-w-xs",children:[" ",r]})}),I.jsx(vs,{className:"bg-red-500 hover:bg-red-600 text-xs sm:text-sm",onClick:J,children:" Logout"})]})]}),I.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50/30 to-gray-100",children:I.jsxs("div",{className:"flex flex-col lg:flex-row justify-center py-6 sm:py-8 px-3 sm:px-4 gap-6",children:[I.jsxs("div",{className:"w-full lg:w-3/4",children:[h&&I.jsx("div",{className:"flex justify-center items-center h-64",children:I.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})}),p&&I.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-md",children:I.jsxs("p",{className:"text-red-700 font-medium",children:[" ",p]})}),I.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[!h&&!p&&n.length>0&&n.map((V,x)=>I.jsxs("div",{className:"w-full bg-white border border-gray-200 rounded-xl shadow-lg hover:shadow-2xl flex flex-col justify-between transform transition-all duration-500 hover:scale-105 hover:-rotate-1 animate-fadeIn",style:{animationDelay:`${x*.1}s`},children:[I.jsx(wM,{images:V.image||bM}),I.jsx(SM,{title:V.title,children:V.description||"Deskripsi produk tidak tersedia."}),I.jsx(AM,{price:V.price,handleAddToCart:Q,handleDeleteProduct:ne,id:V.id})]},V.id)),!h&&!p&&n.length===0&&I.jsx("div",{className:"col-span-full",children:I.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:[I.jsx("div",{className:"text-6xl mb-4",children:""}),I.jsx("p",{className:"text-gray-500 text-xl font-medium",children:"Database Anda kosong atau tidak ada produk."}),I.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Tambahkan produk untuk memulai!"})]})})]})]}),I.jsx("div",{className:"hidden lg:block w-full lg:w-1/4 lg:sticky lg:top-24 lg:self-start px-3 sm:px-5",children:I.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl overflow-hidden border-2 border-blue-100",children:[I.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 p-5",children:I.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[" Keranjang Belanja",o.length>0&&I.jsx("span",{className:"bg-white text-blue-600 text-sm px-3 py-1 rounded-full font-bold",children:o.length})]})}),I.jsxs("div",{className:"p-4",children:[I.jsx("ul",{className:"divide-y divide-gray-100 max-h-[400px] overflow-y-auto custom-scrollbar",children:o.length>0?o.map((V,x)=>{const w=n.find(R=>R.id===V.id);return w?I.jsxs("li",{className:"py-3 flex justify-between items-center hover:bg-blue-50 px-2 rounded-lg transition-all duration-300 animate-slideIn",style:{animationDelay:`${x*.05}s`},children:[I.jsxs("div",{className:"flex-1",children:[I.jsx("span",{className:"font-semibold text-gray-800 text-sm block",children:w.title}),I.jsxs("span",{className:"text-xs text-gray-500",children:[Re(w.price),"  ",V.qty]})]}),I.jsx("span",{className:"font-bold text-blue-600 text-base ml-2",children:Re(w.price*V.qty)})]},V.id):null}):I.jsxs("li",{className:"text-gray-400 text-center py-12",children:[I.jsx("div",{className:"text-4xl mb-3",children:""}),I.jsx("p",{className:"text-sm",children:"Keranjang kosong"}),I.jsx("p",{className:"text-xs mt-1",children:"Tambahkan produk!"})]})}),I.jsxs("div",{className:"pt-4 mt-4 border-t-2 border-blue-100",children:[I.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-4 mb-4",children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("span",{className:"font-bold text-gray-700 text-lg",children:"Total:"}),I.jsx("span",{className:"font-bold text-2xl bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:Re(le)})]})}),I.jsx(vs,{className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 w-full mb-3",onClick:ue,disabled:o.length===0||v,children:v?" Memproses...":" Checkout & Bayar"}),I.jsxs(vs,{className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 w-full",onClick:oe,disabled:o.length===0||v,children:[" Hapus Pesanan (",o.length,")"]})]})]})]})}),S&&I.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-60 z-50 animate-fadeIn backdrop-blur-sm",onClick:()=>N(!1),children:I.jsxs("div",{className:"absolute right-0 top-0 h-full w-full sm:w-96 bg-white shadow-2xl overflow-y-auto animate-slideInRight",onClick:V=>V.stopPropagation(),children:[I.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-blue-600 to-blue-700 text-white p-5 flex justify-between items-center shadow-lg z-10",children:[I.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[" Keranjang",o.length>0&&I.jsx("span",{className:"bg-white text-blue-600 text-sm px-3 py-1 rounded-full font-bold",children:o.length})]}),I.jsx("button",{onClick:()=>N(!1),className:"text-3xl font-bold hover:text-gray-200 transition-transform hover:rotate-90 duration-300",children:""})]}),I.jsxs("div",{className:"p-4",children:[I.jsx("ul",{className:"divide-y divide-gray-100 mb-4",children:o.length>0?o.map((V,x)=>{const w=n.find(R=>R.id===V.id);return w?I.jsxs("li",{className:"py-4 flex justify-between items-center hover:bg-blue-50 px-2 rounded-lg transition-all duration-300",children:[I.jsxs("div",{className:"flex-1",children:[I.jsx("span",{className:"font-semibold text-gray-800 block",children:w.title}),I.jsxs("span",{className:"text-sm text-gray-500",children:[Re(w.price),"  ",V.qty]})]}),I.jsx("span",{className:"font-bold text-blue-600 text-lg ml-2",children:Re(w.price*V.qty)})]},V.id):null}):I.jsxs("li",{className:"text-gray-400 text-center py-16",children:[I.jsx("div",{className:"text-5xl mb-4",children:""}),I.jsx("p",{children:"Keranjang kosong"}),I.jsx("p",{className:"text-sm mt-2",children:"Tambahkan produk!"})]})}),I.jsxs("div",{className:"pt-4 border-t-2 border-blue-100",children:[I.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 rounded-xl p-4 mb-4",children:I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("span",{className:"font-bold text-gray-700 text-lg",children:"Total:"}),I.jsx("span",{className:"font-bold text-2xl bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:Re(le)})]})}),I.jsx(vs,{className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 w-full mb-3",onClick:()=>{ue(),N(!1)},disabled:o.length===0||v,children:v?" Memproses...":" Checkout & Bayar"}),I.jsxs(vs,{className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 w-full",onClick:oe,disabled:o.length===0||v,children:[" Hapus Pesanan (",o.length,")"]})]})]})]})})]})}),I.jsx("style",{jsx:!0,children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
          }
          to {
            opacity: 1;
          }
        }

        @keyframes slideIn {
          from {
            opacity: 0;
            transform: translateY(-10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes slideInRight {
          from {
            transform: translateX(100%);
          }
          to {
            transform: translateX(0);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.6s ease-out forwards;
          opacity: 0;
        }

        .animate-slideIn {
          animation: slideIn 0.4s ease-out forwards;
          opacity: 0;
        }

        .animate-slideInRight {
          animation: slideInRight 0.4s ease-out;
        }

        .custom-scrollbar::-webkit-scrollbar {
          width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
          background: #f1f5f9;
          border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
          background: #3b82f6;
          border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
          background: #2563eb;
        }
      `})]})},xM=()=>{const r=qo(),[e,n]=H.useState({title:"",description:"",price:"",image:""}),a=u=>{n({...e,[u.target.name]:u.target.value})},o=async u=>{u.preventDefault();try{const h=await fetch("http://localhost:5000/api/products",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),m=await h.json();h.ok?(alert("Produk berhasil ditambahkan!"),r("/product")):alert(m.error||"Gagal menambahkan produk")}catch(h){console.error("Error submit:",h),alert("Terjadi kesalahan server")}};return I.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 px-6",children:I.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-lg",children:[I.jsx("h1",{className:"text-2xl font-bold mb-6 text-blue-600",children:"Tambah Produk"}),I.jsxs("form",{onSubmit:o,className:"space-y-4",children:[I.jsx(Jr,{label:"Nama Produk",type:"text",name:"title",placeholder:"Masukkan nama produk",onChange:a}),I.jsx(Jr,{label:"Deskripsi Produk",type:"text",name:"description",placeholder:"Masukkan deskripsi",onChange:a}),I.jsx(Jr,{label:"Harga Produk",type:"number",name:"price",placeholder:"Masukkan harga",onChange:a}),I.jsx(Jr,{label:"URL Gambar",type:"text",name:"image",placeholder:"https://...",onChange:a}),I.jsx(kh,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 w-full",children:"Simpan Produk"})]})]})})},IM=({children:r,className:e="bg-blue-600",onClick:n,type:a="button",disabled:o=!1})=>I.jsx("button",{type:a,className:`h-10 px-6 font-semibold rounded-lg text-white ${e} hover:opacity-90 transition duration-200 shadow-md ${o?"opacity-50 cursor-not-allowed":""}`,onClick:n,disabled:o,children:r}),CM=()=>{const r=localStorage.getItem("user_id");return r?parseInt(r):1},UE=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),NM=r=>{switch(r){case"Berhasil":return"bg-green-100 text-green-800";case"Dibatalkan":return"bg-red-100 text-red-800";case"Sedang diproses":default:return"bg-yellow-100 text-yellow-800"}},DM=()=>{const[r,e]=H.useState([]),[n,a]=H.useState(!0),[o,u]=H.useState(null),h=qo(),m=CM();return H.useEffect(()=>{(async()=>{a(!0),u(null);try{const g=iM(dp(Nh,"riwayat"),aM("userId","==",m),sM("createdAt","desc")),T=(await Lw(g)).docs.map(S=>({id:S.id,...S.data()}));e(T)}catch(g){console.error("Error fetching transactions:",g),u("Gagal memuat riwayat transaksi dari Firestore.")}finally{a(!1)}})()},[m]),I.jsxs(H.Fragment,{children:[I.jsxs("header",{className:"flex justify-between h-20 bg-blue-700 text-white items-center px-6 md:px-10 shadow-lg",children:[I.jsxs("h1",{className:"text-2xl font-bold",children:["Riwayat Transaksi Pengguna ID: ",m]}),I.jsx(IM,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>h("/product"),children:"Kembali ke Toko"})]}),I.jsxs("div",{className:"p-4 md:p-10",children:[I.jsx("h2",{className:"text-3xl font-semibold text-gray-800 mb-6 border-b pb-2",children:"Daftar Transaksi"}),n&&I.jsx("div",{className:"text-center p-10 text-xl text-blue-600",children:"Memuat data transaksi..."}),o&&I.jsxs("div",{className:"p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:[I.jsx("p",{className:"font-bold",children:"Error:"}),I.jsx("p",{children:o})]}),!n&&!o&&r.length===0&&I.jsx("div",{className:"p-6 bg-yellow-100 border border-yellow-400 text-yellow-800 rounded-lg text-center text-lg",children:I.jsx("p",{children:"Anda belum memiliki riwayat transaksi."})}),!n&&!o&&r.length>0&&I.jsx("div",{className:"overflow-x-auto shadow-xl rounded-lg",children:I.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[I.jsx("thead",{className:"bg-blue-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID Transaksi"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tanggal"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Detail Barang (Snapshot)"}),I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Harga"}),I.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),I.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(p=>I.jsxs("tr",{className:"hover:bg-gray-50",children:[I.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:["#",p.id]}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.createdAt?.toDate().toLocaleString("id-ID")}),I.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:I.jsx("ul",{className:"list-disc ml-4 space-y-1",children:(p.items||[]).map((g,v)=>I.jsxs("li",{className:"text-xs",children:[I.jsx("span",{className:"font-semibold",children:g.title})," (",g.quantity,"x) - ",UE(g.price_at_order)]},v))})}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900",children:UE(p.total)}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:I.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${NM(p.status)}`,children:p.status})})]},p.id))})]})})]})]})},Vm=({children:r,className:e="bg-blue-600",onClick:n,type:a="button",disabled:o=!1})=>I.jsx("button",{type:a,className:`h-10 px-6 font-semibold rounded-lg text-white ${e} hover:opacity-90 transition duration-200 shadow-md ${o?"opacity-50 cursor-not-allowed":""}`,onClick:n,disabled:o,children:r}),jE=r=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(r),OM=r=>{switch(r){case"Berhasil":return"bg-green-100 text-green-800 border-green-400";case"Dibatalkan":return"bg-red-100 text-red-800 border-red-400";case"Sedang diproses":default:return"bg-yellow-100 text-yellow-800 border-yellow-400"}},MM=()=>{const{transactionId:r}=DR(),e=qo(),[n,a]=H.useState(null),[o,u]=H.useState(!0),[h,m]=H.useState(null),[p,g]=H.useState(!1);H.useEffect(()=>{(async()=>{if(!r){m("ID Transaksi tidak ditemukan."),u(!1);return}try{const N=await fetch(`http://localhost:5000/api/transactions/${r}`);if(!N.ok)throw new Error(`Gagal memuat detail transaksi. Kode: ${N.status}`);const B=await N.json();typeof B.items_snapshot=="string"&&(B.items_snapshot=JSON.parse(B.items_snapshot)),a(B)}catch(N){console.error("Error fetching transaction:",N),m(N.message||"Gagal memuat detail transaksi.")}finally{u(!1)}})()},[r]);const v=async()=>{if(!n||n.status==="Berhasil"){window.alert("Transaksi sudah berstatus Berhasil.");return}g(!0);try{const S=await fetch(`http://localhost:5000/api/transactions/${r}/status`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({newStatus:"Berhasil"})}),N=await S.json();S.ok?(a(B=>({...B,status:"Berhasil"})),window.alert(`Pembayaran transaksi #${r} berhasil dikonfirmasi!`),setTimeout(()=>e("/transactions"),1e3)):window.alert(`Gagal mengupdate status: ${N.error||"Terjadi kesalahan server."}`)}catch(S){console.error("Error updating status:",S),window.alert("Gagal koneksi ke server untuk konfirmasi pembayaran.")}finally{g(!1)}};if(o)return I.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 p-6",children:I.jsx("h1",{className:"text-3xl font-bold text-blue-600",children:"Memuat Konfirmasi Pembayaran..."})});if(h)return I.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-red-50 p-6",children:[I.jsx("h1",{className:"text-3xl font-bold text-red-600",children:"Terjadi Kesalahan"}),I.jsx("p",{className:"mt-4 text-gray-700",children:h}),I.jsx(Vm,{className:"bg-blue-600 mt-6",onClick:()=>e("/"),children:"Kembali ke Beranda"})]});const T=n.status==="Sedang diproses";return I.jsxs(H.Fragment,{children:[I.jsxs("header",{className:"flex justify-between h-20 bg-blue-700 text-white items-center px-6 md:px-10 shadow-lg",children:[I.jsx("h1",{className:"text-2xl font-bold",children:"Konfirmasi Pembayaran"}),I.jsx(Vm,{className:"bg-purple-600 hover:bg-purple-700",onClick:()=>e("/"),children:"Kembali ke Toko"})]}),I.jsxs("div",{className:"max-w-3xl mx-auto p-4 md:p-8 mt-8 bg-white shadow-2xl rounded-xl",children:[I.jsxs("div",{className:"text-center mb-8",children:[I.jsx("h2",{className:"text-4xl font-extrabold text-gray-900 mb-2",children:"Total yang Harus Dibayar"}),I.jsx("p",{className:"text-5xl font-extrabold text-green-600",children:jE(n.total_price)})]}),I.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 mb-8 bg-blue-50",children:[I.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b",children:[I.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"ID Transaksi:"}),I.jsxs("span",{className:"text-lg font-bold text-blue-800",children:["#",n.id]})]}),I.jsxs("div",{className:"flex justify-between items-center",children:[I.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"Status Saat Ini:"}),I.jsx("span",{className:`px-4 py-1 inline-flex text-base leading-5 font-bold rounded-full border ${OM(n.status)}`,children:n.status})]})]}),I.jsx("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Detail Pesanan"}),I.jsx("div",{className:"mb-8 border border-gray-100 rounded-lg overflow-hidden",children:I.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[I.jsx("thead",{className:"bg-gray-50",children:I.jsxs("tr",{children:[I.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama Barang"}),I.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Jumlah"}),I.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Harga Satuan"})]})}),I.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:(n.items_snapshot||[]).map((S,N)=>I.jsxs("tr",{children:[I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:S.title}),I.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm text-gray-500",children:[S.quantity,"x"]}),I.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm text-gray-500",children:jE(S.price_at_order)})]},N))})]})}),T&&I.jsx(Vm,{className:"bg-green-700 hover:bg-green-800 w-full py-3 text-xl font-bold",onClick:v,disabled:p,children:p?"Mengkonfirmasi...":"Konfirmasi Pembayaran (Tandai Berhasil)"}),!T&&I.jsxs("div",{className:"text-center p-4 bg-green-50 border border-green-300 rounded-lg",children:[I.jsx("p",{className:"text-lg font-semibold text-green-700",children:"Pembayaran Selesai!"}),I.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Status transaksi ini sudah **Berhasil**."})]}),I.jsxs("p",{className:"text-center text-sm text-gray-500 mt-4",children:["Transaksi dibuat pada: ",new Date(n.transaction_date).toLocaleString("id-ID")]})]})]})},PM=v1([{path:"/",element:I.jsx(VE,{}),errorElement:I.jsx(mM,{})},{path:"/login",element:I.jsx(VE,{})},{path:"/register",element:I.jsx(gM,{})},{path:"/product",element:I.jsx(TM,{})},{path:"/productUser",element:I.jsx(RM,{})},{path:"/products/add",element:I.jsx(xM,{})},{path:"/transactions",element:I.jsx(DM,{})},{path:"/payment/:transactionId",element:I.jsx(MM,{})}]);TA.createRoot(document.getElementById("root")).render(I.jsx(H.StrictMode,{children:I.jsx(D1,{router:PM})}));
